(self.webpackChunkmasspass_web=self.webpackChunkmasspass_web||[]).push([[179],{2011:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Dh:()=>L,GT:()=>K,cc:()=>q,hO:()=>$,on:()=>k,pX:()=>ie,xv:()=>H});var h=M(4650),O=M(9260),N=M(2122);Ue=M.hmd(Ue);const Z=["ngOnDestroy"],ie=(j,z,ue,ne={})=>new Proxy(j,{get:(se,oe)=>ue.runOutsideAngular(()=>{var be;if(j[oe])return!(null===(be=ne?.spy)||void 0===be)&&be.get&&ne.spy.get(oe,j[oe]),j[oe];if(Z.indexOf(oe)>-1)return()=>{};const ve=z.toPromise().then(W=>{const _e=W&&W[oe];return"function"==typeof _e?_e.bind(W):_e&&_e.then?_e.then(ce=>ue.run(()=>ce)):ue.run(()=>_e)});return new Proxy(()=>{},{get:(W,_e)=>ve[_e],apply:(W,_e,ce)=>ve.then(Te=>{var He;const Ae=Te&&Te(...ce);return!(null===(He=ne?.spy)||void 0===He)&&He.apply&&ne.spy.apply(oe,ce,Ae),Ae})})})}),K=(j,z)=>{z.forEach(ue=>{Object.getOwnPropertyNames(ue.prototype||ue).forEach(ne=>{Object.defineProperty(j.prototype,ne,Object.getOwnPropertyDescriptor(ue.prototype||ue,ne))})})};class J{constructor(z){return z}}const L=new h.OlP("angularfire2.app.options"),H=new h.OlP("angularfire2.app.name");function k(j,z,ue){const se="object"==typeof ue&&ue||{};se.name=se.name||"string"==typeof ue&&ue||"[DEFAULT]";const be=O.Z.apps.filter(ve=>ve&&ve.name===se.name)[0]||z.runOutsideAngular(()=>O.Z.initializeApp(j,se));try{JSON.stringify(j)!==JSON.stringify(be.options)&&R("error",`${be.name} Firebase App already initialized with different options${Ue.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new J(be)}const R=(j,...z)=>{(0,h.X6Q)()&&typeof console<"u"&&console[j](...z)},P={provide:J,useFactory:k,deps:[L,h.R0b,[new h.FiY,H]]};let $=(()=>{class j{constructor(ue){O.Z.registerVersion("angularfire",N.q4.full,"core"),O.Z.registerVersion("angularfire",N.q4.full,"app-compat"),O.Z.registerVersion("angular",h.q4F.full,ue.toString())}static initializeApp(ue,ne){return{ngModule:j,providers:[{provide:L,useValue:ue},{provide:H,useValue:ne}]}}}return j.\u0275fac=function(ue){return new(ue||j)(h.LFG(h.Lbi))},j.\u0275mod=h.oAB({type:j}),j.\u0275inj=h.cJS({providers:[P]}),j})();function q(j,z,ue,ne,se){const[,oe,be]=globalThis.\u0275AngularfireInstanceCache.find(ve=>ve[0]===j)||[];if(oe)return function te(j,z){try{return j.toString()===z.toString()}catch{return j===z}}(se,be)||(Q("error",`${z} was already initialized on the ${ue} Firebase App with different settings.${ge?" You may need to reload as Firebase is not HMR aware.":""}`),Q("warn",{is:se,was:be})),oe;{const ve=ne();return globalThis.\u0275AngularfireInstanceCache.push([j,ve,se]),ve}}const ge=!!Ue.hot,Q=(j,...z)=>{(0,h.X6Q)()&&typeof console<"u"&&console[j](...z)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Ue,Ie,M)=>{"use strict";M.d(Ie,{q4:()=>Qu,iC:()=>Hi,fc:()=>op,HU:()=>sp,vb:()=>el,JM:()=>Vr});var h=M(4650),O=M(259),N=M(5861),Z=M(9681),ie=M(2090),K=M(4859),J=M(1877),L=M(8766);const H="@firebase/installations",k="0.6.3",P=`w:${k}`,$="FIS_v2",z=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ue(x){return x instanceof ie.ZR&&x.code.includes("request-failed")}function ne({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function se(x){return{token:x.token,requestStatus:2,expiresIn:Te(x.expiresIn),creationTime:Date.now()}}function oe(x,D){return be.apply(this,arguments)}function be(){return(be=(0,N.Z)(function*(x,D){const X=(yield D.json()).error;return z.create("request-failed",{requestName:x,serverCode:X.code,serverMessage:X.message,serverStatus:X.status})})).apply(this,arguments)}function ve({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function W(x,{refreshToken:D}){const F=ve(x);return F.append("Authorization",function He(x){return`${$} ${x}`}(D)),F}function _e(x){return ce.apply(this,arguments)}function ce(){return(ce=(0,N.Z)(function*(x){const D=yield x();return D.status>=500&&D.status<600?x():D})).apply(this,arguments)}function Te(x){return Number(x.replace("s","000"))}function Ae(x,D){return me.apply(this,arguments)}function me(){return(me=(0,N.Z)(function*({appConfig:x,heartbeatServiceProvider:D},{fid:F}){const X=ne(x),ye=ve(x),Re=D.getImmediate({optional:!0});if(Re){const ht=yield Re.getHeartbeatsHeader();ht&&ye.append("x-firebase-client",ht)}const lt={method:"POST",headers:ye,body:JSON.stringify({fid:F,authVersion:$,appId:x.appId,sdkVersion:P})},ft=yield _e(()=>fetch(X,lt));if(ft.ok){const ht=yield ft.json();return{fid:ht.fid||F,registrationStatus:2,refreshToken:ht.refreshToken,authToken:se(ht.authToken)}}throw yield oe("Create Installation",ft)})).apply(this,arguments)}function we(x){return new Promise(D=>{setTimeout(D,x)})}const ke=/^[cdef][\w-]{21}$/;function Ee(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const F=function xe(x){return function Me(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return ke.test(F)?F:""}catch{return""}}function Ce(x){return`${x.appName}!${x.appId}`}const bt=new Map;function et(x,D){const F=Ce(x);St(F,D),function hn(x,D){const F=function pn(){return!Cn&&"BroadcastChannel"in self&&(Cn=new BroadcastChannel("[Firebase] FID Change"),Cn.onmessage=x=>{St(x.data.key,x.data.fid)}),Cn}();F&&F.postMessage({key:x,fid:D}),function tn(){0===bt.size&&Cn&&(Cn.close(),Cn=null)}()}(F,D)}function St(x,D){const F=bt.get(x);if(F)for(const X of F)X(D)}let Cn=null;const ur="firebase-installations-store";let Xn=null;function qr(){return Xn||(Xn=(0,L.X3)("firebase-installations-database",1,{upgrade:(x,D)=>{0===D&&x.createObjectStore(ur)}})),Xn}function gn(x,D){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,N.Z)(function*(x,D){const F=Ce(x),ye=(yield qr()).transaction(ur,"readwrite"),Re=ye.objectStore(ur),ze=yield Re.get(F);return yield Re.put(D,F),yield ye.done,(!ze||ze.fid!==D.fid)&&et(x,D.fid),D})).apply(this,arguments)}function ot(x){return On.apply(this,arguments)}function On(){return(On=(0,N.Z)(function*(x){const D=Ce(x),X=(yield qr()).transaction(ur,"readwrite");yield X.objectStore(ur).delete(D),yield X.done})).apply(this,arguments)}function Gn(x,D){return In.apply(this,arguments)}function In(){return(In=(0,N.Z)(function*(x,D){const F=Ce(x),ye=(yield qr()).transaction(ur,"readwrite"),Re=ye.objectStore(ur),ze=yield Re.get(F),lt=D(ze);return void 0===lt?yield Re.delete(F):yield Re.put(lt,F),yield ye.done,lt&&(!ze||ze.fid!==lt.fid)&&et(x,lt.fid),lt})).apply(this,arguments)}function lr(x){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,N.Z)(function*(x){let D;const F=yield Gn(x.appConfig,X=>{const ye=Tt(X),Re=vt(x,ye);return D=Re.registrationPromise,Re.installationEntry});return""===F.fid?{installationEntry:yield D}:{installationEntry:F,registrationPromise:D}})).apply(this,arguments)}function Tt(x){return er(x||{fid:Ee(),registrationStatus:0})}function vt(x,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(z.create("app-offline"))};const F={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},X=function xt(x,D){return Ei.apply(this,arguments)}(x,F);return{installationEntry:F,registrationPromise:X}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:mn(x)}:{installationEntry:D}}function Ei(){return(Ei=(0,N.Z)(function*(x,D){try{const F=yield Ae(x,D);return gn(x.appConfig,F)}catch(F){throw ue(F)&&409===F.customData.serverCode?yield ot(x.appConfig):yield gn(x.appConfig,{fid:D.fid,registrationStatus:0}),F}})).apply(this,arguments)}function mn(x){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(x){let D=yield si(x.appConfig);for(;1===D.registrationStatus;)yield we(100),D=yield si(x.appConfig);if(0===D.registrationStatus){const{installationEntry:F,registrationPromise:X}=yield lr(x);return X||F}return D})).apply(this,arguments)}function si(x){return Gn(x,D=>{if(!D)throw z.create("installation-not-found");return er(D)})}function er(x){return function ms(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function cn(x,D){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,N.Z)(function*({appConfig:x,heartbeatServiceProvider:D},F){const X=en(x,F),ye=W(x,F),Re=D.getImmediate({optional:!0});if(Re){const ht=yield Re.getHeartbeatsHeader();ht&&ye.append("x-firebase-client",ht)}const lt={method:"POST",headers:ye,body:JSON.stringify({installation:{sdkVersion:P,appId:x.appId}})},ft=yield _e(()=>fetch(X,lt));if(ft.ok)return se(yield ft.json());throw yield oe("Generate Auth Token",ft)})).apply(this,arguments)}function en(x,{fid:D}){return`${ne(x)}/${D}/authTokens:generate`}function wr(x){return oi.apply(this,arguments)}function oi(){return(oi=(0,N.Z)(function*(x,D=!1){let F;const X=yield Gn(x.appConfig,Re=>{if(!Vt(Re))throw z.create("not-registered");const ze=Re.authToken;if(!D&&ae(ze))return Re;if(1===ze.requestStatus)return F=Qe(x,D),Re;{if(!navigator.onLine)throw z.create("app-offline");const lt=fe(Re);return F=At(x,lt),lt}});return F?yield F:X.authToken})).apply(this,arguments)}function Qe(x,D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,N.Z)(function*(x,D){let F=yield st(x.appConfig);for(;1===F.authToken.requestStatus;)yield we(100),F=yield st(x.appConfig);const X=F.authToken;return 0===X.requestStatus?wr(x,D):X})).apply(this,arguments)}function st(x){return Gn(x,D=>{if(!Vt(D))throw z.create("not-registered");return function Ve(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function At(x,D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,N.Z)(function*(x,D){try{const F=yield cn(x,D),X=Object.assign(Object.assign({},D),{authToken:F});return yield gn(x.appConfig,X),F}catch(F){if(!ue(F)||401!==F.customData.serverCode&&404!==F.customData.serverCode){const X=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield gn(x.appConfig,X)}else yield ot(x.appConfig);throw F}})).apply(this,arguments)}function Vt(x){return void 0!==x&&2===x.registrationStatus}function ae(x){return 2===x.requestStatus&&!function re(x){const D=Date.now();return D<x.creationTime||x.creationTime+x.expiresIn<D+36e5}(x)}function fe(x){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:D})}function nt(){return(nt=(0,N.Z)(function*(x){const D=x,{installationEntry:F,registrationPromise:X}=yield lr(D);return X?X.catch(console.error):wr(D).catch(console.error),F.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,N.Z)(function*(x,D=!1){const F=x;return yield Sn(F),(yield wr(F,D)).token})).apply(this,arguments)}function Sn(x){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,N.Z)(function*(x){const{registrationPromise:D}=yield lr(x);D&&(yield D)})).apply(this,arguments)}function bu(x){return z.create("missing-app-config-values",{valueName:x})}const Gl="installations",Fn=x=>{const D=x.getProvider("app").getImmediate(),F=function Ta(x){if(!x||!x.options)throw bu("App Configuration");if(!x.name)throw bu("App Name");const D=["projectId","apiKey","appId"];for(const F of D)if(!x.options[F])throw bu(F);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(D);return{app:D,appConfig:F,heartbeatServiceProvider:(0,Z._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Ud=x=>{const D=x.getProvider("app").getImmediate(),F=(0,Z._getProvider)(D,Gl).getImmediate();return{getId:()=>function Se(x){return nt.apply(this,arguments)}(F),getToken:ye=>function Rt(x){return Qt.apply(this,arguments)}(F,ye)}};(function zl(){(0,Z._registerComponent)(new K.wA(Gl,Fn,"PUBLIC")),(0,Z._registerComponent)(new K.wA("installations-internal",Ud,"PRIVATE"))})(),(0,Z.registerVersion)(H,k),(0,Z.registerVersion)(H,k,"esm2017");const Sa="@firebase/remote-config",tr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class oo{constructor(D,F,X,ye){this.client=D,this.storage=F,this.storageCache=X,this.logger=ye}isCachedDataFresh(D,F){if(!F)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const X=Date.now()-F,ye=X<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${X}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${ye}.`),ye}fetch(D){var F=this;return(0,N.Z)(function*(){const[X,ye]=yield Promise.all([F.storage.getLastSuccessfulFetchTimestampMillis(),F.storage.getLastSuccessfulFetchResponse()]);if(ye&&F.isCachedDataFresh(D.cacheMaxAgeMillis,X))return ye;D.eTag=ye&&ye.eTag;const Re=yield F.client.fetch(D),ze=[F.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Re.status&&ze.push(F.storage.setLastSuccessfulFetchResponse(Re)),yield Promise.all(ze),Re})()}}function Ui(x=navigator){return x.languages&&x.languages[0]||x.language}class Hs{constructor(D,F,X,ye,Re,ze){this.firebaseInstallations=D,this.sdkVersion=F,this.namespace=X,this.projectId=ye,this.apiKey=Re,this.appId=ze}fetch(D){var F=this;return(0,N.Z)(function*(){const[X,ye]=yield Promise.all([F.firebaseInstallations.getId(),F.firebaseInstallations.getToken()]),ze=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${F.projectId}/namespaces/${F.namespace}:fetch?key=${F.apiKey}`,lt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ft={sdk_version:F.sdkVersion,app_instance_id:X,app_instance_id_token:ye,app_id:F.appId,language_code:Ui()},ht={method:"POST",headers:lt,body:JSON.stringify(ft)},jt=fetch(ze,ht),Ut=new Promise((pr,Ds)=>{D.signal.addEventListener(()=>{const ra=new Error("The operation was aborted.");ra.name="AbortError",Ds(ra)})});let br;try{yield Promise.race([jt,Ut]),br=yield jt}catch(pr){let Ds="fetch-client-network";throw"AbortError"===pr?.name&&(Ds="fetch-timeout"),tr.create(Ds,{originalErrorMessage:pr?.message})}let fr=br.status;const Di=br.headers.get("ETag")||void 0;let nl,Hn;if(200===br.status){let pr;try{pr=yield br.json()}catch(Ds){throw tr.create("fetch-client-parse",{originalErrorMessage:Ds?.message})}nl=pr.entries,Hn=pr.state}if("INSTANCE_STATE_UNSPECIFIED"===Hn?fr=500:"NO_CHANGE"===Hn?fr=304:("NO_TEMPLATE"===Hn||"EMPTY_CONFIG"===Hn)&&(nl={}),304!==fr&&200!==fr)throw tr.create("fetch-status",{httpStatus:fr});return{status:fr,eTag:Di,config:nl}})()}}class Qi{constructor(D,F){this.client=D,this.storage=F}fetch(D){var F=this;return(0,N.Z)(function*(){const X=(yield F.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return F.attemptFetch(D,X)})()}attemptFetch(D,{throttleEndTimeMillis:F,backoffCount:X}){var ye=this;return(0,N.Z)(function*(){yield function ys(x,D){return new Promise((F,X)=>{const ye=Math.max(D-Date.now(),0),Re=setTimeout(F,ye);x.addEventListener(()=>{clearTimeout(Re),X(tr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,F);try{const Re=yield ye.client.fetch(D);return yield ye.storage.deleteThrottleMetadata(),Re}catch(Re){if(!function bn(x){if(!(x instanceof ie.ZR&&x.customData))return!1;const D=Number(x.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Re))throw Re;const ze={throttleEndTimeMillis:Date.now()+(0,ie.$s)(X),backoffCount:X+1};return yield ye.storage.setThrottleMetadata(ze),ye.attemptFetch(D,ze)}})()}}class Bo{constructor(D,F,X,ye,Re){this.app=D,this._client=F,this._storageCache=X,this._storage=ye,this._logger=Re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ao(x,D){const F=x.target.error||void 0;return tr.create(D,{originalErrorMessage:F&&F?.message})}const Zr="app_namespace_store";class Vi{constructor(D,F,X,ye=function ai(){return new Promise((x,D)=>{try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=X=>{D(ao(X,"storage-open"))},F.onsuccess=X=>{x(X.target.result)},F.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Zr,{keyPath:"compositeKey"})}}catch(F){D(tr.create("storage-open",{originalErrorMessage:F?.message}))}})}()){this.appId=D,this.appName=F,this.namespace=X,this.openDbPromise=ye}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var F=this;return(0,N.Z)(function*(){const X=yield F.openDbPromise;return new Promise((ye,Re)=>{const lt=X.transaction([Zr],"readonly").objectStore(Zr),ft=F.createCompositeKey(D);try{const ht=lt.get(ft);ht.onerror=jt=>{Re(ao(jt,"storage-get"))},ht.onsuccess=jt=>{const Ut=jt.target.result;ye(Ut?Ut.value:void 0)}}catch(ht){Re(tr.create("storage-get",{originalErrorMessage:ht?.message}))}})})()}set(D,F){var X=this;return(0,N.Z)(function*(){const ye=yield X.openDbPromise;return new Promise((Re,ze)=>{const ft=ye.transaction([Zr],"readwrite").objectStore(Zr),ht=X.createCompositeKey(D);try{const jt=ft.put({compositeKey:ht,value:F});jt.onerror=Ut=>{ze(ao(Ut,"storage-set"))},jt.onsuccess=()=>{Re()}}catch(jt){ze(tr.create("storage-set",{originalErrorMessage:jt?.message}))}})})()}delete(D){var F=this;return(0,N.Z)(function*(){const X=yield F.openDbPromise;return new Promise((ye,Re)=>{const lt=X.transaction([Zr],"readwrite").objectStore(Zr),ft=F.createCompositeKey(D);try{const ht=lt.delete(ft);ht.onerror=jt=>{Re(ao(jt,"storage-delete"))},ht.onsuccess=()=>{ye()}}catch(ht){Re(tr.create("storage-delete",{originalErrorMessage:ht?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Ra{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const F=D.storage.getLastFetchStatus(),X=D.storage.getLastSuccessfulFetchTimestampMillis(),ye=D.storage.getActiveConfig(),Re=yield F;Re&&(D.lastFetchStatus=Re);const ze=yield X;ze&&(D.lastSuccessfulFetchTimestampMillis=ze);const lt=yield ye;lt&&(D.activeConfig=lt)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ma(){return qf.apply(this,arguments)}function qf(){return(qf=(0,N.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Bi(){(0,Z._registerComponent)(new K.wA("remote-config",function x(D,{instanceIdentifier:F}){const X=D.getProvider("app").getImmediate(),ye=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw tr.create("registration-window");if(!(0,ie.hl)())throw tr.create("indexed-db-unavailable");const{projectId:Re,apiKey:ze,appId:lt}=X.options;if(!Re)throw tr.create("registration-project-id");if(!ze)throw tr.create("registration-api-key");if(!lt)throw tr.create("registration-app-id");const ft=new Vi(lt,X.name,F=F||"firebase"),ht=new Ra(ft),jt=new J.Yd(Sa);jt.logLevel=J.in.ERROR;const Ut=new Hs(ye,Z.SDK_VERSION,F,Re,ze,lt),br=new Qi(Ut,ft),fr=new oo(br,ft,ht,jt),Di=new Bo(X,fr,ht,ft,jt);return function Ln(x){const D=(0,ie.m9)(x);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Di),Di},"PUBLIC").setMultipleInstances(!0)),(0,Z.registerVersion)(Sa,"0.4.3"),(0,Z.registerVersion)(Sa,"0.4.3","esm2017")}();const Zl="/firebase-messaging-sw.js",vs="/firebase-cloud-messaging-push-scope",Ho="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yl="google.c.a.c_id",Kf="google.c.a.c_l",Zf="google.c.a.ts",sm="google.c.a.e";var uo=(()=>{return(x=uo||(uo={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",uo;var x})();function Xi(x){const D=new Uint8Array(x);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function om(x){const F=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),X=atob(F),ye=new Uint8Array(X.length);for(let Re=0;Re<X.length;++Re)ye[Re]=X.charCodeAt(Re);return ye}const Ql="fcm_token_details_db",Yr="fcm_token_object_Store";function Jl(x){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,N.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Re=>Re.name).includes(Ql))return null;let D=null;return(yield(0,L.X3)(Ql,5,{upgrade:(X=(0,N.Z)(function*(ye,Re,ze,lt){var ft;if(Re<2||!ye.objectStoreNames.contains(Yr))return;const ht=lt.objectStore(Yr),jt=yield ht.index("fcmSenderId").get(x);if(yield ht.clear(),jt)if(2===Re){const Ut=jt;if(!Ut.auth||!Ut.p256dh||!Ut.endpoint)return;D={token:Ut.fcmToken,createTime:null!==(ft=Ut.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:Ut.auth,p256dh:Ut.p256dh,endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:"string"==typeof Ut.vapidKey?Ut.vapidKey:Xi(Ut.vapidKey)}}}else if(3===Re){const Ut=jt;D={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:Xi(Ut.auth),p256dh:Xi(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:Xi(Ut.vapidKey)}}}else if(4===Re){const Ut=jt;D={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:Xi(Ut.auth),p256dh:Xi(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:Xi(Ut.vapidKey)}}}}),function(Re,ze,lt,ft){return X.apply(this,arguments)})})).close(),yield(0,L.Lj)(Ql),yield(0,L.Lj)("fcm_vapid_details_db"),yield(0,L.Lj)("undefined"),Yf(D)?D:null;var X}),Hd.apply(this,arguments)}function Yf(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:D}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const co="firebase-messaging-store";let Du=null;function $o(){return Du||(Du=(0,L.X3)("firebase-messaging-database",1,{upgrade:(x,D)=>{0===D&&x.createObjectStore(co)}})),Du}function Tu(x){return Go.apply(this,arguments)}function Go(){return(Go=(0,N.Z)(function*(x){const D=Wo(x),X=yield(yield $o()).transaction(co).objectStore(co).get(D);if(X)return X;{const ye=yield Jl(x.appConfig.senderId);if(ye)return yield ho(x,ye),ye}})).apply(this,arguments)}function ho(x,D){return ka.apply(this,arguments)}function ka(){return(ka=(0,N.Z)(function*(x,D){const F=Wo(x),ye=(yield $o()).transaction(co,"readwrite");return yield ye.objectStore(co).put(D,F),yield ye.done,D})).apply(this,arguments)}function jd(x){return zo.apply(this,arguments)}function zo(){return(zo=(0,N.Z)(function*(x){const D=Wo(x),X=(yield $o()).transaction(co,"readwrite");yield X.objectStore(co).delete(D),yield X.done})).apply(this,arguments)}function Wo({appConfig:x}){return x.appId}const Bn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Su(x,D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,N.Z)(function*(x,D){const F=yield po(x),X=Oa(D),ye={method:"POST",headers:F,body:JSON.stringify(X)};let Re;try{Re=yield(yield fetch(qo(x.appConfig),ye)).json()}catch(ze){throw Bn.create("token-subscribe-failed",{errorInfo:ze?.toString()})}if(Re.error)throw Bn.create("token-subscribe-failed",{errorInfo:Re.error.message});if(!Re.token)throw Bn.create("token-subscribe-no-token");return Re.token})).apply(this,arguments)}function Pa(x,D){return fo.apply(this,arguments)}function fo(){return(fo=(0,N.Z)(function*(x,D){const F=yield po(x),X=Oa(D.subscriptionOptions),ye={method:"PATCH",headers:F,body:JSON.stringify(X)};let Re;try{Re=yield(yield fetch(`${qo(x.appConfig)}/${D.token}`,ye)).json()}catch(ze){throw Bn.create("token-update-failed",{errorInfo:ze?.toString()})}if(Re.error)throw Bn.create("token-update-failed",{errorInfo:Re.error.message});if(!Re.token)throw Bn.create("token-update-no-token");return Re.token})).apply(this,arguments)}function rr(x,D){return ec.apply(this,arguments)}function ec(){return(ec=(0,N.Z)(function*(x,D){const X={method:"DELETE",headers:yield po(x)};try{const Re=yield(yield fetch(`${qo(x.appConfig)}/${D}`,X)).json();if(Re.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:Re.error.message})}catch(ye){throw Bn.create("token-unsubscribe-failed",{errorInfo:ye?.toString()})}})).apply(this,arguments)}function qo({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function po(x){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,N.Z)(function*({appConfig:x,installations:D}){const F=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${F}`})})).apply(this,arguments)}function Oa({p256dh:x,auth:D,endpoint:F,vapidKey:X}){const ye={web:{endpoint:F,auth:D,p256dh:x}};return X!==Ho&&(ye.web.applicationPubKey=X),ye}const Ko=6048e5;function Au(x){return ws.apply(this,arguments)}function ws(){return(ws=(0,N.Z)(function*(x){const D=yield tc(x.swRegistration,x.vapidKey),F={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:D.endpoint,auth:Xi(D.getKey("auth")),p256dh:Xi(D.getKey("p256dh"))},X=yield Tu(x.firebaseDependencies);if(X){if(Nu(X.subscriptionOptions,F))return Date.now()>=X.createTime+Ko?Lt(x,{token:X.token,createTime:Date.now(),subscriptionOptions:F}):X.token;try{yield rr(x.firebaseDependencies,X.token)}catch(ye){console.warn(ye)}return $d(x.firebaseDependencies,F)}return $d(x.firebaseDependencies,F)})).apply(this,arguments)}function Fa(x){return La.apply(this,arguments)}function La(){return(La=(0,N.Z)(function*(x){const D=yield Tu(x.firebaseDependencies);D&&(yield rr(x.firebaseDependencies,D.token),yield jd(x.firebaseDependencies));const F=yield x.swRegistration.pushManager.getSubscription();return!F||F.unsubscribe()})).apply(this,arguments)}function Lt(x,D){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,N.Z)(function*(x,D){try{const F=yield Pa(x.firebaseDependencies,D),X=Object.assign(Object.assign({},D),{token:F,createTime:Date.now()});return yield ho(x.firebaseDependencies,X),F}catch(F){throw yield Fa(x),F}})).apply(this,arguments)}function $d(x,D){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,N.Z)(function*(x,D){const X={token:yield Su(x,D),createTime:Date.now(),subscriptionOptions:D};return yield ho(x,X),X.token})).apply(this,arguments)}function tc(x,D){return nc.apply(this,arguments)}function nc(){return(nc=(0,N.Z)(function*(x,D){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:om(D)})})).apply(this,arguments)}function Nu(x,D){return D.vapidKey===x.vapidKey&&D.endpoint===x.endpoint&&D.auth===x.auth&&D.p256dh===x.p256dh}function Qf(x){const D={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function rc(x,D){if(!D.notification)return;x.notification={};const F=D.notification.title;F&&(x.notification.title=F);const X=D.notification.body;X&&(x.notification.body=X);const ye=D.notification.image;ye&&(x.notification.image=ye);const Re=D.notification.icon;Re&&(x.notification.icon=Re)}(D,x),function Be(x,D){D.data&&(x.data=D.data)}(D,x),function rn(x,D){var F,X,ye,Re,ze;if(!(D.fcmOptions||null!==(F=D.notification)&&void 0!==F&&F.click_action))return;x.fcmOptions={};const lt=null!==(ye=null===(X=D.fcmOptions)||void 0===X?void 0:X.link)&&void 0!==ye?ye:null===(Re=D.notification)||void 0===Re?void 0:Re.click_action;lt&&(x.fcmOptions.link=lt);const ft=null===(ze=D.fcmOptions)||void 0===ze?void 0:ze.analytics_label;ft&&(x.fcmOptions.analyticsLabel=ft)}(D,x),D}function ic(x){return"object"==typeof x&&!!x&&Yl in x}function Gd(x,D){const F=[];for(let X=0;X<x.length;X++)F.push(x.charAt(X)),X<D.length&&F.push(D.charAt(X));return F.join("")}function Ua(x){return Bn.create("missing-app-config-values",{valueName:x})}Gd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Gd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ku{constructor(D,F,X){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ye=function Nr(x){if(!x||!x.options)throw Ua("App Configuration Object");if(!x.name)throw Ua("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:F}=x;for(const X of D)if(!F[X])throw Ua(X);return{appName:x.name,projectId:F.projectId,apiKey:F.apiKey,appId:F.appId,senderId:F.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:ye,installations:F,analyticsProvider:X}}_delete(){return Promise.resolve()}}function ci(x){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,N.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(Zl,{scope:vs}),x.swRegistration.update().catch(()=>{})}catch(D){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Ou(x,D){return zd.apply(this,arguments)}function zd(){return(zd=(0,N.Z)(function*(x,D){if(!D&&!x.swRegistration&&(yield ci(x)),D||!x.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");x.swRegistration=D}})).apply(this,arguments)}function sc(x,D){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,N.Z)(function*(x,D){D?x.vapidKey=D:x.vapidKey||(x.vapidKey=Ho)})).apply(this,arguments)}function di(){return(di=(0,N.Z)(function*(x,D){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield sc(x,D?.vapidKey),yield Ou(x,D?.serviceWorkerRegistration),Au(x)})).apply(this,arguments)}function js(x,D,F){return go.apply(this,arguments)}function go(){return(go=(0,N.Z)(function*(x,D,F){const X=Ji(D);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(X,{message_id:F[Yl],message_name:F[Kf],message_time:F[Zf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ji(x){switch(x){case uo.NOTIFICATION_CLICKED:return"notification_open";case uo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Va(){return(Va=(0,N.Z)(function*(x,D){const F=D.data;if(!F.isFirebaseMessaging)return;x.onMessageHandler&&F.messageType===uo.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Qf(F)):x.onMessageHandler.next(Qf(F)));const X=F.data;ic(X)&&"1"===X[sm]&&(yield js(x,F.messageType,X))})).apply(this,arguments)}const qd="@firebase/messaging",ac=x=>{const D=new ku(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",F=>function Wd(x,D){return Va.apply(this,arguments)}(D,F)),D},Es=x=>{const D=x.getProvider("messaging").getImmediate();return{getToken:X=>function hr(x,D){return di.apply(this,arguments)}(D,X)}};function uc(){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,N.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kd(){(0,Z._registerComponent)(new K.wA("messaging",ac,"PUBLIC")),(0,Z._registerComponent)(new K.wA("messaging-internal",Es,"PRIVATE")),(0,Z.registerVersion)(qd,"0.12.3"),(0,Z.registerVersion)(qd,"0.12.3","esm2017")}();const Yd="analytics",Qr="firebase_id",mo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cc="https://www.googletagmanager.com/gtag/js",Cr=new J.Yd("@firebase/analytics");function ep(x){return Promise.all(x.map(D=>D.catch(F=>F)))}function lm(x,D){const F=document.createElement("script");F.src=`${cc}?l=${x}&id=${D}`,F.async=!0,document.head.appendChild(F)}function Ba(x,D,F,X,ye,Re){return _o.apply(this,arguments)}function _o(){return(_o=(0,N.Z)(function*(x,D,F,X,ye,Re){const ze=X[ye];try{if(ze)yield D[ze];else{const ft=(yield ep(F)).find(ht=>ht.measurementId===ye);ft&&(yield D[ft.appId])}}catch(lt){Cr.error(lt)}x("config",ye,Re)})).apply(this,arguments)}function Uu(x,D,F,X,ye){return es.apply(this,arguments)}function es(){return(es=(0,N.Z)(function*(x,D,F,X,ye){try{let Re=[];if(ye&&ye.send_to){let ze=ye.send_to;Array.isArray(ze)||(ze=[ze]);const lt=yield ep(F);for(const ft of ze){const ht=lt.find(Ut=>Ut.measurementId===ft),jt=ht&&D[ht.appId];if(!jt){Re=[];break}Re.push(jt)}}0===Re.length&&(Re=Object.values(D)),yield Promise.all(Re),x("event",X,ye||{})}catch(Re){Cr.error(Re)}})).apply(this,arguments)}function Is(x){const D=window.document.getElementsByTagName("script");for(const F of Object.values(D))if(F.src&&F.src.includes(cc)&&F.src.includes(x))return F;return null}const hi=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xd=new class vo{constructor(D={},F=1e3){this.throttleMetadata=D,this.intervalMillis=F}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,F){this.throttleMetadata[D]=F}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Vu(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function wo(x){return hc.apply(this,arguments)}function hc(){return(hc=(0,N.Z)(function*(x){var D;const{appId:F,apiKey:X}=x,ye={method:"GET",headers:Vu(X)},Re=mo.replace("{app-id}",F),ze=yield fetch(Re,ye);if(200!==ze.status&&304!==ze.status){let lt="";try{const ft=yield ze.json();null!==(D=ft.error)&&void 0!==D&&D.message&&(lt=ft.error.message)}catch{}throw hi.create("config-fetch-failed",{httpStatus:ze.status,responseMessage:lt})}return ze.json()})).apply(this,arguments)}function Un(x){return $s.apply(this,arguments)}function $s(){return($s=(0,N.Z)(function*(x,D=Xd,F){const{appId:X,apiKey:ye,measurementId:Re}=x.options;if(!X)throw hi.create("no-app-id");if(!ye){if(Re)return{measurementId:Re,appId:X};throw hi.create("no-api-key")}const ze=D.getThrottleMetadata(X)||{backoffCount:0,throttleEndTimeMillis:Date.now()},lt=new ja;return setTimeout((0,N.Z)(function*(){lt.abort()}),void 0!==F?F:6e4),Yo({appId:X,apiKey:ye,measurementId:Re},ze,lt,D)})).apply(this,arguments)}function Yo(x,D,F){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,N.Z)(function*(x,{throttleEndTimeMillis:D,backoffCount:F},X,ye=Xd){var Re;const{appId:ze,measurementId:lt}=x;try{yield Qo(X,D)}catch(ft){if(lt)return Cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:ze,measurementId:lt};throw ft}try{const ft=yield wo(x);return ye.deleteThrottleMetadata(ze),ft}catch(ft){const ht=ft;if(!fc(ht)){if(ye.deleteThrottleMetadata(ze),lt)return Cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:ze,measurementId:lt};throw ft}const jt=503===Number(null===(Re=ht?.customData)||void 0===Re?void 0:Re.httpStatus)?(0,ie.$s)(F,ye.intervalMillis,30):(0,ie.$s)(F,ye.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+jt,backoffCount:F+1};return ye.setThrottleMetadata(ze,Ut),Cr.debug(`Calling attemptFetch again in ${jt} millis`),Yo(x,Ut,X,ye)}})).apply(this,arguments)}function Qo(x,D){return new Promise((F,X)=>{const ye=Math.max(D-Date.now(),0),Re=setTimeout(F,ye);x.addEventListener(()=>{clearTimeout(Re),X(hi.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function fc(x){if(!(x instanceof ie.ZR&&x.customData))return!1;const D=Number(x.customData.httpStatus);return 429===D||500===D||503===D||504===D}class ja{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Bu,Io;function Gs(){return(Gs=(0,N.Z)(function*(x,D,F,X,ye){if(ye&&ye.global)x("event",F,X);else{const Re=yield D;x("event",F,Object.assign(Object.assign({},X),{send_to:Re}))}})).apply(this,arguments)}function $u(x){Io=x}function Gu(x){Bu=x}function zu(){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,N.Z)(function*(){if(!(0,ie.hl)())return Cr.warn(hi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(x){return Cr.warn(hi.create("indexeddb-unavailable",{errorInfo:x?.toString()}).message),!1}return!0})).apply(this,arguments)}function Wu(){return(Wu=(0,N.Z)(function*(x,D,F,X,ye,Re,ze){var lt;const ft=Un(x);ft.then(fr=>{F[fr.measurementId]=fr.appId,x.options.measurementId&&fr.measurementId!==x.options.measurementId&&Cr.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${fr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fr=>Cr.error(fr)),D.push(ft);const ht=zu().then(fr=>{if(fr)return X.getId()}),[jt,Ut]=yield Promise.all([ft,ht]);Is(Re)||lm(Re,jt.measurementId),Io&&(ye("consent","default",Io),$u(void 0)),ye("js",new Date);const br=null!==(lt=ze?.config)&&void 0!==lt?lt:{};return br.origin="firebase",br.update=!0,null!=Ut&&(br[Qr]=Ut),ye("config",jt.measurementId,br),Bu&&(ye("set",Bu),Gu(void 0)),jt.measurementId})).apply(this,arguments)}class qu{constructor(D){this.app=D}_delete(){return delete bs[this.app.options.appId],Promise.resolve()}}let bs={},pc=[];const ea={};let mc,ns,ts="dataLayer",xi=!1;function Ku(x,D,F){!function _c(){const x=[];if((0,ie.ru)()&&x.push("This is a browser extension environment."),(0,ie.zI)()||x.push("Cookies are not available."),x.length>0){const D=x.map((X,ye)=>`(${ye+1}) ${X}`).join(" "),F=hi.create("invalid-analytics-context",{errorInfo:D});Cr.warn(F.message)}}();const X=x.options.appId;if(!X)throw hi.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw hi.create("no-api-key");Cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bs[X])throw hi.create("already-exists",{id:X});if(!xi){!function cm(x){let D=[];Array.isArray(window[x])?D=window[x]:window[x]=D}(ts);const{wrappedGtag:Re,gtagCore:ze}=function tp(x,D,F,X,ye){let Re=function(...ze){window[X].push(arguments)};return window[ye]&&"function"==typeof window[ye]&&(Re=window[ye]),window[ye]=function yo(x,D,F,X){function Re(){return(Re=(0,N.Z)(function*(ze,lt,ft){try{"event"===ze?yield Uu(x,D,F,lt,ft):"config"===ze?yield Ba(x,D,F,X,lt,ft):"consent"===ze?x("consent","update",ft):x("set",lt)}catch(ht){Cr.error(ht)}})).apply(this,arguments)}return function ye(ze,lt,ft){return Re.apply(this,arguments)}}(Re,x,D,F),{gtagCore:Re,wrappedGtag:window[ye]}}(bs,pc,ea,ts,"gtag");ns=Re,mc=ze,xi=!0}return bs[X]=function Co(x,D,F,X,ye,Re,ze){return Wu.apply(this,arguments)}(x,pc,ea,D,mc,ts,F),new qu(x)}function th(){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,N.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const wn="@firebase/analytics";!function hm(){(0,Z._registerComponent)(new K.wA(Yd,(D,{options:F})=>Ku(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),F),"PUBLIC")),(0,Z._registerComponent)(new K.wA("analytics-internal",function x(D){try{const F=D.getProvider(Yd).getImmediate();return{logEvent:(X,ye,Re)=>function hy(x,D,F,X){x=(0,ie.m9)(x),function Hu(x,D,F,X,ye){return Gs.apply(this,arguments)}(ns,bs[x.app.options.appId],D,F,X).catch(ye=>Cr.error(ye))}(F,X,ye,Re)}}catch(F){throw hi.create("interop-component-reg-failed",{reason:F})}},"PRIVATE")),(0,Z.registerVersion)(wn,"0.9.3"),(0,Z.registerVersion)(wn,"0.9.3","esm2017")}();var rh=M(4408),wc=M(7565);const rp=new class sh extends wc.v{}(class ih extends rh.o{constructor(D,F){super(D,F),this.scheduler=D,this.work=F}schedule(D,F=0){return F>0?super.schedule(D,F):(this.delay=F,this.state=D,this.scheduler.flush(this),this)}execute(D,F){return F>0||this.closed?super.execute(D,F):this._execute(D,F)}requestAsyncId(D,F,X=0){return null!=X&&X>0||null==X&&this.delay>0?super.requestAsyncId(D,F,X):(D.flush(this),0)}});var oh=M(4986),Ic=M(8505),Dn=M(5363),Yu=M(9468);const Qu=new h.GfV("7.5.0"),ah="__angularfire_symbol__analyticsIsSupportedValue",Xr="__angularfire_symbol__analyticsIsSupported",is="__angularfire_symbol__remoteConfigIsSupportedValue",Xu="__angularfire_symbol__remoteConfigIsSupported",qa="__angularfire_symbol__messagingIsSupportedValue",ta="__angularfire_symbol__messagingIsSupported";function Vr(x,D,F){if(D){if(1===D.length)return D[0];const Re=D.filter(ze=>ze.app===F);if(1===Re.length)return Re[0]}return F.container.getProvider(x).getImmediate({optional:!0})}globalThis[Xr]||(globalThis[Xr]=th().then(x=>globalThis[ah]=x).catch(()=>globalThis[ah]=!1)),globalThis[ta]||(globalThis[ta]=uc().then(x=>globalThis[qa]=x).catch(()=>globalThis[qa]=!1)),globalThis[Xu]||(globalThis[Xu]=Ma().then(x=>globalThis[is]=x).catch(()=>globalThis[is]=!1));const el=(x,D)=>{const F=D?[D]:(0,O.C6)(),X=[];return F.forEach(ye=>{ye.container.getProvider(x).instances.forEach(ze=>{X.includes(ze)||X.push(ze)})}),X};function Zt(){}class Br{constructor(D,F=rp){this.zone=D,this.delegate=F}now(){return this.delegate.now()}schedule(D,F,X){const ye=this.zone;return this.delegate.schedule(function(ze){ye.runGuarded(()=>{D.apply(this,[ze])})},F,X)}}class uh{constructor(D){this.zone=D,this.task=null}call(D,F){const X=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zt,{},Zt,Zt)),F.pipe((0,Ic.b)({next:X,complete:X,error:X})).subscribe(D).add(X)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sp=(()=>{class x{constructor(F){this.ngZone=F,this.outsideAngular=F.runOutsideAngular(()=>new Br(Zone.current)),this.insideAngular=F.run(()=>new Br(Zone.current,oh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(F){return new(F||x)(h.LFG(h.R0b))},x.\u0275prov=h.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function xs(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function op(x){return x.pipe((0,Dn.Q)(xs().outsideAngular))}function Hi(x){return xs(),function Mn(x){return function(F){return(F=F.lift(new uh(x.ngZone))).pipe((0,Yu.R)(x.outsideAngular),(0,Dn.Q)(x.insideAngular))}}(xs())(x)}},2090:(Ue,Ie,M)=>{"use strict";M.d(Ie,{$s:()=>st,BH:()=>se,DV:()=>ur,Dv:()=>mn,G6:()=>Me,GJ:()=>En,L:()=>L,LL:()=>bt,Pz:()=>ne,Sg:()=>oe,UG:()=>W,UI:()=>qr,US:()=>K,Wj:()=>er,Wl:()=>St,Yr:()=>we,ZB:()=>R,ZR:()=>Ce,aH:()=>ue,b$:()=>Te,cI:()=>We,dS:()=>cn,eu:()=>de,g5:()=>N,gK:()=>_n,gQ:()=>lr,h$:()=>J,hl:()=>ke,hu:()=>O,jU:()=>_e,lb:()=>ms,m9:()=>Vt,ne:()=>Pr,p$:()=>k,pd:()=>In,r3:()=>ii,ru:()=>ce,tV:()=>H,uI:()=>ve,ug:()=>Ii,vZ:()=>gn,w1:()=>Ae,w9:()=>tn,xO:()=>On,xb:()=>Xn,z$:()=>be,zI:()=>Ee,zd:()=>Gn});const O=function(ae,re){if(!ae)throw N(re)},N=function(ae){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ae)},Z=function(ae){const re=[];let fe=0;for(let Ve=0;Ve<ae.length;Ve++){let Se=ae.charCodeAt(Ve);Se<128?re[fe++]=Se:Se<2048?(re[fe++]=Se>>6|192,re[fe++]=63&Se|128):55296==(64512&Se)&&Ve+1<ae.length&&56320==(64512&ae.charCodeAt(Ve+1))?(Se=65536+((1023&Se)<<10)+(1023&ae.charCodeAt(++Ve)),re[fe++]=Se>>18|240,re[fe++]=Se>>12&63|128,re[fe++]=Se>>6&63|128,re[fe++]=63&Se|128):(re[fe++]=Se>>12|224,re[fe++]=Se>>6&63|128,re[fe++]=63&Se|128)}return re},K={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ae,re){if(!Array.isArray(ae))throw Error("encodeByteArray takes an array as a parameter");this.init_();const fe=re?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ve=[];for(let Se=0;Se<ae.length;Se+=3){const nt=ae[Se],Rt=Se+1<ae.length,Qt=Rt?ae[Se+1]:0,Sn=Se+2<ae.length,Dt=Sn?ae[Se+2]:0;let cr=(15&Qt)<<2|Dt>>6,Lo=63&Dt;Sn||(Lo=64,Rt||(cr=64)),Ve.push(fe[nt>>2],fe[(3&nt)<<4|Qt>>4],fe[cr],fe[Lo])}return Ve.join("")},encodeString(ae,re){return this.HAS_NATIVE_SUPPORT&&!re?btoa(ae):this.encodeByteArray(Z(ae),re)},decodeString(ae,re){return this.HAS_NATIVE_SUPPORT&&!re?atob(ae):function(ae){const re=[];let fe=0,Ve=0;for(;fe<ae.length;){const Se=ae[fe++];if(Se<128)re[Ve++]=String.fromCharCode(Se);else if(Se>191&&Se<224){const nt=ae[fe++];re[Ve++]=String.fromCharCode((31&Se)<<6|63&nt)}else if(Se>239&&Se<365){const Sn=((7&Se)<<18|(63&ae[fe++])<<12|(63&ae[fe++])<<6|63&ae[fe++])-65536;re[Ve++]=String.fromCharCode(55296+(Sn>>10)),re[Ve++]=String.fromCharCode(56320+(1023&Sn))}else{const nt=ae[fe++],Rt=ae[fe++];re[Ve++]=String.fromCharCode((15&Se)<<12|(63&nt)<<6|63&Rt)}}return re.join("")}(this.decodeStringToByteArray(ae,re))},decodeStringToByteArray(ae,re){this.init_();const fe=re?this.charToByteMapWebSafe_:this.charToByteMap_,Ve=[];for(let Se=0;Se<ae.length;){const nt=fe[ae.charAt(Se++)],Qt=Se<ae.length?fe[ae.charAt(Se)]:0;++Se;const Dt=Se<ae.length?fe[ae.charAt(Se)]:64;++Se;const Kt=Se<ae.length?fe[ae.charAt(Se)]:64;if(++Se,null==nt||null==Qt||null==Dt||null==Kt)throw Error();Ve.push(nt<<2|Qt>>4),64!==Dt&&(Ve.push(Qt<<4&240|Dt>>2),64!==Kt&&Ve.push(Dt<<6&192|Kt))}return Ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ae=0;ae<this.ENCODED_VALS.length;ae++)this.byteToCharMap_[ae]=this.ENCODED_VALS.charAt(ae),this.charToByteMap_[this.byteToCharMap_[ae]]=ae,this.byteToCharMapWebSafe_[ae]=this.ENCODED_VALS_WEBSAFE.charAt(ae),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ae]]=ae,ae>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ae)]=ae,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ae)]=ae)}}},J=function(ae){const re=Z(ae);return K.encodeByteArray(re,!0)},L=function(ae){return J(ae).replace(/\./g,"")},H=function(ae){try{return K.decodeString(ae,!0)}catch(re){console.error("base64Decode failed: ",re)}return null};function k(ae){return R(void 0,ae)}function R(ae,re){if(!(re instanceof Object))return re;switch(re.constructor){case Date:return new Date(re.getTime());case Object:void 0===ae&&(ae={});break;case Array:ae=[];break;default:return re}for(const fe in re)!re.hasOwnProperty(fe)||!P(fe)||(ae[fe]=R(ae[fe],re[fe]));return ae}function P(ae){return"__proto__"!==ae}const Q=()=>{try{return function $(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ae=process.env.__FIREBASE_DEFAULTS__;return ae?JSON.parse(ae):void 0})()||(()=>{if(typeof document>"u")return;let ae;try{ae=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const re=ae&&H(ae[1]);return re&&JSON.parse(re)})()}catch(ae){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ae}`)}},ue=()=>{var ae;return null===(ae=Q())||void 0===ae?void 0:ae.config},ne=ae=>{var re;return null===(re=Q())||void 0===re?void 0:re[`_${ae}`]};class se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((re,fe)=>{this.resolve=re,this.reject=fe})}wrapCallback(re){return(fe,Ve)=>{fe?this.reject(fe):this.resolve(Ve),"function"==typeof re&&(this.promise.catch(()=>{}),1===re.length?re(fe):re(fe,Ve))}}}function oe(ae,re){if(ae.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ve=re||"demo-project",Se=ae.iat||0,nt=ae.sub||ae.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Rt=Object.assign({iss:`https://securetoken.google.com/${Ve}`,aud:Ve,iat:Se,exp:Se+3600,auth_time:Se,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},ae);return[L(JSON.stringify({alg:"none",type:"JWT"})),L(JSON.stringify(Rt)),""].join(".")}function be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function W(){var ae;const re=null===(ae=Q())||void 0===ae?void 0:ae.forceEnvironment;if("node"===re)return!0;if("browser"===re)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function ce(){const ae="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ae&&void 0!==ae.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){const ae=be();return ae.indexOf("MSIE ")>=0||ae.indexOf("Trident/")>=0}function we(){return!1}function Me(){return!W()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise((ae,re)=>{try{let fe=!0;const Ve="validate-browser-context-for-indexeddb-analytics-module",Se=self.indexedDB.open(Ve);Se.onsuccess=()=>{Se.result.close(),fe||self.indexedDB.deleteDatabase(Ve),ae(!0)},Se.onupgradeneeded=()=>{fe=!1},Se.onerror=()=>{var nt;re((null===(nt=Se.error)||void 0===nt?void 0:nt.message)||"")}}catch(fe){re(fe)}})}function Ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ce extends Error{constructor(re,fe,Ve){super(fe),this.code=re,this.customData=Ve,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bt.prototype.create)}}class bt{constructor(re,fe,Ve){this.service=re,this.serviceName=fe,this.errors=Ve}create(re,...fe){const Ve=fe[0]||{},Se=`${this.service}/${re}`,nt=this.errors[re],Rt=nt?function et(ae,re){return ae.replace(Pt,(fe,Ve)=>{const Se=re[Ve];return null!=Se?String(Se):`<${Ve}?>`})}(nt,Ve):"Error";return new Ce(Se,`${this.serviceName}: ${Rt} (${Se}).`,Ve)}}const Pt=/\{\$([^}]+)}/g;function We(ae){return JSON.parse(ae)}function St(ae){return JSON.stringify(ae)}const hn=function(ae){let re={},fe={},Ve={},Se="";try{const nt=ae.split(".");re=We(H(nt[0])||""),fe=We(H(nt[1])||""),Se=nt[2],Ve=fe.d||{},delete fe.d}catch{}return{header:re,claims:fe,data:Ve,signature:Se}},tn=function(ae){const fe=hn(ae).claims;return!!fe&&"object"==typeof fe&&fe.hasOwnProperty("iat")},En=function(ae){const re=hn(ae).claims;return"object"==typeof re&&!0===re.admin};function ii(ae,re){return Object.prototype.hasOwnProperty.call(ae,re)}function ur(ae,re){if(Object.prototype.hasOwnProperty.call(ae,re))return ae[re]}function Xn(ae){for(const re in ae)if(Object.prototype.hasOwnProperty.call(ae,re))return!1;return!0}function qr(ae,re,fe){const Ve={};for(const Se in ae)Object.prototype.hasOwnProperty.call(ae,Se)&&(Ve[Se]=re.call(fe,ae[Se],Se,ae));return Ve}function gn(ae,re){if(ae===re)return!0;const fe=Object.keys(ae),Ve=Object.keys(re);for(const Se of fe){if(!Ve.includes(Se))return!1;const nt=ae[Se],Rt=re[Se];if(Jn(nt)&&Jn(Rt)){if(!gn(nt,Rt))return!1}else if(nt!==Rt)return!1}for(const Se of Ve)if(!fe.includes(Se))return!1;return!0}function Jn(ae){return null!==ae&&"object"==typeof ae}function On(ae){const re=[];for(const[fe,Ve]of Object.entries(ae))Array.isArray(Ve)?Ve.forEach(Se=>{re.push(encodeURIComponent(fe)+"="+encodeURIComponent(Se))}):re.push(encodeURIComponent(fe)+"="+encodeURIComponent(Ve));return re.length?"&"+re.join("&"):""}function Gn(ae){const re={};return ae.replace(/^\?/,"").split("&").forEach(Ve=>{if(Ve){const[Se,nt]=Ve.split("=");re[decodeURIComponent(Se)]=decodeURIComponent(nt)}}),re}function In(ae){const re=ae.indexOf("?");if(!re)return"";const fe=ae.indexOf("#",re);return ae.substring(re,fe>0?fe:void 0)}class lr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let re=1;re<this.blockSize;++re)this.pad_[re]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(re,fe){fe||(fe=0);const Ve=this.W_;if("string"==typeof re)for(let Kt=0;Kt<16;Kt++)Ve[Kt]=re.charCodeAt(fe)<<24|re.charCodeAt(fe+1)<<16|re.charCodeAt(fe+2)<<8|re.charCodeAt(fe+3),fe+=4;else for(let Kt=0;Kt<16;Kt++)Ve[Kt]=re[fe]<<24|re[fe+1]<<16|re[fe+2]<<8|re[fe+3],fe+=4;for(let Kt=16;Kt<80;Kt++){const cr=Ve[Kt-3]^Ve[Kt-8]^Ve[Kt-14]^Ve[Kt-16];Ve[Kt]=4294967295&(cr<<1|cr>>>31)}let Dt,Er,Se=this.chain_[0],nt=this.chain_[1],Rt=this.chain_[2],Qt=this.chain_[3],Sn=this.chain_[4];for(let Kt=0;Kt<80;Kt++){Kt<40?Kt<20?(Dt=Qt^nt&(Rt^Qt),Er=1518500249):(Dt=nt^Rt^Qt,Er=1859775393):Kt<60?(Dt=nt&Rt|Qt&(nt|Rt),Er=2400959708):(Dt=nt^Rt^Qt,Er=3395469782);const cr=(Se<<5|Se>>>27)+Dt+Sn+Er+Ve[Kt]&4294967295;Sn=Qt,Qt=Rt,Rt=4294967295&(nt<<30|nt>>>2),nt=Se,Se=cr}this.chain_[0]=this.chain_[0]+Se&4294967295,this.chain_[1]=this.chain_[1]+nt&4294967295,this.chain_[2]=this.chain_[2]+Rt&4294967295,this.chain_[3]=this.chain_[3]+Qt&4294967295,this.chain_[4]=this.chain_[4]+Sn&4294967295}update(re,fe){if(null==re)return;void 0===fe&&(fe=re.length);const Ve=fe-this.blockSize;let Se=0;const nt=this.buf_;let Rt=this.inbuf_;for(;Se<fe;){if(0===Rt)for(;Se<=Ve;)this.compress_(re,Se),Se+=this.blockSize;if("string"==typeof re){for(;Se<fe;)if(nt[Rt]=re.charCodeAt(Se),++Rt,++Se,Rt===this.blockSize){this.compress_(nt),Rt=0;break}}else for(;Se<fe;)if(nt[Rt]=re[Se],++Rt,++Se,Rt===this.blockSize){this.compress_(nt),Rt=0;break}}this.inbuf_=Rt,this.total_+=fe}digest(){const re=[];let fe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Se=this.blockSize-1;Se>=56;Se--)this.buf_[Se]=255&fe,fe/=256;this.compress_(this.buf_);let Ve=0;for(let Se=0;Se<5;Se++)for(let nt=24;nt>=0;nt-=8)re[Ve]=this.chain_[Se]>>nt&255,++Ve;return re}}function Pr(ae,re){const fe=new Tt(ae,re);return fe.subscribe.bind(fe)}class Tt{constructor(re,fe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=fe,this.task.then(()=>{re(this)}).catch(Ve=>{this.error(Ve)})}next(re){this.forEachObserver(fe=>{fe.next(re)})}error(re){this.forEachObserver(fe=>{fe.error(re)}),this.close(re)}complete(){this.forEachObserver(re=>{re.complete()}),this.close()}subscribe(re,fe,Ve){let Se;if(void 0===re&&void 0===fe&&void 0===Ve)throw new Error("Missing Observer.");Se=function xt(ae,re){if("object"!=typeof ae||null===ae)return!1;for(const fe of re)if(fe in ae&&"function"==typeof ae[fe])return!0;return!1}(re,["next","error","complete"])?re:{next:re,error:fe,complete:Ve},void 0===Se.next&&(Se.next=Ei),void 0===Se.error&&(Se.error=Ei),void 0===Se.complete&&(Se.complete=Ei);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Se.error(this.finalError):Se.complete()}catch{}}),this.observers.push(Se),nt}unsubscribeOne(re){void 0===this.observers||void 0===this.observers[re]||(delete this.observers[re],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(re){if(!this.finalized)for(let fe=0;fe<this.observers.length;fe++)this.sendOne(fe,re)}sendOne(re,fe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[re])try{fe(this.observers[re])}catch(Ve){typeof console<"u"&&console.error&&console.error(Ve)}})}close(re){this.finalized||(this.finalized=!0,void 0!==re&&(this.finalError=re),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ei(){}const mn=function(ae,re,fe,Ve){let Se;if(Ve<re?Se="at least "+re:Ve>fe&&(Se=0===fe?"none":"no more than "+fe),Se)throw new Error(ae+" failed: Was called with "+Ve+(1===Ve?" argument.":" arguments.")+" Expects "+Se+".")};function _n(ae,re){return`${ae} failed: ${re} argument `}function er(ae,re,fe,Ve){if((!Ve||fe)&&"function"!=typeof fe)throw new Error(_n(ae,re)+"must be a valid function.")}function ms(ae,re,fe,Ve){if((!Ve||fe)&&("object"!=typeof fe||null===fe))throw new Error(_n(ae,re)+"must be a valid context object.")}const cn=function(ae){const re=[];let fe=0;for(let Ve=0;Ve<ae.length;Ve++){let Se=ae.charCodeAt(Ve);if(Se>=55296&&Se<=56319){const nt=Se-55296;Ve++,O(Ve<ae.length,"Surrogate pair missing trail surrogate."),Se=65536+(nt<<10)+(ae.charCodeAt(Ve)-56320)}Se<128?re[fe++]=Se:Se<2048?(re[fe++]=Se>>6|192,re[fe++]=63&Se|128):Se<65536?(re[fe++]=Se>>12|224,re[fe++]=Se>>6&63|128,re[fe++]=63&Se|128):(re[fe++]=Se>>18|240,re[fe++]=Se>>12&63|128,re[fe++]=Se>>6&63|128,re[fe++]=63&Se|128)}return re},Ii=function(ae){let re=0;for(let fe=0;fe<ae.length;fe++){const Ve=ae.charCodeAt(fe);Ve<128?re++:Ve<2048?re+=2:Ve>=55296&&Ve<=56319?(re+=4,fe++):re+=3}return re};function st(ae,re=1e3,fe=2){const Ve=re*Math.pow(fe,ae),Se=Math.round(.5*Ve*(Math.random()-.5)*2);return Math.min(144e5,Ve+Se)}function Vt(ae){return ae&&ae._delegate?ae._delegate:ae}},5327:(Ue,Ie,M)=>{"use strict";var h=M(4650);let O=null;function N(){return O}class ie{}const K=new h.OlP("DocumentToken");let J=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function L(){return(0,h.LFG)(k)}()},providedIn:"platform"}),n})();const H=new h.OlP("Location Initialized");let k=(()=>{class n extends J{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){R()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){R()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(K))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function P(){return new k((0,h.LFG)(K))}()},providedIn:"platform"}),n})();function R(){return!!window.history.pushState}function $(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function q(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function te(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(j)},providedIn:"root"}),n})();const Q=new h.OlP("appBaseHref");let j=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(K).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+te(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+te(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+te(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J),h.LFG(Q,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=$(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+te(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+te(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J),h.LFG(Q,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ue=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function be(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(q(oe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+te(r))}normalize(t){return n.stripTrailingSlash(function se(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,oe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=te,n.joinWithSlash=$,n.stripTrailingSlash=q,n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ne(){return new ue((0,h.LFG)(ge))}()},providedIn:"root"}),n})();function oe(n){return n.replace(/\/index.html$/,"")}const Ci=/\s+/,it=[];let Bt=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=it,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ci):it}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ci):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ci).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class nr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new nr(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),Ln(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ln(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ln(n,e){n.context.$implicit=e.item}let Vs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Wl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Wl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class zt{constructor(){this.$implicit=null,this.ngIf=null}}function Wl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let Ql=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function xu(n){return"server"===n}let $o=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Tu((0,h.LFG)(K),window)}),n})();class Tu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ho(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Go(this.window.history)||Go(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Go(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Uu extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class es extends Uu{static makeCurrent(){!function Z(n){O||(O=n)}(new es)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function tp(){return yo=yo||document.querySelector("base"),yo?yo.getAttribute("href"):null}();return null==t?null:function Ha(n){Is=Is||document.createElement("a"),Is.setAttribute("href",n);const e=Is.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){yo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Fr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Is,yo=null;const hi=new h.OlP("TRANSITION_ID"),Qd=[{provide:h.ip1,useFactory:function dc(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[hi,K,h.zs3],multi:!0}];let Xd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Vu=new h.OlP("EventManagerPlugins");let wo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vu),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class hc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Un=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),$s=(()=>{class n extends Un{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Yo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Yo))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(K))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Yo(n){N().remove(n)}const Cs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qo=/%COMP%/g;function zs(n,e){return e.flat(100).map(t=>t.replace(Qo,n))}function Xo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Jo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ga(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Io(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case h.ifc.ShadowDom:return new $u(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=zs(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wo),h.LFG($s),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ga{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Cs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Eo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Eo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Cs[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Cs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Xo(r)):this.eventManager.addEventListener(e,t,Xo(r))}}function Eo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Io extends Ga{constructor(e,t,r,i){super(e),this.component=r;const a=zs(i+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function Gs(n){return"_ngcontent-%COMP%".replace(Qo,n)}(i+"-"+r.id),this.hostAttr=function $a(n){return"_nghost-%COMP%".replace(Qo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class $u extends Ga{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=zs(i.id,i.styles);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Gu=(()=>{class n extends hc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(K))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const zu=["alt","control","meta","shift"],Jd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Co={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wu=(()=>{class n extends hc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),zu.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=Jd[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),zu.forEach(l=>{l!==i&&(0,Co[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(K))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const dm=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function gc(){es.makeCurrent()},multi:!0},{provide:K,useFactory:function ns(){return(0,h.RDi)(document),document},deps:[]}]),_c=new h.OlP(""),Ku=[{provide:h.rWj,useClass:class vo{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],yc=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function mc(){return new h.qLn},deps:[]},{provide:Vu,useClass:Gu,multi:!0,deps:[K,h.R0b,h.Lbi]},{provide:Vu,useClass:Wu,multi:!0,deps:[K]},{provide:Jo,useClass:Jo,deps:[wo,$s,h.AFp]},{provide:h.FYo,useExisting:Jo},{provide:Un,useExisting:$s},{provide:$s,useClass:$s,deps:[K]},{provide:wo,useClass:wo,deps:[Vu,h.R0b]},{provide:class jd{},useClass:Xd,deps:[]},[]];let eh=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:hi,useExisting:h.AFp},Qd]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_c,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...yc,...Ku],imports:[Ql,h.hGG]}),n})(),vc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(K))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function za(){return new vc((0,h.LFG)(K))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Zt=M(8996),Br=M(9751);const{isArray:uh}=Array,{getPrototypeOf:sp,prototype:xs,keys:Cc}=Object;function ss(n){if(1===n.length){const e=n[0];if(uh(e))return{args:e,keys:null};if(function op(n){return n&&"object"==typeof n&&sp(n)===xs}(e)){const t=Cc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var na=M(8421),Hi=M(7669),Mn=M(5403),gt=M(4004);const{isArray:tl}=Array;function D(n){return(0,gt.U)(e=>function x(n,e){return tl(e)?n(...e):n(e)}(n,e))}function F(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let ye=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Re=(()=>{class n extends ye{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ze=new h.OlP("NgValueAccessor"),ht={provide:ze,useExisting:(0,h.Gpc)(()=>br),multi:!0},Ut=new h.OlP("CompositionEventMode");let br=(()=>{class n extends ye{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jt(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Ut,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[h._Bn([ht]),h.qOj]}),n})();const Hn=new h.OlP("NgValidators"),pr=new h.OlP("NgAsyncValidators");function up(n){return function Di(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function bo(n){return null}function py(n){return null!=n}function gy(n){return(0,h.QGY)(n)?(0,Zt.D)(n):n}function lh(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function my(n,e){return e.map(t=>t(n))}function _y(n){return n.map(e=>function ZE(n){return!n.validate}(e)?e:t=>e.validate(t))}function gm(n){return null!=n?function yy(n){if(!n)return null;const e=n.filter(py);return 0==e.length?null:function(t){return lh(my(t,e))}}(_y(n)):null}function dh(n){return null!=n?function ch(n){if(!n)return null;const e=n.filter(py);return 0==e.length?null:function(t){return function X(...n){const e=(0,Hi.jO)(n),{args:t,keys:r}=ss(n),i=new Br.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let _=l,w=l;for(let C=0;C<l;C++){let S=!1;(0,na.Xf)(t[C]).subscribe((0,Mn.x)(a,B=>{S||(S=!0,w--),f[C]=B},()=>_--,void 0,()=>{(!_||!S)&&(w||a.next(r?F(r,f):f),a.complete())}))}});return e?i.pipe(D(e)):i}(my(t,e).map(gy)).pipe((0,gt.U)(lh))}}(_y(n)):null}function hh(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fh(n){return n?Array.isArray(n)?n:[n]:[]}function Ti(n,e){return Array.isArray(n)?n.includes(e):n===e}function mm(n,e){const t=fh(e);return fh(n).forEach(i=>{Ti(t,i)||t.push(i)}),t}function _m(n,e){return fh(e).filter(t=>!Ti(n,t))}class ym{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Jr extends ym{get formDirective(){return null}get path(){return null}}class os extends ym{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vm{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bc=(()=>{class n extends vm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(os,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Em=(()=>{class n extends vm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Jr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const Za="VALID",mh="INVALID",as="PENDING",Tc="DISABLED";function mp(n){return(xo(n)?n.validators:n)||null}function Ac(n,e){return(xo(e)?e.asyncValidators:n)||null}function xo(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class yp{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Za}get invalid(){return this.status===mh}get pending(){return this.status==as}get disabled(){return this.status===Tc}get enabled(){return this.status!==Tc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_m(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_m(e,this._rawAsyncValidators))}hasValidator(e){return Ti(this._rawValidators,e)}hasAsyncValidator(e){return Ti(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=as,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Za,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Za||this.status===as)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tc:Za}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=as,this._hasOwnPendingAsyncValidator=!0;const t=gy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Tc:this.errors?mh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(as)?as:this._anyControlsHaveStatus(mh)?mh:Za}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xo(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Sc(n){return Array.isArray(n)?gm(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function bm(n){return Array.isArray(n)?dh(n):n||null}(this._rawAsyncValidators)}}class Ya extends yp{constructor(e,t,r){super(mp(t),Ac(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function _p(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function _h(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const rl=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>yh}),yh="always";function Qa(n,e,t=yh){wp(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Tm(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ja(n,e)})}(n,e),function Sm(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Xa(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ja(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Dm(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function il(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wp(n,e){const t=function hp(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(hh(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function fp(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(hh(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();il(e._rawValidators,i),il(e._rawAsyncValidators,i)}function Ja(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const tu={provide:Jr,useExisting:(0,h.Gpc)(()=>ua)},aa=(()=>Promise.resolve())();let ua=(()=>{class n extends Jr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new Ya({},gm(t),dh(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){aa.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Qa(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){aa.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){aa.then(()=>{const r=this._findContainer(t.path),i=new Ya({});(function Ep(n,e){wp(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){aa.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){aa.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Nc(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Hn,10),h.Y36(pr,10),h.Y36(rl,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([tu]),h.qOj]}),n})();function wh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function kc(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Mm=class extends yp{constructor(e=null,t,r){super(mp(t),Ac(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xo(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=kc(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wh(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wh(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){kc(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Om={provide:os,useExisting:(0,h.Gpc)(()=>ol)},Eh=(()=>Promise.resolve())();let ol=(()=>{class n extends os{constructor(t,r,i,a,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new Mm,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function oa(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===br?t=a:function bp(n){return Object.getPrototypeOf(n.constructor)===Re}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function eu(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qa(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Eh.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);Eh.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function sa(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Jr,9),h.Y36(Hn,10),h.Y36(pr,10),h.Y36(ze,10),h.Y36(h.sBO,8),h.Y36(rl,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Om]),h.qOj,h.TTD]}),n})(),Ks=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Pc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Ts=(()=>{class n{constructor(){this._validator=bo}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bo,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const kD={provide:Hn,useExisting:(0,h.Gpc)(()=>Sp),multi:!0};let Sp=(()=>{class n extends Ts{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>up}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([kD]),h.qOj]}),n})(),BD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Pc]}),n})(),iI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:rl,useValue:t.callSetDisabledState??yh}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[BD]}),n})();function Et(...n){const e=(0,Hi.yG)(n);return(0,Zt.D)(n,e)}var ll=M(7579);class Ys extends ll.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Dh=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Rp=M(4671),My=M(9672);function oI(...n){const e=(0,Hi.yG)(n),t=(0,Hi.jO)(n),{args:r,keys:i}=ss(n);if(0===r.length)return(0,Zt.D)([],e);const a=new Br.y(function Ny(n,e,t=Rp.y){return r=>{ky(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let _=0;_<i;_++)ky(e,()=>{const w=(0,Zt.D)(n[_],e);let C=!1;w.subscribe((0,Mn.x)(r,S=>{a[_]=S,C||(C=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>F(i,l):Rp.y));return t?a.pipe(D(t)):a}function ky(n,e,t){n?(0,My.f)(t,n,e):e()}var Th=M(8189);function Py(...n){return function Lc(){return(0,Th.J)(1)}()((0,Zt.D)(n,(0,Hi.yG)(n)))}function $m(n){return new Br.y(e=>{(0,na.Xf)(n()).subscribe(e)})}var Gm=M(9635),Oy=M(576);function Uc(n,e){const t=(0,Oy.m)(n)?n:()=>n,r=i=>i.error(t());return new Br.y(e?i=>e.schedule(r,0,i):r)}var Do=M(515),cl=M(727),jr=M(4482);function Mp(){return(0,jr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Mn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class aI extends Br.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new cl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Mn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=cl.w0.EMPTY)}return e}refCount(){return Mp()(this)}}function Tr(n,e){return(0,jr.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,Mn.x)(r,_=>{i?.unsubscribe();let w=0;const C=a++;(0,na.Xf)(n(_,C)).subscribe(i=(0,Mn.x)(r,S=>r.next(e?e(_,S,C,w++):S),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function Sh(n){return n<=0?()=>Do.E:(0,jr.e)((e,t)=>{let r=0;e.subscribe((0,Mn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ru(...n){const e=(0,Hi.yG)(n);return(0,jr.e)((t,r)=>{(e?Py(n,t,e):Py(n,t)).subscribe(r)})}function To(n,e){return(0,jr.e)((t,r)=>{let i=0;t.subscribe((0,Mn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var ji=M(5577);function zm(n){return(0,jr.e)((e,t)=>{let r=!1;e.subscribe((0,Mn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wm(n=zD){return(0,jr.e)((e,t)=>{let r=!1;e.subscribe((0,Mn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zD(){return new Dh}function la(n,e){const t=arguments.length>=2;return r=>r.pipe(n?To((i,a)=>n(i,a,r)):Rp.y,Sh(1),t?zm(e):Wm(()=>new Dh))}function Vc(n,e){return(0,Oy.m)(e)?(0,ji.z)(n,e,1):(0,ji.z)(n,1)}var mi=M(8505);function Bc(n){return(0,jr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Mn.x)(t,void 0,void 0,l=>{a=(0,na.Xf)(n(l,Bc(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function WD(n,e,t,r,i){return(a,l)=>{let f=t,_=e,w=0;a.subscribe((0,Mn.x)(l,C=>{const S=w++;_=f?n(_,C,S):(f=!0,C),r&&l.next(_)},i&&(()=>{f&&l.next(_),l.complete()})))}}function So(n,e){return(0,jr.e)(WD(n,e,arguments.length>=2,!0))}function Fy(n){return n<=0?()=>Do.E:(0,jr.e)((e,t)=>{let r=[];e.subscribe((0,Mn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Hc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?To((i,a)=>n(i,a,r)):Rp.y,Fy(1),t?zm(e):Wm(()=>new Dh))}function qm(n){return(0,jr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Yt="primary",kp=Symbol("RouteTitle");class KD{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jc(n){return new KD(n)}function uI(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!lI(n[i],e[i]))return!1;return!0}function lI(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Km(n){return Array.prototype.concat.apply([],n)}function Ah(n){return n.length>0?n[n.length-1]:null}function _i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function dl(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Zt.D)(Promise.resolve(n)):Et(n)}const Zm=!1,ZD={exact:function ca(n,e,t){if(!$c(n.segments,e.segments)||!Uy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ca(n.children[r],e.children[r],t))return!1;return!0},subset:hI},cI={exact:function Rh(n,e){return Qs(n,e)},subset:function YD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lI(n[t],e[t]))},ignored:()=>!0};function dI(n,e,t){return ZD[t.paths](n.root,e.root,t.matrixParams)&&cI[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function hI(n,e,t){return QD(n,e,e.segments,t)}function QD(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!$c(i,t)||e.hasChildren()||!Uy(i,t,r))}if(n.segments.length===t.length){if(!$c(n.segments,t)||!Uy(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!hI(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!($c(n.segments,i)&&Uy(n.segments,i,r)&&n.children[Yt])&&QD(n.children[Yt],e,a,r)}}function Uy(n,e,t){return e.every((r,i)=>cI[t](n[i].parameters,r.parameters))}class hl{constructor(e=new sn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jc(this.queryParams)),this._queryParamMap}toString(){return Ao.serialize(this)}}class sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,_i(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ym(this)}}class Mh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jc(this.parameters)),this._parameterMap}toString(){return _I(this)}}function $c(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Pp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Vy},providedIn:"root"}),n})();class Vy{parse(e){const t=new nT(e);return new hl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Nh(e.root,!0)}`,r=function qt(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Qm(t)}=${Qm(i)}`).join("&"):`${Qm(t)}=${Qm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function XD(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ao=new Vy;function Ym(n){return n.segments.map(e=>_I(e)).join("/")}function Nh(n,e){if(!n.hasChildren())return Ym(n);if(e){const t=n.children[Yt]?Nh(n.children[Yt],!1):"",r=[];return _i(n.children,(i,a)=>{a!==Yt&&r.push(`${a}:${Nh(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function pI(n,e){let t=[];return _i(n.children,(r,i)=>{i===Yt&&(t=t.concat(e(r,i)))}),_i(n.children,(r,i)=>{i!==Yt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Yt?[Nh(n.children[Yt],!1)]:[`${i}:${Nh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${Ym(n)}/${t[0]}`:`${Ym(n)}/(${t.join("//")})`}}function gI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qm(n){return gI(n).replace(/%3B/gi,";")}function By(n){return gI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Op(n){return decodeURIComponent(n)}function mI(n){return Op(n.replace(/\+/g,"%20"))}function _I(n){return`${By(n.path)}${function JD(n){return Object.keys(n).map(e=>`;${By(e)}=${By(n[e])}`).join("")}(n.parameters)}`}const yI=/^[^\/()?;=#]+/;function Fp(n){const e=n.match(yI);return e?e[0]:""}const vI=/^[^=?&#]+/,tT=/^[^&#]+/;class nT{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Yt]=new sn(e,t)),r}parseSegment(){const e=Fp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,Zm);return this.capture(e),new Mh(Op(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Fp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Fp(this.remaining);i&&(r=i,this.capture(r))}e[Op(t)]=Op(r)}parseQueryParam(e){const t=function eT(n){const e=n.match(vI);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function wI(n){const e=n.match(tT);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=mI(t),a=mI(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Fp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,Zm);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Yt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Yt]:new sn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,Zm)}}function Xm(n){return n.segments.length>0?new sn([],{[Yt]:n}):n}function Jm(n){const e={};for(const r of Object.keys(n.children)){const a=Jm(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function rT(n){if(1===n.numberOfChildren&&n.children[Yt]){const e=n.children[Yt];return new sn(n.segments.concat(e.segments),e.children)}return n}(new sn(n.segments,e))}function kh(n){return n instanceof hl}function Hy(n,e,t,r,i){if(0===t.length)return Up(e.root,e.root,e.root,r,i);const a=function EI(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new aT(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return _i(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new aT(t,e,r)}(t);return a.toRoot()?Up(e.root,e.root,new sn([],{}),r,i):function l(_){const w=function uT(n,e,t,r){if(n.isAbsolute)return new Wc(e.root,!0,0);if(-1===r)return new Wc(t,t===e.root,0);return function qc(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new Wc(r,!1,i-a)}(t,r+(zc(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),C=w.processChildren?iu(w.segmentGroup,w.index,a.commands):t0(w.segmentGroup,w.index,a.commands);return Up(e.root,w.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function zc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Lp(n){return"object"==typeof n&&null!=n&&n.outlets}function Up(n,e,t,r,i){let l,a={};r&&_i(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(C=>`${C}`):`${_}`}),l=n===e?t:oT(n,e,t);const f=Xm(Jm(l));return new hl(f,a,i)}function oT(n,e,t){const r={};return _i(n.children,(i,a)=>{r[a]=i===e?t:oT(i,e,t)}),new sn(n.segments,r)}class aT{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zc(r[0]))throw new h.vHH(4003,!1);const i=r.find(Lp);if(i&&i!==Ah(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function t0(n,e,t){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return iu(n,e,t);const r=function cT(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(Lp(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!CI(_,w,l))return a;r+=2}else{if(!CI(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new sn(n.segments.slice(0,r.pathIndex),{});return a.children[Yt]=new sn(n.segments.slice(r.pathIndex),n.children),iu(a,0,i)}return r.match&&0===i.length?new sn(n.segments,{}):r.match&&!n.hasChildren()?n0(n,e,t):r.match?iu(n,0,i):n0(n,e,t)}function iu(n,e,t){if(0===t.length)return new sn(n.segments,{});{const r=function lT(n){return Lp(n[0])?n[0].outlets:{[Yt]:n}}(t),i={};return!r[Yt]&&n.children[Yt]&&1===n.numberOfChildren&&0===n.children[Yt].segments.length?iu(n.children[Yt],e,t):(_i(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=t0(n.children[l],e,a))}),_i(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new sn(n.segments,i))}}function n0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Lp(a)){const _=dT(a.outlets);return new sn(r,_)}if(0===i&&zc(t[0])){r.push(new Mh(n.segments[e].path,II(t[0]))),i++;continue}const l=Lp(a)?a.outlets[Yt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&zc(f)?(r.push(new Mh(l,II(f))),i+=2):(r.push(new Mh(l,{})),i++)}return new sn(r,{})}function dT(n){const e={};return _i(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=n0(new sn([],{}),0,t))}),e}function II(n){const e={};return _i(n,(t,r)=>e[r]=`${t}`),e}function CI(n,e,t){return n==t.path&&Qs(e,t.parameters)}const Vp="imperative";class da{constructor(e,t){this.id=e,this.url=t}}class r0 extends da{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Kc extends da{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bp extends da{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jy extends da{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class s0 extends da{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tN extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $y extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hT extends da{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nN extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ph extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bI{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fT{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xI{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gT{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let zy=(()=>{class n{createUrlTree(t,r,i,a,l,f){return Hy(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),DI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return zy.\u0275fac(e)},providedIn:"root"}),n})();class u0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Hp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Hp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jp(e,this._root).map(t=>t.value)}}function Hp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Hp(n,t);if(r)return r}return null}function jp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jp(n,t);if(r.length)return r.unshift(e),r}return[]}class ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class TI extends u0{constructor(e,t){super(e),this.snapshot=t,$i(this,e)}toString(){return this.snapshot.toString()}}function SI(n,e){const t=function AI(n,e){const l=new l0([],{},{},"",{},Yt,e,null,n.root,-1,{});return new MI("",new ha(l,[]))}(n,e),r=new Ys([new Mh("",{})]),i=new Ys({}),a=new Ys({}),l=new Ys({}),f=new Ys(""),_=new Oh(r,i,l,f,a,Yt,e,t.root);return _.snapshot=t.root,new TI(new ha(_,[]),t)}class Oh{constructor(e,t,r,i,a,l,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,gt.U)(w=>w[kp]))??Et(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>jc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>jc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function RI(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class l0{get title(){return this.data?.[kp]}constructor(e,t,r,i,a,l,f,_,w,C,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class MI extends u0{constructor(e,t){super(t),this.url=e,$i(this,t)}toString(){return Ky(this._root)}}function $i(n,e){e.value._routerState=n,e.children.forEach(t=>$i(n,t))}function Ky(n){const e=n.children.length>0?` { ${n.children.map(Ky).join(", ")} } `:"";return`${n.value}${e}`}function Zy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Qs(e.params,t.params)||n.params.next(t.params),function Ly(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Qs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function NI(n,e){const t=Qs(n.params,e.params)&&function fI(n,e){return $c(n,e)&&n.every((t,r)=>Qs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||NI(n.parent,e.parent))}function Fh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function mT(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Fh(n,r,i);return Fh(n,r)})}(n,e,t);return new ha(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>Fh(n,f)),l}}const r=function _T(n){return new Oh(new Ys(n.url),new Ys(n.params),new Ys(n.queryParams),new Ys(n.fragment),new Ys(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Fh(n,a));return new ha(r,i)}}const Qy="ngNavigationCancelingError";function Xy(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=kh(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kI(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function kI(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Qy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function PI(n){return c0(n)&&kh(n.url)}function c0(n){return n&&n[Qy]}class yT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new $p,this.attachRef=null}}let $p=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new yT,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const d0=!1;let Jy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Yt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)($p),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,d0);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,d0);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,d0);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,d0);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new vT(t,f,i.injector);if(r&&function fa(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class vT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oh?this.route:e===$p?this.childContexts:this.parent.get(e,t)}}let Gp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Jy],encapsulation:2}),n})();function OI(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Lh(n){const e=n.children&&n.children.map(Lh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=Gp),t}function ls(n){return n.outlet||Yt}function zp(n,e){const t=n.filter(r=>ls(r)===e);return t.push(...n.filter(r=>ls(r)!==e)),t}function h0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class oN{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Zy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=fl(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),_i(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=fl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=fl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=fl(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new o0(a.value.snapshot))}),e.children.length&&this.forwardEvent(new pT(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Zy(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),Zy(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=h0(i.snapshot),_=f?.get(h._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class rv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Wp{constructor(e,t){this.component=e,this.route=t}}function FI(n,e,t){const r=n._root;return Ss(r,e?e._root:null,t,[r.value])}function pl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Ss(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=fl(e);return n.children.forEach(l=>{(function f0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function p0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!$c(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$c(n.url,e.url)||!Qs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!NI(n,e)||!Qs(n.queryParams,e.queryParams);default:return!NI(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new rv(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Ss(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Wp(f.outlet.component,l))}else l&&su(e,f,i),i.canActivateChecks.push(new rv(r)),Ss(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),_i(a,(l,f)=>su(l,t.getContext(f),i)),i}function su(n,e,t){const r=fl(n),i=n.value;_i(r,(a,l)=>{su(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Wp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function qp(n){return"function"==typeof n}function iv(n){return n instanceof Dh||"EmptyError"===n?.name}const g0=Symbol("INITIAL_VALUE");function Uh(){return Tr(n=>oI(n.map(e=>e.pipe(Sh(1),ru(g0)))).pipe((0,gt.U)(e=>{for(const t of e)if(!0!==t){if(t===g0)return g0;if(!1===t||t instanceof hl)return t}return!0}),To(e=>e!==g0),Sh(1)))}function HI(n){return(0,Gm.z)((0,mi.b)(e=>{if(kh(e))throw Xy(0,e)}),(0,gt.U)(e=>!0===e))}const av={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jI(n,e,t,r,i){const a=uv(n,e,t);return a.matched?function kT(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Et(i.map(l=>{const f=pl(l,n);return dl(function xT(n){return n&&qp(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Uh(),HI()):Et(!0)}(r=OI(e,r),e,t).pipe((0,gt.U)(l=>!0===l?a:{...av})):Et(a)}function uv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...av}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||uI)(t,n,e);if(!i)return{...av};const a={};_i(i.posParams,(f,_)=>{a[_]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Zp(n,e,t,r){if(t.length>0&&function aN(n,e,t){return t.some(r=>Yc(n,e,r)&&ls(r)!==Yt)}(n,t,r)){const a=new sn(e,function PT(n,e,t,r){const i={};i[Yt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ls(a)!==Yt){const l=new sn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ls(a)]=l}return i}(n,e,r,new sn(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function GI(n,e,t){return t.some(r=>Yc(n,e,r))}(n,t,r)){const a=new sn(n.segments,function $I(n,e,t,r,i){const a={};for(const l of r)if(Yc(n,t,l)&&!i[ls(l)]){const f=new sn([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[ls(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new sn(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Yc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gl(n,e,t,r){return!!(ls(n)===r||r!==Yt&&Yc(e,t,n))&&("**"===n.path||uv(e,n,t).matched)}function OT(n,e,t){return 0===e.length&&!n.children[t]}const Qc=!1;class m0{constructor(e){this.segmentGroup=e||null}}class zI{constructor(e){this.urlTree=e}}function Xc(n){return Uc(new m0(n))}function WI(n){return Uc(new zI(n))}class Jc{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Zp(this.urlTree.root,[],[],this.config).segmentGroup,t=new sn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Yt).pipe((0,gt.U)(a=>this.createUrlTree(Jm(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bc(a=>{if(a instanceof zI)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof m0?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Yt).pipe((0,gt.U)(i=>this.createUrlTree(Jm(i),e.queryParams,e.fragment))).pipe(Bc(i=>{throw i instanceof m0?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,Qc)}createUrlTree(e,t,r){const i=Xm(e);return new hl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(a=>new sn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Zt.D)(i).pipe(Vc(a=>{const l=r.children[a],f=zp(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,gt.U)(_=>({segment:_,outlet:a})))}),So((a,l)=>(a[l.outlet]=l.segment,a),{}),Hc())}expandSegment(e,t,r,i,a,l){return(0,Zt.D)(r).pipe(Vc(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Bc(w=>{if(w instanceof m0)return Et(null);throw w}))),la(f=>!!f),Bc((f,_)=>{if(iv(f))return OT(t,i,a)?Et(new sn([],{})):Xc(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return gl(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Xc(t):Xc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?WI(a):this.lineralizeSegments(r,a).pipe((0,ji.z)(l=>{const f=new sn(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:_,remainingSegments:w,positionalParamSegments:C}=uv(t,i,a);if(!f)return Xc(t);const S=this.applyRedirectCommands(_,i.redirectTo,C);return i.redirectTo.startsWith("/")?WI(S):this.lineralizeSegments(i,S).pipe((0,ji.z)(B=>this.expandSegment(e,t,r,B.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=OI(r,e),r.loadChildren?(r._loadedRoutes?Et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,gt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new sn(i,{})))):Et(new sn(i,{}))):jI(t,r,i,e).pipe(Tr(({matched:l,consumedSegments:f,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ji.z)(C=>{const S=C.injector??e,B=C.routes,{segmentGroup:ee,slicedSegments:le}=Zp(t,f,_,B),Oe=new sn(ee.segments,ee.children);if(0===le.length&&Oe.hasChildren())return this.expandChildren(S,B,Oe).pipe((0,gt.U)(ct=>new sn(f,ct)));if(0===B.length&&0===le.length)return Et(new sn(f,{}));const je=ls(r)===a;return this.expandSegment(S,Oe,B,le,je?Yt:a,!0).pipe((0,gt.U)(Ct=>new sn(f.concat(Ct.segments),Ct.children)))})):Xc(t)))}getChildConfig(e,t,r){return t.children?Et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Et({routes:t._loadedRoutes,injector:t._loadedInjector}):function NT(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Et(!0):Et(i.map(l=>{const f=pl(l,n);return dl(function VI(n){return n&&qp(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Uh(),HI())}(e,t,r).pipe((0,ji.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,mi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Yp(n){return Uc(kI(Qc,3))}())):Et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Et(r);if(i.numberOfChildren>1||!i.children[Yt])return Uc(new h.vHH(4e3,Qc));i=i.children[Yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new hl(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return _i(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return _i(t.children,(f,_)=>{l[_]=this.createSegmentGroup(e,f,r,i)}),new sn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,Qc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class lv{}class Hh{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=Zp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Yt).pipe((0,gt.U)(t=>{if(null===t)return null;const r=new l0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ha(r,t),a=new MI(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=qy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Zt.D)(Object.keys(r.children)).pipe(Vc(i=>{const a=r.children[i],l=zp(t,i);return this.processSegmentGroup(e,l,a,i)}),So((i,a)=>i&&a?(i.push(...a),i):null),function Np(n,e=!1){return(0,jr.e)((t,r)=>{let i=0;t.subscribe((0,Mn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),zm(null),Hc(),(0,gt.U)(i=>{if(null===i)return null;const a=ed(i);return function jh(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Zt.D)(t).pipe(Vc(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),la(l=>!!l),Bc(l=>{if(iv(l))return OT(r,i,a)?Et([]):Et(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!gl(t,r,i,a))return Et(null);let l;if("**"===t.path){const f=i.length>0?Ah(i).parameters:{},_=cv(r)+i.length;l=Et({snapshot:new l0(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dv(t),ls(t),t.component??t._loadedComponent??null,t,td(r),_,hv(t)),consumedSegments:[],remainingSegments:[]})}else l=jI(r,t,i,e).pipe((0,gt.U)(({matched:f,consumedSegments:_,remainingSegments:w,parameters:C})=>{if(!f)return null;const S=cv(r)+_.length;return{snapshot:new l0(_,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dv(t),ls(t),t.component??t._loadedComponent??null,t,td(r),S,hv(t)),consumedSegments:_,remainingSegments:w}}));return l.pipe(Tr(f=>{if(null===f)return Et(null);const{snapshot:_,consumedSegments:w,remainingSegments:C}=f;e=t._injector??e;const S=t._loadedInjector??e,B=function $h(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:ee,slicedSegments:le}=Zp(r,w,C,B.filter(je=>void 0===je.redirectTo));if(0===le.length&&ee.hasChildren())return this.processChildren(S,B,ee).pipe((0,gt.U)(je=>null===je?null:[new ha(_,je)]));if(0===B.length&&0===le.length)return Et([new ha(_,[])]);const Oe=ls(t)===a;return this.processSegment(S,B,ee,le,Oe?Yt:a).pipe((0,gt.U)(je=>null===je?null:[new ha(_,je)]))}))}}function Gh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ed(n){const e=[],t=new Set;for(const r of n){if(!Gh(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ed(r.children);e.push(new ha(r.value,i))}return e.filter(r=>!t.has(r))}function td(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function cv(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function dv(n){return n.data||{}}function hv(n){return n.resolve||{}}function XI(n){return"string"==typeof n.title||null===n.title}function y0(n){return Tr(e=>{const t=n(e);return t?(0,Zt.D)(t).pipe((0,gt.U)(()=>e)):Et(e)})}const ml=new h.OlP("ROUTES");let Qp=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=dl(t.loadComponent()).pipe((0,gt.U)(Xp),(0,mi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),qm(()=>{this.componentLoaders.delete(t)})),i=new aI(r,()=>new ll.x).pipe(Mp());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,C=!1;Array.isArray(f)?w=f:(_=f.create(t).injector,w=Km(_.get(ml,[],h.XFs.Self|h.XFs.Optional)));return{routes:w.map(Lh),injector:_}}),qm(()=>{this.childrenLoaders.delete(r)})),l=new aI(a,()=>new ll.x).pipe(Mp());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return dl(t()).pipe((0,gt.U)(Xp),(0,ji.z)(i=>i instanceof h.YKP||Array.isArray(i)?Et(i):(0,Zt.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Xp(n){return function VT(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Wh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ll.x,this.configLoader=(0,h.f3M)(Qp),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(Pp),this.rootContexts=(0,h.f3M)($p),this.navigationId=0,this.afterPreactivation=()=>Et(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new fT(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new bI(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ys({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Vp,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(To(r=>0!==r.id),(0,gt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Tr(r=>{let i=!1,a=!1;return Et(r).pipe((0,mi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Tr(l=>{const f=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new jy(l.id,t.serializeUrl(r.rawUrl),C,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Do.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return JI(l.source)&&(t.browserUrlTree=l.extractedUrl),Et(l).pipe(Tr(C=>{const S=this.transitions?.getValue();return this.events.next(new r0(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),S!==this.transitions?.getValue()?Do.E:Promise.resolve(C)}),function _0(n,e,t,r){return Tr(i=>function Ai(n,e,t,r,i){return new Jc(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,gt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,mi.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function qI(n,e,t,r,i){return(0,ji.z)(a=>function Bh(n,e,t,r,i,a,l="emptyOnly"){return new Hh(n,e,t,r,i,l,a).recognize().pipe(Tr(f=>null===f?function Vh(n){return new Br.y(e=>e.error(n))}(new lv):Et(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,gt.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,mi.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const B=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(B,C)}t.browserUrlTree=C.urlAfterRedirects}const S=new tN(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(S)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:S,source:B,restoredState:ee,extras:le}=l,Oe=new r0(C,this.urlSerializer.serialize(S),B,ee);this.events.next(Oe);const je=SI(S,this.rootComponentType).snapshot;return Et(r={...l,targetSnapshot:je,urlAfterRedirects:S,extras:{...le,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new jy(l.id,t.serializeUrl(r.extractedUrl),C,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Do.E}}),(0,mi.b)(l=>{const f=new $y(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,gt.U)(l=>r={...l,guards:FI(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function TT(n,e){return(0,ji.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Et({...t,guardsResult:!0}):function ST(n,e,t,r){return(0,Zt.D)(n).pipe((0,ji.z)(i=>function MT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Et(a.map(f=>{const _=h0(e)??i,w=pl(f,_);return dl(function Kp(n){return n&&qp(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(la())})).pipe(Uh()):Et(!0)}(i.component,i.route,t,e,r)),la(i=>!0!==i,!0))}(l,r,i,n).pipe((0,ji.z)(f=>f&&function UI(n){return"boolean"==typeof n}(f)?function AT(n,e,t,r){return(0,Zt.D)(e).pipe(Vc(i=>Py(function sv(n,e){return null!==n&&e&&e(new xI(n)),Et(!0)}(i.route.parent,r),function BI(n,e){return null!==n&&e&&e(new gT(n)),Et(!0)}(i.route,r),function ov(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function LI(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>$m(()=>Et(l.guards.map(_=>{const w=h0(l.node)??t,C=pl(_,w);return dl(function bT(n){return n&&qp(n.canActivateChild)}(C)?C.canActivateChild(r,n):w.runInContext(()=>C(r,n))).pipe(la())})).pipe(Uh())));return Et(a).pipe(Uh())}(n,i.path,t),function RT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Et(!0);const i=r.map(a=>$m(()=>{const l=h0(e)??t,f=pl(a,l);return dl(function CT(n){return n&&qp(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(la())}));return Et(i).pipe(Uh())}(n,i.route,t))),la(i=>!0!==i,!0))}(r,a,n,e):Et(f)),(0,gt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,mi.b)(l=>{if(r.guardsResult=l.guardsResult,kh(l.guardsResult))throw Xy(0,l.guardsResult);const f=new hT(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),To(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),y0(l=>{if(l.guards.canActivateChecks.length)return Et(l).pipe((0,mi.b)(f=>{const _=new nN(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),Tr(f=>{let _=!1;return Et(f).pipe(function KI(n,e){return(0,ji.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Et(t);let a=0;return(0,Zt.D)(i).pipe(Vc(l=>function ZI(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!XI(i)&&(a[kp]=i.title),function YI(n,e,t,r){const i=function QI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Et({});const a={};return(0,Zt.D)(i).pipe((0,ji.z)(l=>function LT(n,e,t,r){const i=h0(e)??r,a=pl(n,i);return dl(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(la(),(0,mi.b)(f=>{a[l]=f}))),Fy(1),function qD(n){return(0,gt.U)(()=>n)}(a),Bc(l=>iv(l)?Do.E:Uc(l)))}(a,n,e,r).pipe((0,gt.U)(l=>(n._resolvedData=l,n.data=qy(n,t).resolve,i&&XI(i)&&(n.data[kp]=i.title),null)))}(l.route,r,n,e)),(0,mi.b)(()=>a++),Fy(1),(0,ji.z)(l=>a===i.length?Et(t):Do.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,mi.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,mi.b)(f=>{const _=new Ph(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}))}),y0(l=>{const f=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,mi.b)(C=>{_.component=C}),(0,gt.U)(()=>{})));for(const C of _.children)w.push(...f(C));return w};return oI(f(l.targetSnapshot.root)).pipe(zm(),Sh(1))}),y0(()=>this.afterPreactivation()),(0,gt.U)(l=>{const f=function Yy(n,e,t){const r=Fh(n,e._root,t?t._root:void 0);return new TI(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,mi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new oN(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,mi.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Kc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),qm(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Bc(l=>{if(a=!0,c0(l)){PI(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new Bp(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),PI(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||JI(r.source)};t.scheduleNavigation(_,Vp,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new s0(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Do.E}))}))}cancelNavigationTransition(t,r,i){const a=new Bp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JI(n){return n!==Vp}let v0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Yt);return r}getResolvedTitleForRoute(t){return t.data[kp]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(pv)},providedIn:"root"}),n})(),pv=(()=>{class n extends v0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(gv)},providedIn:"root"}),n})();class tC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let gv=(()=>{class n extends tC{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jp=new h.OlP("",{providedIn:"root",factory:()=>({})});let mv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(rC)},providedIn:"root"}),n})(),rC=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sC(n){throw n}function oC(n,e,t){return e.parse("/")}const aC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $r=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Jp,{optional:!0})||{},this.errorHandler=this.options.errorHandler||sC,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||oC,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(mv),this.routeReuseStrategy=(0,h.f3M)(eC),this.urlCreationStrategy=(0,h.f3M)(DI),this.titleStrategy=(0,h.f3M)(v0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Km((0,h.f3M)(ml,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(Wh),this.urlSerializer=(0,h.f3M)(Pp),this.location=(0,h.f3M)(ue),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new hl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=SI(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Vp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Lh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:l;let C=null;switch(f){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=kh(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Vp,null,r)}navigate(t,r={skipLocationChange:!1}){return function BT(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...aC}:!1===r?{...uC}:r,kh(t))return dI(this.currentUrlTree,t,i);const a=this.parseUrl(t);return dI(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,_,w,C;return l?(f=l.resolve,_=l.reject,w=l.promise):w=new Promise((S,B)=>{f=S,_=B}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wv{}let lC=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(To(t=>t instanceof Kc),Vc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,h.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Zt.D)(i).pipe((0,Th.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Et(null);const a=i.pipe((0,ji.z)(l=>null===l?Et(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Zt.D)([a,l]).pipe((0,Th.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG($r),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(wv),h.LFG(Qp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const w0=new h.OlP("");let Ev=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof r0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Kc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function cs(n,e){return{\u0275kind:n,\u0275providers:e}}function E0(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get($r),i=n.get(dC);1===n.get(tg)&&r.initialNavigation(),n.get(hC,null,h.XFs.Optional)?.setUpPreloading(),n.get(w0,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const dC=new h.OlP("",{factory:()=>new ll.x}),tg=new h.OlP("",{providedIn:"root",factory:()=>1});const hC=new h.OlP("");function fC(n){return cs(0,[{provide:hC,useExisting:lC},{provide:wv,useExisting:n}])}const pC=new h.OlP("ROUTER_FORROOT_GUARD"),gC=[ue,{provide:Pp,useClass:Vy},$r,$p,{provide:Oh,useFactory:function eg(n){return n.routerState.root},deps:[$r]},Qp,[]];function WT(){return new h.PXZ("Router",$r)}let Cv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[gC,[],{provide:ml,multi:!0,useValue:t},{provide:pC,useFactory:KT,deps:[[$r,new h.FiY,new h.tp0]]},{provide:Jp,useValue:r||{}},r?.useHash?{provide:ge,useClass:z}:{provide:ge,useClass:j},{provide:w0,useFactory:()=>{const n=(0,h.f3M)($o),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Jp),r=(0,h.f3M)(Wh),i=(0,h.f3M)(Pp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ev(i,r,n,e,t)}},r?.preloadingStrategy?fC(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:WT},r?.initialNavigation?_C(r):[],[{provide:yC,useFactory:E0},{provide:h.tb,multi:!0,useExisting:yC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ml,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pC,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Gp]}),n})();function KT(n){return"guarded"}function _C(n){return["disabled"===n.initialNavigation?cs(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)($r);return()=>{e.setUpLocationChangeListener()}}},{provide:tg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?cs(2,[{provide:tg,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(H,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get($r),l=e.get(dC);(function r(i){e.get($r).events.pipe(To(l=>l instanceof Kc||l instanceof Bp||l instanceof s0),(0,gt.U)(l=>l instanceof Kc||l instanceof Bp&&(0===l.code||1===l.code)&&null),To(l=>null!==l),Sh(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(Wh).afterPreactivation=()=>(i(!0),l.closed?Et(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const yC=new h.OlP("");class bv{constructor(e,t){this.name=e.name,this.password=e.password,this.email=e.email,this.comment=e.comment,this.key=t}}const Ro="ycqgpxe5zsr95z694myf44xmy2hz2gjl9uowi3dv",Dv=M(7206);function wC(n){return Dv.AES.encrypt(n,Ro).toString()}function ga(n){return Dv.AES.decrypt(n,Ro).toString(Dv.enc.Utf8)}function Xs(){return JSON.parse(sessionStorage.getItem("user")??"")}var Fe=M(5861),I0=M(4986),yn=M(2122);function Tv(){return(0,jr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Mn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function EC(n,e=Rp.y){return n=n??ZT,(0,jr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Mn.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function ZT(n,e){return n===e}var yt,Gr=M(2011),id=(M(407),M(3942)),Gi=M(9681),Js=M(4859),Mo=M(1877),G=M(2090),CC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eo={},C0=C0||{},$t=CC||self;function ng(){}function sd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var b0="closure_uid_"+(1e9*Math.random()>>>0),xC=0;function DC(n,e,t){return n.call.apply(n.bind,arguments)}function TC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function yi(n,e,t){return(yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?DC:TC).apply(null,arguments)}function rg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function vi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function _l(){this.s=this.s,this.o=this.o}_l.prototype.s=!1,_l.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function bC(n){Object.prototype.hasOwnProperty.call(n,b0)&&n[b0]||(n[b0]=++xC)}(this)},_l.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Sv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AC(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(sd(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Ri(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ri.prototype.h=function(){this.defaultPrevented=!0};var QT=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",ng,e),$t.removeEventListener("test",ng,e)}catch{}return n}();function x0(n){return/^[\s\xa0]*$/.test(n)}var RC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Av(n,e){return n<e?-1:n>e?1:0}function D0(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function ma(n){return-1!=D0().indexOf(n)}function Rv(n){return Rv[" "](n),n}Rv[" "]=ng;var ig,n,JT=ma("Opera"),Qh=ma("Trident")||ma("MSIE"),MC=ma("Edge"),T0=MC||Qh,Mv=ma("Gecko")&&!(-1!=D0().toLowerCase().indexOf("webkit")&&!ma("Edge"))&&!(ma("Trident")||ma("MSIE"))&&!ma("Edge"),NC=-1!=D0().toLowerCase().indexOf("webkit")&&!ma("Edge");function Nv(){var n=$t.document;return n?n.documentMode:void 0}e:{var S0="",A0=(n=D0(),Mv?/rv:([^\);]+)(\)|;)/.exec(n):MC?/Edge\/([\d\.]+)/.exec(n):Qh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):NC?/WebKit\/(\S+)/.exec(n):JT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(A0&&(S0=A0?A0[1]:""),Qh){var R0=Nv();if(null!=R0&&R0>parseFloat(S0)){ig=String(R0);break e}}ig=S0}var kC={};var eS=$t.document&&Qh&&(Nv()||parseInt(ig,10))||void 0;function sg(n,e){if(Ri.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Mv){e:{try{Rv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Xh[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&sg.X.h.call(this)}}vi(sg,Ri);var Xh={2:"touch",3:"pen",4:"mouse"};sg.prototype.h=function(){sg.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var N0="closure_listenable_"+(1e6*Math.random()|0),kv=0;function hN(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++kv,this.ba=this.ea=!1}function og(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function k0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tS(n){const e={};for(const t in n)e[t]=n[t];return e}const Mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function OC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Mt.length;a++)t=Mt[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function P0(n){this.src=n,this.g={},this.h=0}function Pv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=SC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(og(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vl(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}P0.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=vl(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new hN(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Ov="closure_lm_"+(1e6*Math.random()|0),Jh={};function ag(n,e,t,r,i){if(r&&r.once)return Fv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)ag(n,e[a],t,r,i);return null}return t=Bv(t),n&&n[N0]?n.N(e,t,Yh(r)?!!r.capture:!!r,i):ir(n,e,t,!1,r,i)}function ir(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Yh(i)?!!i.capture:!!i,f=O0(n);if(f||(n[Ov]=f=new P0(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function fN(){const e=FC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)QT||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Vv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Fv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Fv(n,e[a],t,r,i);return null}return t=Bv(t),n&&n[N0]?n.O(e,t,Yh(r)?!!r.capture:!!r,i):ir(n,e,t,!0,r,i)}function Lv(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Lv(n,e[a],t,r,i);else r=Yh(r)?!!r.capture:!!r,t=Bv(t),n&&n[N0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vl(a=n.g[e],t,r,i))&&(og(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=O0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vl(e,t,r,i)),(t=-1<n?e[n]:null)&&Uv(t))}function Uv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[N0])Pv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Vv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=O0(e))?(Pv(t,n),0==t.h&&(t.src=null,e[Ov]=null)):og(n)}}}function Vv(n){return n in Jh?Jh[n]:Jh[n]="on"+n}function FC(n,e){if(n.ba)n=!0;else{e=new sg(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Uv(n),n=t.call(r,e)}return n}function O0(n){return(n=n[Ov])instanceof P0?n:null}var F0="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bv(n){return"function"==typeof n?n:(n[F0]||(n[F0]=function(e){return n.handleEvent(e)}),n[F0])}function ti(){_l.call(this),this.i=new P0(this),this.P=this,this.I=null}function wi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ri(e,n);else if(e instanceof Ri)e.target=e.target||n;else{var i=e;OC(e=new Ri(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=wl(l,r,!0,e)&&i}if(i=wl(l=e.g=n,r,!0,e)&&i,i=wl(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=wl(l=e.g=t[a],r,!1,e)&&i}function wl(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,_=l.ha||l.src;l.ea&&Pv(n.i,l),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}vi(ti,_l),ti.prototype[N0]=!0,ti.prototype.removeEventListener=function(n,e,t,r){Lv(this,n,e,t,r)},ti.prototype.M=function(){if(ti.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)og(t[r]);delete n.g[e],n.h--}}this.I=null},ti.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ti.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Hv=$t.JSON.stringify;function nS(){var n=VC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $v,ug=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new LC,n=>n.reset());class LC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function UC(n){$t.setTimeout(()=>{throw n},0)}function jv(n,e){$v||function lg(){var n=$t.Promise.resolve(void 0);$v=function(){n.then(iS)}}(),od||($v(),od=!0),VC.add(n,e)}var od=!1,VC=new class rS{constructor(){this.h=this.g=null}add(e,t){const r=ug.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function iS(){for(var n;n=nS();){try{n.h.call(n.g)}catch(t){UC(t)}var e=ug;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}od=!1}function L0(n,e){ti.call(this),this.h=n||1,this.g=e||$t,this.j=yi(this.lb,this),this.l=Date.now()}function U0(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function V0(n,e,t){if("function"==typeof n)t&&(n=yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function Gv(n){n.g=V0(()=>{n.g=null,n.i&&(n.i=!1,Gv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}vi(L0,ti),(yt=L0.prototype).ca=!1,yt.R=null,yt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),wi(this,"tick"),this.ca&&(U0(this),this.start()))}},yt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.M=function(){L0.X.M.call(this),U0(this),delete this.g};class sS extends _l{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gv(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ef(n){_l.call(this),this.h=n,this.g={}}vi(ef,_l);var BC=[];function HC(n,e,t,r){Array.isArray(t)||(t&&(BC[0]=t.toString()),t=BC);for(var i=0;i<t.length;i++){var a=ag(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function oS(n){k0(n.g,function(e,t){this.g.hasOwnProperty(t)&&Uv(e)},n),n.g={}}function zv(){this.g=!0}function ad(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function aS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Hv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ef.prototype.M=function(){ef.X.M.call(this),oS(this)},ef.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zv.prototype.Aa=function(){this.g=!1},zv.prototype.info=function(){};var ud={},Wv=null;function El(){return Wv=Wv||new ti}function jC(n){Ri.call(this,ud.Pa,n)}function cg(n){const e=El();wi(e,new jC(e))}function $C(n,e){Ri.call(this,ud.STAT_EVENT,n),this.stat=e}function zi(n){const e=El();wi(e,new $C(e,n))}function uS(n,e){Ri.call(this,ud.Qa,n),this.size=e}function dg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}ud.Pa="serverreachability",vi(jC,Ri),ud.STAT_EVENT="statevent",vi($C,Ri),ud.Qa="timingevent",vi(uS,Ri);var hg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},GC={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function qv(){}function zC(){}qv.prototype.h=null;var Zv,nf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Kv(){Ri.call(this,"d")}function H0(){Ri.call(this,"c")}function fg(){}function pg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new ef(this),this.O=lS,this.T=new L0(n=T0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new j0}function j0(){this.i=null,this.g="",this.h=!1}vi(Kv,Ri),vi(H0,Ri),vi(fg,qv),fg.prototype.g=function(){return new XMLHttpRequest},fg.prototype.i=function(){return{}},Zv=new fg;var lS=45e3,$0={},gg={};function Yv(n,e,t){n.K=1,n.v=sf(ou(e)),n.s=t,n.P=!0,WC(n,null)}function WC(n,e){n.F=Date.now(),rf(n),n.A=ou(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),tw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new j0,n.g=Cg(n.l,t?e:null,!n.s),0<n.N&&(n.L=new sS(yi(n.La,n,n.g),n.N)),HC(n.S,n.g,"readystatechange",n.ib),e=n.H?tS(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),cg(),function pN(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var C=w[0];w=w[1];var S=C.split("_");l=2<=S.length&&"type"==S[1]?l+(C+"=")+w+"&":l+(C+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function qC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function G0(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=cS(n,t),i==gg){4==e&&(n.o=4,zi(14),r=!1),ad(n.j,n.m,null,"[Incomplete Response]");break}if(i==$0){n.o=4,zi(15),ad(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ad(n.j,n.m,i,null),Qv(n,i)}qC(n)&&i!=gg&&i!=$0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),to(e),e.K=!0,zi(11))):(ad(n.j,n.m,t,"[Invalid Chunked Response]"),ld(n),mg(n))}function cS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gg:(t=Number(e.substring(t,r)),isNaN(t)?$0:(r+=1)+t>e.length?gg:(e=e.substr(r,t),n.C=r+t,e))}function rf(n){n.V=Date.now()+n.O,KC(n,n.O)}function KC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=dg(yi(n.gb,n),e)}function z0(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function mg(n){0==n.l.G||n.I||ff(n.l,n)}function ld(n){z0(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,U0(n.T),oS(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Qv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||K0(t.h,n)))if(!n.J&&K0(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;hf(t),dw(t)}Eg(t),zi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=dg(yi(t.cb,t),6e3));if(1>=rw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else hd(t,11)}else if((n.J||t.g==n)&&hf(t),!x0(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const C=w[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const S=w[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const B=w[5];null!=B&&"number"==typeof B&&0<B&&(t.J=r=1.5*B,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const ee=n.g;if(ee){const le=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(le){var a=r.h;a.g||-1==le.indexOf("spdy")&&-1==le.indexOf("quic")&&-1==le.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Z0(a,a.h),a.h=null))}if(r.D){const Oe=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.za=Oe,qn(r.F,r.D,Oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Ig(r,r.H?r.ka:null,r.V),l.J){iw(r.h,l);var f=l,_=r.J;_&&f.setTimeout(_),f.B&&(z0(f),rf(f)),r.g=l}else hb(r);0<t.i.length&&J0(t)}else"stop"!=w[0]&&"close"!=w[0]||hd(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?hd(t,7):cw(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}cg()}catch{}}function ZC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(sd(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function hS(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(sd(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function dS(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(sd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(yt=pg.prototype).setTimeout=function(n){this.O=n},yt.ib=function(n){n=n.target;const e=this.L;e&&3==ya(n)?e.l():this.La(n)},yt.La=function(n){try{if(n==this.g)e:{const C=ya(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||T0||this.g&&(this.h.h||this.g.fa()||uw(this.g)))){this.I||4!=C||7==e||cg(),z0(this);var t=this.g.aa();this.Y=t;t:if(qC(this)){var r=uw(this.g);n="";var i=r.length,a=4==ya(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ld(this),mg(this);var l="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function gN(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x0(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,zi(12),ld(this),mg(this);break e}ad(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Qv(this,t)}this.P?(G0(this,C,l),T0&&this.i&&3==C&&(HC(this.S,this.T,"tick",this.hb),this.T.start())):(ad(this.j,this.m,l,null),Qv(this,l)),4==C&&ld(this),this.i&&!this.I&&(4==C?ff(this.l,this):(this.i=!1,rf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,zi(12)):(this.o=0,zi(13)),ld(this),mg(this)}}}catch{}},yt.hb=function(){if(this.g){var n=ya(this.g),e=this.g.fa();this.C<e.length&&(z0(this),G0(this,n,e),this.i&&4!=n&&rf(this))}},yt.cancel=function(){this.I=!0,ld(this)},yt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function B0(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(cg(),zi(17)),ld(this),this.o=2,mg(this)):KC(this,this.V-n)};var Xv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof cd){this.h=void 0!==e?e:n.h,_g(this,n.j),this.s=n.s,this.g=n.g,W0(this,n.m),this.l=n.l,e=n.i;var t=new _a;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),QC(this,t),this.o=n.o}else n&&(t=String(n).match(Xv))?(this.h=!!e,_g(this,t[1]||"",!0),this.s=dd(t[2]||""),this.g=dd(t[3]||"",!0),W0(this,t[4]),this.l=dd(t[5]||"",!0),QC(this,t[6]||"",!0),this.o=dd(t[7]||"")):(this.h=!!e,this.i=new _a(null,this.h))}function ou(n){return new cd(n)}function _g(n,e,t){n.j=t?dd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function W0(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function QC(n,e,t){e instanceof _a?(n.i=e,function mS(n,e){e&&!n.j&&(au(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(eb(this,r),tw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=af(e,pS)),n.i=new _a(e,n.h))}function qn(n,e,t){n.i.set(e,t)}function sf(n){return qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function dd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function af(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Jv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Jv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(af(e,XC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(af(e,XC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(af(t,"/"==t.charAt(0)?ew:fS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",af(t,JC)),n.join("")};var XC=/[#\/\?@]/g,fS=/[#\?:]/g,ew=/[#\?]/g,pS=/[#\?@]/g,JC=/#/g;function _a(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function au(n){n.g||(n.g=new Map,n.h=0,n.i&&function YC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function eb(n,e){au(n),e=Il(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gS(n,e){return au(n),e=Il(n,e),n.g.has(e)}function tw(n,e,t){eb(n,e),0<t.length&&(n.i=null,n.g.set(Il(n,e),Sv(t)),n.h+=t.length)}function Il(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tb(n){this.l=n||nb,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ga&&$t.g.Ga()&&$t.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=_a.prototype).add=function(n,e){au(this),this.i=null,n=Il(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){au(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},yt.oa=function(){au(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},yt.W=function(n){au(this);let e=[];if("string"==typeof n)gS(this,n)&&(e=e.concat(this.g.get(Il(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},yt.set=function(n,e){return au(this),this.i=null,gS(this,n=Il(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var nb=10;function q0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rw(n){return n.h?1:n.g?n.g.size:0}function K0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Z0(n,e){n.g?n.g.add(e):n.h=e}function iw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function rb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Sv(n.i)}function sw(){}function _S(){this.g=new sw}function yS(n,e,t){const r=t||"";try{ZC(n,function(i,a){let l=i;Yh(i)&&(l=Hv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ow(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function uf(n){this.l=n.ac||null,this.j=n.jb||!1}function Y0(n,e){ti.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=aw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tb.prototype.cancel=function(){if(this.i=rb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sw.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},sw.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},vi(uf,qv),uf.prototype.g=function(){return new Y0(this.l,this.j)},uf.prototype.i=function(n){return function(){return n}}({}),vi(Y0,ti);var aw=0;function vS(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function yg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vg(n)}function vg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=Y0.prototype).open=function(n,e){if(this.readyState!=aw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vg(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yg(this)),this.readyState=aw},yt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vg(this)),this.g&&(this.readyState=3,vg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vS(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},yt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yg(this):vg(this),3==this.readyState&&vS(this)}},yt.Va=function(n){this.g&&(this.response=this.responseText=n,yg(this))},yt.Ua=function(n){this.g&&(this.response=n,yg(this))},yt.ga=function(){this.g&&yg(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Y0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var wS=$t.JSON.parse;function gr(n){ti.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sb,this.K=this.L=!1}vi(gr,ti);var sb="",ES=/^https?$/i,IS=["POST","PUT"];function ob(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ab(n),Q0(n)}function ab(n){n.D||(n.D=!0,wi(n,"complete"),wi(n,"error"))}function ub(n){if(n.h&&typeof C0<"u"&&(!n.C[1]||4!=ya(n)||2!=n.aa()))if(n.v&&4==ya(n))V0(n.Ha,0,n);else if(wi(n,"readystatechange"),4==ya(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Xv)[1]||null;if(!i&&$t.self&&$t.self.location){var a=$t.self.location.protocol;i=a.substr(0,a.length-1)}r=!ES.test(i?i.toLowerCase():"")}t=r}if(t)wi(n,"complete"),wi(n,"success");else{n.m=6;try{var l=2<ya(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",ab(n)}}finally{Q0(n)}}}function Q0(n,e){if(n.g){lf(n);const t=n.g,r=n.C[0]?ng:null;n.g=null,n.C=null,e||wi(n,"ready");try{t.onreadystatechange=r}catch{}}}function lf(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function ya(n){return n.g?n.g.readyState:0}function uw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lw(n){let e="";return k0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function X0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):qn(n,e,t))}function cf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lb(n){this.Ca=0,this.i=[],this.j=new zv,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=cf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=cf("baseRetryDelayMs",5e3,n),this.bb=cf("retryDelaySeedMs",1e4,n),this.$a=cf("forwardChannelMaxRetries",2,n),this.ta=cf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new tb(n&&n.concurrentRequestLimit),this.Fa=new _S,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function cw(n){if(cb(n),3==n.G){var e=n.U++,t=ou(n.F);qn(t,"SID",n.I),qn(t,"RID",e),qn(t,"TYPE","terminate"),wg(n,t),(e=new pg(n,n.j,e,void 0)).K=2,e.v=sf(ou(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=Cg(e.l,null),e.g.da(e.v)),e.F=Date.now(),rf(e)}gb(n)}function dw(n){n.g&&(to(n),n.g.cancel(),n.g=null)}function cb(n){dw(n),n.u&&($t.clearTimeout(n.u),n.u=null),hf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function J0(n){q0(n.h)||n.m||(n.m=!0,jv(n.Ja,n),n.C=0)}function db(n,e){var t;t=e?e.m:n.U++;const r=ou(n.F);qn(r,"SID",n.I),qn(r,"RID",t),qn(r,"AID",n.T),wg(n,r),n.o&&n.s&&X0(r,n.o,n.s),t=new pg(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=df(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Z0(n.h,t),Yv(t,r,e)}function wg(n,e){n.ia&&k0(n.ia,function(t,r){qn(e,r,t)}),n.l&&ZC({},function(t,r){qn(e,r,t)})}function df(n,e,t){t=Math.min(n.i.length,t);var r=n.l?yi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let w=i[_].h;const C=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),f=!1;else try{yS(C,l,"req"+w+"_")}catch{r&&r(C)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function hb(n){n.g||n.u||(n.Z=1,jv(n.Ia,n),n.A=0)}function Eg(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=dg(yi(n.Ia,n),pb(n,n.A)),n.A++,0))}function to(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function fb(n){n.g=new pg(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ou(n.sa);qn(e,"RID","rpc"),qn(e,"SID",n.I),qn(e,"CI",n.L?"0":"1"),qn(e,"AID",n.T),qn(e,"TYPE","xmlhttp"),wg(n,e),n.o&&n.s&&X0(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=sf(ou(e)),t.s=null,t.P=!0,WC(t,n)}function hf(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function ff(n,e){var t=null;if(n.g==e){hf(n),to(n),n.g=null;var r=2}else{if(!K0(n.h,e))return;t=e.D,iw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;wi(r=El(),new uS(r,t)),J0(n)}else hb(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function bS(n,e){return!(rw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=dg(yi(n.Ja,n,e),pb(n,n.C)),n.C++,0)))}(n,e)||2==r&&Eg(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:hd(n,5);break;case 4:hd(n,10);break;case 3:hd(n,6);break;default:hd(n,2)}}function pb(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function hd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=yi(n.kb,n);t||(t=new cd("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||_g(t,"https"),sf(t)),function ib(n,e){const t=new zv;if($t.Image){const r=new Image;r.onload=rg(ow,t,r,"TestLoadImage: loaded",!0,e),r.onerror=rg(ow,t,r,"TestLoadImage: error",!1,e),r.onabort=rg(ow,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=rg(ow,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zi(2);n.G=0,n.l&&n.l.va(e),gb(n),cb(n)}function gb(n){if(n.G=0,n.la=[],n.l){const e=rb(n.h);(0!=e.length||0!=n.i.length)&&(AC(n.la,e),AC(n.la,n.i),n.h.i.length=0,Sv(n.i),n.i.length=0),n.l.ua()}}function Ig(n,e,t){var r=t instanceof cd?ou(t):new cd(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),W0(r,r.m);else{var i=$t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new cd(null,void 0);r&&_g(a,r),e&&(a.g=e),i&&W0(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&qn(r,t,e),qn(r,"VER",n.ma),wg(n,r),r}function Cg(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gr(t&&n.Da&&!n.ra?new uf({jb:!0}):n.ra)).Ka(n.H),e}function mb(){}function e_(){if(Qh&&!(10<=Number(eS)))throw Error("Environmental error: no available transport.")}function ds(n,e){ti.call(this),this.g=new lb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!x0(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!x0(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new fd(this)}function hw(n){Kv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function t_(){H0.call(this),this.status=1}function fd(n){this.g=n}(yt=gr.prototype).Ka=function(n){this.L=n},yt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zv.g(),this.C=function tf(n){return n.h||(n.h=n.i())}(this.u?this.u:Zv),this.g.onreadystatechange=yi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void ob(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=$t.FormData&&n instanceof $t.FormData,!(0<=SC(IS,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lf(this),0<this.B&&((this.K=function CS(n){return Qh&&function PC(){return function XT(n){var e=kC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=RC(String(ig)).split("."),t=RC("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Av(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Av(0==i[2].length,0==a[2].length)||Av(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yi(this.qa,this)):this.A=V0(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){ob(this,a)}},yt.qa=function(){typeof C0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wi(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,wi(this,"complete"),wi(this,"abort"),Q0(this))},yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Q0(this,!0)),gr.X.M.call(this)},yt.Ha=function(){this.s||(this.F||this.v||this.l?ub(this):this.fb())},yt.fb=function(){ub(this)},yt.aa=function(){try{return 2<ya(this)?this.g.status:-1}catch{return-1}},yt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},yt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),wS(e)}},yt.Ea=function(){return this.m},yt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=lb.prototype).ma=8,yt.G=1,yt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new pg(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=tS(a),OC(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=df(this,i,e),qn(t=ou(this.F),"RID",n),qn(t,"CVER",22),this.D&&qn(t,"X-HTTP-Session-Id",this.D),wg(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(lw(a)))+"&"+e:this.o&&X0(t,this.o,a)),Z0(this.h,i),this.Ya&&qn(t,"TYPE","init"),this.O?(qn(t,"$req",e),qn(t,"SID","null"),i.Z=!0,Yv(i,t,null)):Yv(i,t,e),this.G=2}}else 3==this.G&&(n?db(this,n):0==this.i.length||q0(this.h)||db(this))},yt.Ia=function(){if(this.u=null,fb(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=dg(yi(this.eb,this),n)}},yt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,zi(10),dw(this),fb(this))},yt.cb=function(){null!=this.v&&(this.v=null,dw(this),Eg(this),zi(19))},yt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),zi(2)):(this.j.info("Failed to ping google.com"),zi(1))},(yt=mb.prototype).xa=function(){},yt.wa=function(){},yt.va=function(){},yt.ua=function(){},yt.Ra=function(){},e_.prototype.g=function(n,e){return new ds(n,e)},vi(ds,ti),ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;zi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Ig(n,null,n.V),J0(n)},ds.prototype.close=function(){cw(this.g)},ds.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Hv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&J0(e)},ds.prototype.M=function(){this.g.l=null,delete this.j,cw(this.g),delete this.g,ds.X.M.call(this)},vi(hw,Kv),vi(t_,H0),vi(fd,mb),fd.prototype.xa=function(){wi(this.g,"a")},fd.prototype.wa=function(n){wi(this.g,new hw(n))},fd.prototype.va=function(n){wi(this.g,new t_)},fd.prototype.ua=function(){wi(this.g,"b")},e_.prototype.createWebChannel=e_.prototype.g,ds.prototype.send=ds.prototype.u,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,hg.NO_ERROR=0,hg.TIMEOUT=8,hg.HTTP_ERROR=6,GC.COMPLETE="complete",zC.EventType=nf,nf.OPEN="a",nf.CLOSE="b",nf.ERROR="c",nf.MESSAGE="d",ti.prototype.listen=ti.prototype.N,gr.prototype.listenOnce=gr.prototype.O,gr.prototype.getLastError=gr.prototype.Oa,gr.prototype.getLastErrorCode=gr.prototype.Ea,gr.prototype.getStatus=gr.prototype.aa,gr.prototype.getResponseJson=gr.prototype.Sa,gr.prototype.getResponseText=gr.prototype.fa,gr.prototype.send=gr.prototype.da,gr.prototype.setWithCredentials=gr.prototype.Ka;var fw=eo.createWebChannelTransport=function(){return new e_},pw=eo.getStatEventTarget=function(){return El()},n_=eo.ErrorCode=hg,gw=eo.EventType=GC,mw=eo.Event=ud,_b=eo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},xS=eo.FetchXmlHttpFactory=uf,r_=eo.WebChannel=zC,DS=eo.XhrIo=gr;const _w="@firebase/firestore";class kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let pd="9.17.1";const Cl=new Mo.Yd("@firebase/firestore");function i_(){return Cl.logLevel}function Ze(n,...e){if(Cl.logLevel<=Mo.in.DEBUG){const t=e.map(yw);Cl.debug(`Firestore (${pd}): ${n}`,...t)}}function mr(n,...e){if(Cl.logLevel<=Mo.in.ERROR){const t=e.map(yw);Cl.error(`Firestore (${pd}): ${n}`,...t)}}function bl(n,...e){if(Cl.logLevel<=Mo.in.WARN){const t=e.map(yw);Cl.warn(`Firestore (${pd}): ${n}`,...t)}}function yw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${pd}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function mt(n,e){n||ut()}function tt(n,e){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends G.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class TS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kr.UNAUTHENTICATED))}shutdown(){}}class wb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bg{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ni,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=l;e.enqueueRetryable((0,Fe.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ni)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new TS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new kr(e)}}class SS{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=kr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(mt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class vw{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new SS(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Eb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ib{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.A=t.token,new Eb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function AS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Cb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=AS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function gd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ww(n){return n+"\0"}class kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ke(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ke(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ke(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new kn(0,0))}static max(){return new It(new kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class s_{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===s_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof s_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends s_{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const RS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends s_{construct(e,t,r){return new sr(e,t,r)}static isValidIdentifier(e){return RS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ke(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ke(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ke(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(t)}static emptyPath(){return new sr([])}}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(dn.fromString(e))}static fromName(e){return new Je(dn.fromString(e).popFirst(5))}static empty(){return new Je(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new dn(e.slice()))}}class o_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function a_(n){return n.fields.find(e=>2===e.kind)}function uu(n){return n.fields.filter(e=>2!==e.kind)}o_.UNKNOWN_ID=-1;class u_{constructor(e,t){this.fieldPath=e,this.kind=t}}class xg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xg(0,hs.min())}}function bb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new kn(t+1,0):new kn(t,r));return new hs(i,Je.empty(),e)}function xb(n){return new hs(n.readTime,n.key,-1)}class hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hs(It.min(),Je.empty(),-1)}static max(){return new hs(It.max(),Je.empty(),-1)}}function l_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}const Db="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ew{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function lu(n){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,Fe.Z)(function*(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==Db)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}),Iw.apply(this,arguments)}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,r)=>{t(e)})}static reject(e){return new Ne((t,r)=>{r(e)})}static waitFor(e){return new Ne((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=Ne.resolve(!1);for(const r of e)t=t.next(i=>i?Ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new Ne((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(C=>{l[w]=C,++f,f===a&&r(l)},C=>i(C))}})}static doWhile(e,t){return new Ne((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Dg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ni,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new pf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Rb(r.target.error);this.P.reject(new pf(e,i))}}static open(e,t,r,i){try{return new Dg(t,e.transaction(i,r))}catch(a){throw new pf(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sb(t)}}class No{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===No.D((0,G.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ze("SimpleDb","Removing database:",e),md(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,G.hl)())return!1;if(No.N())return!0;const e=(0,G.z$)(),t=No.D(e),r=0<t&&t<10,i=No.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Fe.Z)(function*(){return t.db||(Ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new pf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ke(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ke(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new pf(e,f))},a.onupgradeneeded=l=>{Ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Fe.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const _=Dg.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(C=>(_.V(),C)).catch(C=>(_.abort(C),Ne.reject(C))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,C="FirebaseError"!==w.name&&f<3;if(Ze("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),a.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Tb{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return md(this.q.delete())}}class pf extends Ke{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function cu(n){return"IndexedDbTransactionError"===n.name}class Sb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),md(r)}add(e){return Ze("SimpleDb","ADD",this.store.name,e,e),md(this.store.add(e))}get(e){return md(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ze("SimpleDb","DELETE",this.store.name,e),md(this.store.delete(e))}count(){return Ze("SimpleDb","COUNT",this.store.name),md(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new Ne((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ne((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new Ne((r,i)=>{t.onerror=a=>{const l=Rb(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new Ne((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const _=new Tb(f),w=t(f.primaryKey,f.value,_);if(w instanceof Ne){const C=w.catch(S=>(_.done(),Ne.reject(S)));r.push(C)}_.isDone?i():null===_.G?f.continue():f.continue(_.G)}}).next(()=>Ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function md(n){return new Ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Rb(r.target.error);t(i)}})}let Ab=!1;function Rb(n){const e=No.D((0,G.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ab||(Ab=!0,setTimeout(()=>{throw r},0)),r}}return n}class Mb{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Fe.Z)(function*(){t.task=null;try{Ze("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){cu(r)?Ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield lu(r)}yield t.nt(6e4)}))}}class vN{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return Ne.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ze("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Ze("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=xb(a);l_(l,r)>0&&(r=l)}),new hs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let no=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class wN{constructor(e,t,r,i,a,l,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class _d{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _d("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _d&&e.projectId===this.projectId&&e.database===this.database}}function MS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function c_(n){return null==n}function xl(n){return 0===n&&1/n==-1/0}function kS(n){return"number"==typeof n&&Number.isInteger(n)&&!xl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const kb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function du(n){if(mt(!!n),"string"==typeof n){let e=0;const t=kb.exec(n);if(mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function hu(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function d_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Pb(n){const e=n.mapValue.fields.__previous_value__;return d_(e)?Pb(e):e}function mf(n){const e=du(n.mapValue.fields.__local_write_time__.timestampValue);return new kn(e.seconds,e.nanos)}const yd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cw={nullValue:"NULL_VALUE"};function vd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d_(n)?4:FS(n)?9007199254740991:10:ut()}function va(n,e){if(n===e)return!0;const t=vd(n);if(t!==vd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mf(n).isEqual(mf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=du(r.timestampValue),l=du(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,hu(n.bytesValue).isEqual(hu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Sr(r.geoPointValue.latitude)===Sr(i.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Sr(r.integerValue)===Sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Sr(r.doubleValue),l=Sr(i.doubleValue);return a===l?xl(a)===xl(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return gd(n.arrayValue.values||[],e.arrayValue.values||[],va);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(MS(a)!==MS(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!va(a[f],l[f])))return!1;return!0}(n,e);default:return ut()}var i}function Dl(n,e){return void 0!==(n.values||[]).find(t=>va(t,e))}function Tl(n,e){if(n===e)return 0;const t=vd(n),r=vd(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Sr(i.integerValue||i.doubleValue),f=Sr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return PS(n.timestampValue,e.timestampValue);case 4:return PS(mf(n),mf(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,a){const l=hu(i),f=hu(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let _=0;_<l.length&&_<f.length;_++){const w=Ht(l[_],f[_]);if(0!==w)return w}return Ht(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ht(Sr(i.latitude),Sr(a.latitude));return 0!==l?l:Ht(Sr(i.longitude),Sr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let _=0;_<l.length&&_<f.length;++_){const w=Tl(l[_],f[_]);if(w)return w}return Ht(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===yd.mapValue&&a===yd.mapValue)return 0;if(i===yd.mapValue)return 1;if(a===yd.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let C=0;C<f.length&&C<w.length;++C){const S=Ht(f[C],w[C]);if(0!==S)return S;const B=Tl(l[f[C]],_[w[C]]);if(0!==B)return B}return Ht(f.length,w.length)}(n.mapValue,e.mapValue);default:throw ut()}}function PS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=du(n),r=du(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function Tg(n){return Ob(n)}function Ob(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=du(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?hu(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Ob(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${Ob(r.fields[f])}`;return a+"}"}(n.mapValue):ut();var e}function wd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bw(n){return!!n&&"integerValue"in n}function Sg(n){return!!n&&"arrayValue"in n}function OS(n){return!!n&&"nullValue"in n}function Fb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ag(n){return!!n&&"mapValue"in n}function _f(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_f(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_f(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FS(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ko(n){return"nullValue"in n?Cw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wd(_d.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function LS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wd(_d.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yd:ut()}function h_(n,e){const t=Tl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Lb(n,e){const t=Tl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ed{constructor(e,t){this.position=e,this.inclusive=t}}function Rs(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Je.comparator(Je.fromName(l.referenceValue),t.key):Tl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ub(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!va(n.position[t],e.position[t]))return!1;return!0}class f_{}class un extends f_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new US(e,t,r):"array-contains"===t?new Aw(e,r):"in"===t?new wa(e,r):"not-in"===t?new VS(e,r):"array-contains-any"===t?new EN(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Tw(e,r):new Al(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tl(t,this.value)):null!==t&&vd(this.value)===vd(t)&&this.matchesComparison(Tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Tn extends f_{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Tn(e,t)}matches(e){return Sl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Sl(n){return"and"===n.op}function p_(n){return"or"===n.op}function g_(n){return Vb(n)&&Sl(n)}function Vb(n){for(const e of n.filters)if(e instanceof Tn)return!1;return!0}function m_(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+Tg(n.value);if(g_(n))return n.filters.map(e=>m_(e)).join(",");{const e=n.filters.map(t=>m_(t)).join(",");return`${n.op}(${e})`}}function xw(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&va(t.value,r.value)):n instanceof Tn?function(t,r){return r instanceof Tn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&xw(a,r.filters[l]),!0)}(n,e):void ut();var t,r}function Bb(n,e){const t=n.filters.concat(e);return Tn.create(t,n.op)}function Dw(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${Tg(e.value)}`:n instanceof Tn?function(e){return e.op.toString()+" {"+e.getFilters().map(Dw).join(" ,")+"}"}(n):"Filter";var e}class US extends un{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tw extends un{constructor(e,t){super(e,"in",t),this.keys=Sw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Al extends un{constructor(e,t){super(e,"not-in",t),this.keys=Sw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class Aw extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sg(t)&&Dl(t.arrayValue,this.value)}}class wa extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dl(this.value.arrayValue,t)}}class VS extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dl(this.value.arrayValue,t)}}class EN extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dl(this.value.arrayValue,r))}}class yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function BS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yr{constructor(e,t){this.comparator=e,this.root=t||ri.EMPTY}insert(e,t){return new yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new __(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new __(this.root,e,this.comparator,!1)}getReverseIterator(){return new __(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new __(this.root,e,this.comparator,!0)}}class __{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ri.RED,this.left=i??ri.EMPTY,this.right=a??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ri(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ri.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1,ri.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rw(this.data.getIterator())}getIteratorFrom(e){return new Rw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class Rw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vf(n){return n.hasNext()?n.getNext():void 0}class qi{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new qi([])}unionWith(e){let t=new Pn(sr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ag(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_f(t)}setAll(e){let t=sr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=_f(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ag(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ag(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Mi(_f(this.value))}}function y_(n){const e=[];return gf(n.fields,(t,r)=>{const i=new sr([t]);if(Ag(r)){const a=y_(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new qi(e)}class Vn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Vn(e,0,It.min(),It.min(),It.min(),Mi.empty(),0)}static newFoundDocument(e,t,r,i){return new Vn(e,1,t,It.min(),r,i,0)}static newNoDocument(e,t){return new Vn(e,2,t,It.min(),It.min(),Mi.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,It.min(),It.min(),Mi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hb{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ft=null}}function v_(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Hb(n,e,t,r,i,a,l)}function Rl(n){const e=tt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>m_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),c_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Tg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Tg(r)).join(",")),e.ft=t}return e.ft}function wf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ub(n.startAt,e.startAt)&&Ub(n.endAt,e.endAt)}function Id(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Cd(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function Mw(n,e,t){let r=Cw,i=!0;for(const a of Cd(n,e)){let l=Cw,f=!0;switch(a.op){case"<":case"<=":l=ko(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=Cw}h_({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];h_({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function jb(n,e,t){let r=yd,i=!0;for(const a of Cd(n,e)){let l=yd,f=!0;switch(a.op){case">=":case">":l=LS(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=yd}Lb({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Lb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class fu{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=_,this.dt=null,this._t=null}}function HS(n,e,t,r,i,a,l,f){return new fu(n,e,t,r,i,a,l,f)}function Rg(n){return new fu(n)}function jS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function w_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function E_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Nw(n){return null!==n.collectionGroup}function bd(n){const e=tt(n);if(null===e.dt){e.dt=[];const t=E_(e),r=w_(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new yf(t)),e.dt.push(new yf(sr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new yf(sr.keyField(),a))}}}return e.dt}function fs(n){const e=tt(n);if(!e._t)if("F"===e.limitType)e._t=v_(e.path,e.collectionGroup,bd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of bd(e))t.push(new yf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ed(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ed(e.startAt.position,e.startAt.inclusive):null;e._t=v_(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function $b(n,e){e.getFirstInequalityField(),E_(n);const t=n.filters.concat([e]);return new fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kw(n,e,t){return new fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function I_(n,e){return wf(fs(n),fs(e))&&n.limitType===e.limitType}function $S(n){return`${Rl(fs(n))}|lt:${n.limitType}`}function Pw(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Dw(r)).join(", ")}]`),c_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Tg(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Tg(r)).join(",")),`Target(${t})`}(fs(n))}; limitType=${n.limitType})`}function Ml(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of bd(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=Rs(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,bd(t),r)||t.endAt&&!function(i,a,l){const f=Rs(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,bd(t),r)));var t,r}function Gb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zb(n){return(e,t)=>{let r=!1;for(const i of bd(n)){const a=Wb(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Wb(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),_=l.data.field(i);return null!==f&&null!==_?Tl(f,_):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function Nl(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xl(e)?"-0":e}}function Ow(n){return{integerValue:""+n}}function C_(n,e){return kS(e)?Ow(e):Nl(n,e)}class Ef{constructor(){this._=void 0}}function GS(n,e,t){return n instanceof pu?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof If?zS(n,e):n instanceof Cf?WS(n,e):function(r,i){const a=b_(r,i),l=qb(a)+qb(r.gt);return bw(a)&&bw(r.gt)?Ow(l):Nl(r.yt,l)}(n,e)}function Fw(n,e,t){return n instanceof If?zS(n,e):n instanceof Cf?WS(n,e):t}function b_(n,e){return n instanceof xd?bw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class pu extends Ef{}class If extends Ef{constructor(e){super(),this.elements=e}}function zS(n,e){const t=Kb(e);for(const r of n.elements)t.some(i=>va(i,r))||t.push(r);return{arrayValue:{values:t}}}class Cf extends Ef{constructor(e){super(),this.elements=e}}function WS(n,e){let t=Kb(e);for(const r of n.elements)t=t.filter(i=>!va(i,r));return{arrayValue:{values:t}}}class xd extends Ef{constructor(e,t){super(),this.yt=e,this.gt=t}}function qb(n){return Sr(n.integerValue||n.doubleValue)}function Kb(n){return Sg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Mg{constructor(e,t){this.field=e,this.transform=t}}class Zb{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ng(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class x_{}function Yb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new bf(n.key,jn.none()):new kl(n.key,n.data,jn.none());{const t=n.data,r=Mi.empty();let i=new Pn(sr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new gu(n.key,r,new qi(i.toArray()),jn.none())}}function Qb(n,e,t){n instanceof kl?function(r,i,a){const l=r.value.clone(),f=KS(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof gu?function(r,i,a){if(!Ng(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=KS(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(Xb(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Dd(n,e,t,r){return n instanceof kl?function(i,a,l,f){if(!Ng(i.precondition,a))return l;const _=i.value.clone(),w=ZS(i.fieldTransforms,f,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof gu?function(i,a,l,f){if(!Ng(i.precondition,a))return l;const _=ZS(i.fieldTransforms,f,a),w=a.data;return w.setAll(Xb(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,Ng(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function IN(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=b_(r.transform,i||null);null!=a&&(null===t&&(t=Mi.empty()),t.set(r.field,a))}return t||null}function Lw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gd(t,r,(i,a)=>function qS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof If&&r instanceof If||t instanceof Cf&&r instanceof Cf?gd(t.elements,r.elements,va):t instanceof xd&&r instanceof xd?va(t.gt,r.gt):t instanceof pu&&r instanceof pu);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class kl extends x_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gu extends x_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Xb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KS(n,e,t){const r=new Map;mt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,Fw(l,f,t[i]))}return r}function ZS(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,GS(a,l,e))}return r}class bf extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uw extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YS{constructor(e){this.count=e}}var zr,vn;function QS(n){switch(n){default:return ut();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function XS(n){if(void 0===n)return mr("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case zr.OK:return Pe.OK;case zr.CANCELLED:return Pe.CANCELLED;case zr.UNKNOWN:return Pe.UNKNOWN;case zr.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case zr.INTERNAL:return Pe.INTERNAL;case zr.UNAVAILABLE:return Pe.UNAVAILABLE;case zr.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case zr.NOT_FOUND:return Pe.NOT_FOUND;case zr.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case zr.ABORTED:return Pe.ABORTED;case zr.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case zr.DATA_LOSS:return Pe.DATA_LOSS;default:return ut()}}(vn=zr||(zr={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class Td{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return NS(this.inner)}size(){return this.innerSize}}const JS=new yr(Je.comparator);function Ms(){return JS}const eA=new yr(Je.comparator);function D_(...n){let e=eA;for(const t of n)e=e.insert(t.key,t);return e}function tA(n){let e=eA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function mu(){return s()}function nA(){return s()}function s(){return new Td(n=>n.toString(),(n,e)=>n.isEqual(e))}const o=new yr(Je.comparator),u=new Pn(Je.comparator);function c(...n){let e=u;for(const t of n)e=e.add(t);return e}const d=new Pn(Ht);function g(){return d}class v{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,I.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new v(It.min(),i,g(),Ms(),c())}}class I{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new I(r,t,c(),c(),c())}}class b{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class T{constructor(e,t){this.targetId=e,this.Et=t}}class U{constructor(e,t,r=_r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Y{constructor(){this.At=0,this.Rt=$e(),this.bt=_r.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=c(),t=c(),r=c();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new I(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=$e()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class he{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ms(),this.qt=De(),this.Ut=new Pn(Ht)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if(Id(a))if(0===r){const l=new Je(a.path);this.Qt(t,l,Vn.newNoDocument(l,It.min()))}else mt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,l)=>{const f=this.Yt(l);if(f){if(a.current&&Id(f.target)){const _=new Je(f.target.path);null!==this.Lt.get(_)||this.te(l,_)||this.Qt(l,_,Vn.newNoDocument(_,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=c();this.qt.forEach((a,l)=>{let f=!0;l.forEachWhile(_=>{const w=this.Yt(_);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new v(e,t,this.Ut,this.Lt,r);return this.Lt=Ms(),this.qt=De(),this.Ut=new Pn(Ht),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Y,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Pn(Ht),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ze("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Y),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function De(){return new yr(Je.comparator)}function $e(){return new yr(Je.comparator)}const Ye={asc:"ASCENDING",desc:"DESCENDING"},rt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dt={and:"AND",or:"OR"};class Ot{constructor(e,t){this.databaseId=e,this.wt=t}}function qe(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gt(n,e){return n.wt?e.toBase64():e.toUint8Array()}function Kn(n,e){return qe(n,e.toTimestamp())}function Xt(n){return mt(!!n),It.fromTimestamp(function(e){const t=du(e);return new kn(t.seconds,t.nanos)}(n))}function Jb(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function CN(n){const e=dn.fromString(n);return mt(NN(e)),e}function Vw(n,e){return Jb(n.databaseId,e.path)}function Pl(n,e){const t=CN(e);if(t.get(1)!==n.databaseId.projectId)throw new Ke(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ke(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(xN(t))}function rA(n,e){return Jb(n.databaseId,e)}function bN(n){const e=CN(n);return 4===e.length?dn.emptyPath():xN(e)}function Bw(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xN(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function DN(n,e,t){return{name:Vw(n,e),fields:t.value.mapValue.fields}}function TN(n,e,t){const r=Pl(n,e.name),i=Xt(e.updateTime),a=e.createTime?Xt(e.createTime):It.min(),l=new Mi({mapValue:{fields:e.fields}}),f=Vn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Hw(n,e){let t;if(e instanceof kl)t={update:DN(n,e.key,e.value)};else if(e instanceof bf)t={delete:Vw(n,e.key)};else if(e instanceof gu)t={update:DN(n,e.key,e.data),updateMask:O2(e.fieldMask)};else{if(!(e instanceof Uw))return ut();t={verify:Vw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof pu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof If)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xd)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Kn(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function iA(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?jn.updateTime(Xt(i.updateTime)):void 0!==i.exists?jn.exists(i.exists):jn.none():jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(mt("REQUEST_TIME"===l.setToServerValue),f=new pu):"appendMissingElements"in l?f=new If(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Cf(l.removeAllFromArray.values||[]):"increment"in l?f=new xd(a,l.increment):ut();const _=sr.fromServerFormat(l.fieldPath);return new Mg(_,f)}(n,i)):[];var i;if(e.update){const i=Pl(n,e.update.name),a=new Mi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new qi((e.updateMask.fieldPaths||[]).map(w=>sr.fromServerFormat(w)));return new gu(i,a,l,t,r)}return new kl(i,a,t,r)}if(e.delete){const i=Pl(n,e.delete);return new bf(i,t)}if(e.verify){const i=Pl(n,e.verify);return new Uw(i,t)}return ut()}function SN(n,e){return{documents:[rA(n,e.path)]}}function sA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=rA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=rA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return MN(Tn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:T_((C=w).field),direction:N2(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.wt||c_(w)?w:{value:w});var w,f,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function AN(n){let e=bN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){mt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=function(C){const S=RN(C);return S instanceof Tn&&g_(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new yf(S_((S=C).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(C){let S;return S="object"==typeof C?C.value:C,c_(S)?null:S}(t.limit));let _=null;var C;t.startAt&&(_=new Ed((C=t.startAt).values||[],!!C.before));let w=null;return t.endAt&&(w=function(C){return new Ed(C.values||[],!C.before)}(t.endAt)),HS(e,i,l,a,f,"F",_,w)}function RN(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=S_(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=S_(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=S_(e.unaryFilter.field);return un.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=S_(e.unaryFilter.field);return un.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?un.create(S_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Tn.create(e.compositeFilter.filters.map(t=>RN(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function N2(n){return Ye[n]}function k2(n){return rt[n]}function P2(n){return dt[n]}function T_(n){return{fieldPath:n.canonicalString()}}function S_(n){return sr.fromServerFormat(n.fieldPath)}function MN(n){return n instanceof un?function(e){if("=="===e.op){if(Fb(e.value))return{unaryFilter:{field:T_(e.field),op:"IS_NAN"}};if(OS(e.value))return{unaryFilter:{field:T_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Fb(e.value))return{unaryFilter:{field:T_(e.field),op:"IS_NOT_NAN"}};if(OS(e.value))return{unaryFilter:{field:T_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:T_(e.field),op:k2(e.op),value:e.value}}}(n):n instanceof Tn?function(e){const t=e.getFilters().map(r=>MN(r));return 1===t.length?t[0]:{compositeFilter:{op:P2(e.op),filters:t}}}(n):ut()}function O2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NN(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ns(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kN(e)),e=F2(n.get(t),e);return kN(e)}function F2(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function kN(n){return n+"\x01\x01"}function Ol(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ut(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ut()}a=l+2}return new dn(r)}const PN=["userId","batchId"];function ex(n,e){return[n,Ns(e)]}function ON(n,e,t){return[n,Ns(e),t]}const L2={},U2=["prefixPath","collectionGroup","readTime","documentId"],V2=["prefixPath","collectionGroup","documentId"],B2=["collectionGroup","readTime","prefixPath","documentId"],H2=["canonicalId","targetId"],j2=["targetId","path"],$2=["path","targetId"],G2=["collectionId","parent"],z2=["indexId","uid"],W2=["uid","sequenceNumber"],q2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],K2=["indexId","uid","orderedDocumentKey"],Z2=["userId","collectionPath","documentId"],Y2=["userId","collectionPath","largestBatchId"],Q2=["userId","collectionGroup","largestBatchId"],FN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],X2=[...FN,"documentOverlays"],LN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UN=LN,J2=[...UN,"indexConfiguration","indexState","indexEntries"];class oA extends Ew{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Ni(n,e){const t=tt(n);return No.M(t.se,e)}class aA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Qb(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nA();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const _=Yb(l,f);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),c())}isEqual(e){return this.batchId===e.batchId&&gd(this.mutations,e.mutations,(t,r)=>Lw(t,r))&&gd(this.baseMutations,e.baseMutations,(t,r)=>Lw(t,r))}}class uA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length);let i=o;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new uA(e,t,r,i)}}class lA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xf{constructor(e,t,r,i,a=It.min(),l=It.min(),f=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new xf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class VN{constructor(e){this.ie=e}}function BN(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Vw(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:qe(i,a.version.toTimestamp()),createTime:qe(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:kg(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:kg(e.version)}}var i,a;return r}function tx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function kg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pg(n){const e=new kn(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Og(n,e){const t=(e.baseMutations||[]).map(a=>iA(n.ie,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>iA(n.ie,a)),i=kn.fromMillis(e.localWriteTimeMs);return new aA(e.batchId,i,t,r)}function jw(n){const e=Pg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pg(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(mt(1===(i=n.query).documents.length),r=fs(Rg(bN(i.documents[0])))):r=fs(AN(n.query)),new xf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function HN(n,e){const t=kg(e.snapshotVersion),r=kg(e.lastLimboFreeSnapshotVersion);let i;i=Id(e.target)?SN(n.ie,e.target):sA(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function cA(n){const e=AN({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kw(e,e.limit,"L"):e}function dA(n,e){return new lA(e.largestBatchId,iA(n.ie,e.overlayMutation))}function jN(n,e){const t=e.path.lastSegment();return[n,Ns(e.path.popLast()),t]}function $N(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:kg(r.readTime),documentKey:Ns(r.documentKey.path),largestBatchId:r.largestBatchId}}class tU{getBundleMetadata(e,t){return GN(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Pg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return GN(e).put({bundleId:(r=t).id,createTime:kg(Xt(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return zN(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:cA(i.bundledQuery),readTime:Pg(i.readTime)};var i})}saveNamedQuery(e,t){return zN(e).put({name:(r=t).name,readTime:kg(Xt(r.readTime)),bundledQuery:r.bundledQuery});var r}}function GN(n){return Ni(n,"bundles")}function zN(n){return Ni(n,"namedQueries")}class nx{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new nx(e,t.uid||"")}getOverlay(e,t){return $w(e).get(jN(this.userId,t)).next(r=>r?dA(this.yt,r):null)}getOverlays(e,t){const r=mu();return Ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new lA(t,l);i.push(this.oe(e,f))}),Ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ns(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push($w(e).Y("collectionPathOverlayIndex",f))}),Ne.waitFor(a)}getOverlaysForCollection(e,t,r){const i=mu(),a=Ns(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return $w(e).W("collectionPathOverlayIndex",l).next(f=>{for(const _ of f){const w=dA(this.yt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=mu();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $w(e).Z({index:"collectionGroupOverlayIndex",range:f},(_,w,C)=>{const S=dA(this.yt,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):C.done()}).next(()=>a)}oe(e,t){return $w(e).put(function(r,i,a){const[l,f,_]=jN(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Hw(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function $w(n){return Ni(n,"documentOverlays")}class Fg{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),xl(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(hu(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?FS(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ut()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),Je.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function nU(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function WN(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=nU(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Fg.Ie=new Fg;class rU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=WN(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=WN(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class iU{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class sU{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Gw{constructor(){this.$e=new rU,this.Be=new iU(this.$e),this.Le=new sU(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Lg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Lg(this.indexId,this.documentKey,this.arrayValue,r)}}function Df(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=qN(n.arrayValue,e.arrayValue),0!==t?t:(t=qN(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function qN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class oU{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){mt(e.collectionGroup===this.collectionId);const t=a_(e);if(void 0!==t&&!this.We(t))return!1;const r=uu(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[a++],l))return!1;++i}for(;i<r.length;++i)if(a>=this.Ke.length||!this.He(this.Ke[a++],r[i]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function KN(n){var e,t;if(mt(n instanceof un||n instanceof Tn),n instanceof un){if(n instanceof wa){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>un.create(n.field,"==",a)))||[];return Tn.create(i,"or")}return n}const r=n.filters.map(i=>KN(i));return Tn.create(r,n.op)}function aU(n){if(0===n.getFilters().length)return[];const e=pA(KN(n));return mt(ZN(e)),hA(e)||fA(e)?[e]:e.getFilters()}function hA(n){return n instanceof un}function fA(n){return n instanceof Tn&&g_(n)}function ZN(n){return hA(n)||fA(n)||function(e){if(e instanceof Tn&&p_(e)){for(const t of e.getFilters())if(!hA(t)&&!fA(t))return!1;return!0}return!1}(n)}function pA(n){if(mt(n instanceof un||n instanceof Tn),n instanceof un)return n;if(1===n.filters.length)return pA(n.filters[0]);const e=n.filters.map(r=>pA(r));let t=Tn.create(e,n.op);return t=rx(t),ZN(t)?t:(mt(t instanceof Tn),mt(Sl(t)),mt(t.filters.length>1),t.filters.reduce((r,i)=>gA(r,i)))}function gA(n,e){let t;return mt(n instanceof un||n instanceof Tn),mt(e instanceof un||e instanceof Tn),t=n instanceof un?e instanceof un?Tn.create([n,e],"and"):YN(n,e):e instanceof un?YN(e,n):function(r,i){if(mt(r.filters.length>0&&i.filters.length>0),Sl(r)&&Sl(i))return Bb(r,i.getFilters());const a=p_(r)?r:i,l=p_(r)?i:r,f=a.filters.map(_=>gA(_,l));return Tn.create(f,"or")}(n,e),rx(t)}function YN(n,e){if(Sl(e))return Bb(e,n.getFilters());{const t=e.filters.map(r=>gA(n,r));return Tn.create(t,"or")}}function rx(n){if(mt(n instanceof un||n instanceof Tn),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return rx(e[0]);if(Vb(n))return n;const t=e.map(i=>rx(i)),r=[];return t.forEach(i=>{i instanceof un?r.push(i):i instanceof Tn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Tn.create(r,n.op)}class uU{constructor(){this.Je=new mA}addToCollectionParentIndex(e,t){return this.Je.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(hs.min())}updateCollectionGroup(e,t,r){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class mA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(dn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(dn.comparator)).toArray()}}const ix=new Uint8Array(0);class lU{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new mA,this.Xe=new Td(r=>Rl(r),(r,i)=>wf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:Ns(i)};return QN(e).put(a)}return Ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ww(t),""],!1,!0);return QN(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Ol(l.parent))}return r})}addFieldIndex(e,t){const r=sx(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Ww(e);return a.next(f=>{l.put($N(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=sx(e),i=Ww(e),a=zw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=zw(e);let i=!0;const a=new Map;return Ne.forEach(this.Ze(t),l=>this.tn(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=c();const f=[];return Ne.forEach(a,(_,w)=>{var C;Ze("IndexedDbIndexManager",`Using index ${C=_,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${Rl(t)}`);const S=function(ct,pt){const Ft=a_(pt);if(void 0===Ft)return null;for(const Wt of Cd(ct,Ft.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(w,_),B=function(ct,pt){const Ft=new Map;for(const Wt of uu(pt))for(const Mr of Cd(ct,Wt.fieldPath))switch(Mr.op){case"==":case"in":Ft.set(Wt.fieldPath.canonicalString(),Mr.value);break;case"not-in":case"!=":return Ft.set(Wt.fieldPath.canonicalString(),Mr.value),Array.from(Ft.values())}return null}(w,_),ee=function(ct,pt){const Ft=[];let Wt=!0;for(const Mr of uu(pt)){const Cu=0===Mr.kind?Mw(ct,Mr.fieldPath,ct.startAt):jb(ct,Mr.fieldPath,ct.startAt);Ft.push(Cu.value),Wt&&(Wt=Cu.inclusive)}return new Ed(Ft,Wt)}(w,_),le=function(ct,pt){const Ft=[];let Wt=!0;for(const Mr of uu(pt)){const Cu=0===Mr.kind?jb(ct,Mr.fieldPath,ct.endAt):Mw(ct,Mr.fieldPath,ct.endAt);Ft.push(Cu.value),Wt&&(Wt=Cu.inclusive)}return new Ed(Ft,Wt)}(w,_),Oe=this.en(_,w,ee),je=this.en(_,w,le),_t=this.nn(_,w,B),Ct=this.sn(_.indexId,S,Oe,ee.inclusive,je,le.inclusive,_t);return Ne.forEach(Ct,ct=>r.J(ct,t.limit).next(pt=>{pt.forEach(Ft=>{const Wt=Je.fromSegments(Ft.documentKey);l.has(Wt)||(l=l.add(Wt),f.push(Wt))})}))}).next(()=>f)}return Ne.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:aU(Tn.create(e.filters,"and")).map(r=>v_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,l,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),C=[];for(let S=0;S<_;++S){const B=t?this.rn(t[S/w]):ix,ee=this.on(e,B,r[S%w],i),le=this.un(e,B,a[S%w],l),Oe=f.map(je=>this.on(e,B,je,!0));C.push(...this.createRange(ee,le,Oe))}return C}on(e,t,r,i){const a=new Lg(e,Je.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new Lg(e,Je.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new oU(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.je(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return Ne.forEach(i,a=>this.tn(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let _=new Pn(sr.comparator),w=!1;for(const C of f.filters)for(const S of C.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:_=_.add(S.field));for(const C of f.orderBy)C.field.isKeyField()||(_=_.add(C.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new Gw;for(const i of uu(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Fg.Ie.ue(a,l)}return r.Fe()}rn(e){const t=new Gw;return Fg.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Gw;return Fg.Ie.ue(wd(this.databaseId,t),r.qe(function(i){const a=uu(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new Gw);let a=0;for(const l of uu(e)){const f=r[a++];for(const _ of i)if(this.hn(t,l.fieldPath)&&Sg(f))i=this.ln(i,l,f);else{const w=_.qe(l.kind);Fg.Ie.ue(f,w)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const _=new Gw;_.seed(f.Fe()),Fg.Ie.ue(l,_.qe(t.kind)),a.push(_)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sx(e),i=Ww(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return Ne.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{l.push(function(w,C){const S=C?new xg(C.sequenceNumber,new hs(Pg(C.readTime),new Je(Ol(C.documentKey)),C.largestBatchId)):xg.empty(),B=w.fields.map(([ee,le])=>new u_(sr.fromServerFormat(ee),le));return new o_(w.indexId,w.collectionGroup,B,S)}(f,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=sx(e),a=Ww(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>Ne.forEach(f,_=>a.put($N(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return Ne.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?Ne.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),Ne.forEach(f,_=>this._n(e,i,_).next(w=>{const C=this.wn(a,_);return w.isEqual(C)?Ne.resolve():this.mn(e,a,_,w,C)}))))})}gn(e,t,r,i){return zw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return zw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=zw(e);let a=new Pn(Df);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,f)=>{a=a.add(new Lg(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}wn(e,t){let r=new Pn(Df);const i=this.cn(t,e);if(null==i)return r;const a=a_(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Sg(l))for(const f of l.arrayValue.values||[])r=r.add(new Lg(t.indexId,e.key,this.rn(f),i))}else r=r.add(new Lg(t.indexId,e.key,ix,i));return r}mn(e,t,r,i,a){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,_,w,C,S){const B=f.getIterator(),ee=_.getIterator();let le=vf(B),Oe=vf(ee);for(;le||Oe;){let je=!1,_t=!1;if(le&&Oe){const Ct=w(le,Oe);Ct<0?_t=!0:Ct>0&&(je=!0)}else null!=le?_t=!0:je=!0;je?(C(Oe),Oe=vf(ee)):_t?(S(le),le=vf(B)):(le=vf(B),Oe=vf(ee))}}(i,a,Df,f=>{l.push(this.gn(e,t,r,f))},f=>{l.push(this.yn(e,t,r,f))}),Ne.waitFor(l)}dn(e){let t=1;return Ww(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Df(l,f)).filter((l,f,_)=>!f||0!==Df(l,_[f-1]));const i=[];i.push(e);for(const l of r){const f=Df(l,e),_=Df(l,t);if(0===f)i[0]=e.Ue();else if(f>0&&_<0)i.push(l),i.push(l.Ue());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,ix,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,ix,[]]))}return a}pn(e,t){return Df(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(XN)}getMinOffset(e,t){return Ne.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||ut())).next(XN)}}function QN(n){return Ni(n,"collectionParents")}function zw(n){return Ni(n,"indexEntries")}function sx(n){return Ni(n,"indexConfiguration")}function Ww(n){return Ni(n,"indexState")}function XN(n){mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;l_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new hs(e.readTime,e.documentKey,t)}const JN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ro{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ro(e,ro.DEFAULT_COLLECTION_PERCENTILE,ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ek(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const _=r.Z({range:l},(C,S,B)=>(f++,B.delete()));a.push(_.next(()=>{mt(1===f)}));const w=[];for(const C of t.mutations){const S=ON(e,C.key.path,t.batchId);a.push(i.delete(S)),w.push(C.key)}return Ne.waitFor(a).next(()=>w)}function ox(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}ro.DEFAULT_COLLECTION_PERCENTILE=10,ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ro.DEFAULT=new ro(41943040,ro.DEFAULT_COLLECTION_PERCENTILE,ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ro.DISABLED=new ro(-1,0,0);class ax{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){mt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new ax(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tf(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=A_(e),l=Tf(e);return l.add({}).next(f=>{mt("number"==typeof f);const _=new aA(f,t,r,i),w=function(B,ee,le){const Oe=le.baseMutations.map(_t=>Hw(B.ie,_t)),je=le.mutations.map(_t=>Hw(B.ie,_t));return{userId:ee,batchId:le.batchId,localWriteTimeMs:le.localWriteTime.toMillis(),baseMutations:Oe,mutations:je}}(this.yt,this.userId,_),C=[];let S=new Pn((B,ee)=>Ht(B.canonicalString(),ee.canonicalString()));for(const B of i){const ee=ON(this.userId,B.key.path,f);S=S.add(B.key.path.popLast()),C.push(l.put(w)),C.push(a.put(ee,L2))}return S.forEach(B=>{C.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.In[f]=_.keys()}),Ne.waitFor(C).next(()=>_)})}lookupMutationBatch(e,t){return Tf(e).get(t).next(r=>r?(mt(r.userId===this.userId),Og(this.yt,r)):null)}Tn(e,t){return this.In[t]?Ne.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Tf(e).Z({index:"userMutationsIndex",range:i},(l,f,_)=>{f.userId===this.userId&&(mt(f.batchId>=r),a=Og(this.yt,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Tf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tf(e).W("userMutationsIndex",t).next(r=>r.map(i=>Og(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ex(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return A_(e).Z({range:i},(l,f,_)=>{const[w,C,S]=l,B=Ol(C);if(w===this.userId&&t.path.isEqual(B))return Tf(e).get(S).next(ee=>{if(!ee)throw ut();mt(ee.userId===this.userId),a.push(Og(this.yt,ee))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Ht);const i=[];return t.forEach(a=>{const l=ex(this.userId,a.path),f=IDBKeyRange.lowerBound(l),_=A_(e).Z({range:f},(w,C,S)=>{const[B,ee,le]=w,Oe=Ol(ee);B===this.userId&&a.path.isEqual(Oe)?r=r.add(le):S.done()});i.push(_)}),Ne.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ex(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new Pn(Ht);return A_(e).Z({range:l},(_,w,C)=>{const[S,B,ee]=_,le=Ol(B);S===this.userId&&r.isPrefixOf(le)?le.length===i&&(f=f.add(ee)):C.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Tf(e).get(a).next(l=>{if(null===l)throw ut();mt(l.userId===this.userId),r.push(Og(this.yt,l))}))}),Ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ek(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return A_(e).Z({range:r},(a,l,f)=>{if(a[0]===this.userId){const _=Ol(a[1]);i.push(_)}else f.done()}).next(()=>{mt(0===i.length)})})}containsKey(e,t){return tk(e,this.userId,t)}Rn(e){return nk(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tk(n,e,t){const r=ex(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return A_(n).Z({range:a,X:!0},(f,_,w)=>{const[C,S,B]=f;C===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function Tf(n){return Ni(n,"mutations")}function A_(n){return Ni(n,"documentMutations")}function nk(n){return Ni(n,"mutationQueues")}class Ug{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ug(0)}static vn(){return new Ug(-1)}}class cU{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ug(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>It.fromTimestamp(new kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>R_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return R_(e).Z((l,f)=>{const _=jw(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>Ne.waitFor(a)).next(()=>i)}forEachTarget(e,t){return R_(e).Z((r,i)=>{const a=jw(i);t(a)})}Vn(e){return rk(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}Sn(e,t){return rk(e).put("targetGlobalKey",t)}Dn(e,t){return R_(e).put(HN(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Rl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return R_(e).Z({range:i,index:"queryTargetsIndex"},(l,f,_)=>{const w=jw(f);wf(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Sf(e);return t.forEach(l=>{const f=Ns(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),Ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sf(e);return Ne.forEach(t,a=>{const l=Ns(a.path);return Ne.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Sf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sf(e);let a=c();return i.Z({range:r,X:!0},(l,f,_)=>{const w=Ol(l[1]),C=new Je(w);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Ns(t.path),i=IDBKeyRange.bound([r],[ww(r)],!1,!0);let a=0;return Sf(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,f],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}ne(e,t){return R_(e).get(t).next(r=>r?jw(r):null)}}function R_(n){return Ni(n,"targets")}function rk(n){return Ni(n,"targetGlobal")}function Sf(n){return Ni(n,"targetDocuments")}function ik([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class dU{constructor(e){this.xn=e,this.buffer=new Pn(ik),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ik(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Fe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){cu(r)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield lu(r)}yield t.Fn(3e5)}))}}class fU{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ne.resolve(no.at);const r=new dU(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(JN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JN):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,l,f,_,w;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),i_()<=Mo.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-C}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class pU{constructor(e,t){this.db=e,this.garbageCollector=new fU(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return ux(e,r)}removeReference(e,t,r){return ux(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ux(e,t)}Gn(e,t){return function(r,i){let a=!1;return nk(r).tt(l=>tk(r,l,i).next(f=>(f&&(a=!0),Ne.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,f)=>{if(f<=t){const _=this.Gn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),Sf(e).delete([0,Ns(l.path)])))});i.push(_)}}).next(()=>Ne.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ux(e,t)}Kn(e,t){const r=Sf(e);let i,a=no.at;return r.Z({index:"documentTargetsIndex"},([l,f],{path:_,sequenceNumber:w})=>{0===l?(a!==no.at&&t(new Je(Ol(i)),a),a=w,i=_):a=no.at}).next(()=>{a!==no.at&&t(new Je(Ol(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ux(n,e){return Sf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ns(e.path),sequenceNumber:r}));var r}class sk{constructor(){this.changes=new Td(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gU{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Vg(e).put(r)}removeEntry(e,t,r){return Vg(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],tx(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Vn.newInvalidDocument(t);return Vg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(qw(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Vn.newInvalidDocument(t)};return Vg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(qw(t))},(i,a)=>{r={document:this.jn(t,a),size:ox(a)}}).next(()=>r)}getEntries(e,t){let r=Ms();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Ms(),i=new yr(Je.comparator);return this.zn(e,t,(a,l)=>{const f=this.jn(a,l);r=r.insert(a,f),i=i.insert(a,ox(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return Ne.resolve();let i=new Pn(lk);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(qw(i.first()),qw(i.last())),l=i.getIterator();let f=l.getNext();return Vg(e).Z({index:"documentKeyIndex",range:a},(_,w,C)=>{const S=Je.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&lk(f,S)<0;)r(f,null),f=l.getNext();f&&f.isEqual(S)&&(r(f,w),f=l.hasNext()?l.getNext():null),f?C.j(qw(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),tx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vg(e).W(IDBKeyRange.bound(l,f,!0)).next(_=>{let w=Ms();for(const C of _){const S=this.jn(Je.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);S.isFoundDocument()&&(Ml(t,S)||i.has(S.key))&&(w=w.insert(S.key,S))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Ms();const l=uk(t,r),f=uk(t,hs.max());return Vg(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(_,w,C)=>{const S=this.jn(Je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new mU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ak(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}Qn(e,t){return ak(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function eU(n,e){let t;if(e.document)t=TN(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),i=Pg(e.noDocument.readTime);t=Vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Je.fromSegments(e.unknownDocument.path),i=Pg(e.unknownDocument.version);t=Vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new kn(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Vn.newInvalidDocument(e)}}function ok(n){return new gU(n)}class mU extends sk{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Td(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((a,l)=>Ht(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const _=BN(this.Yn.yt,l);i=i.add(a.path.popLast());const w=ox(_);r+=w-f.size,t.push(this.Yn.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=BN(this.Yn.yt,l.convertToNoDocument(It.min()));t.push(this.Yn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),Ne.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function ak(n){return Ni(n,"remoteDocumentGlobal")}function Vg(n){return Ni(n,"remoteDocumentsV14")}function qw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uk(n,e){const t=e.documentKey.path.toArray();return[n,tx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lk(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ht(t[a],r[a]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}class _U{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ck{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Dd(r.mutation,i,qi.empty(),kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,c()).next(()=>r))}getLocalViewOfDocuments(e,t,r=c()){const i=mu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=D_();return a.forEach((f,_)=>{l=l.insert(f,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=mu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,c()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=Ms();const l=s(),f=s();return t.forEach((_,w)=>{const C=r.get(w.key);i.has(w.key)&&(void 0===C||C.mutation instanceof gu)?a=a.insert(w.key,w):void 0!==C?(l.set(w.key,C.mutation.getFieldMask()),Dd(C.mutation,w,C.mutation.getFieldMask(),kn.now())):l.set(w.key,qi.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,C)=>l.set(w,C)),t.forEach((w,C)=>{var S;return f.set(w,new _U(C,null!==(S=l.get(w))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=s();let i=new yr((l,f)=>l-f),a=c();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let C=r.get(_)||qi.empty();C=f.applyToLocalView(w,C),r.set(_,C);const S=(i.get(f.batchId)||c()).add(_);i=i.insert(f.batchId,S)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),w=_.key,C=_.value,S=nA();C.forEach(B=>{if(!a.has(B)){const ee=Yb(t.get(B),r.get(B));null!==ee&&S.set(B,ee),a=a.add(B)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,S))}return Ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Nw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Ne.resolve(mu());let f=-1,_=a;return l.next(w=>Ne.forEach(w,(C,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(C)?Ne.resolve():this.remoteDocumentCache.getEntry(e,C).next(B=>{_=_.insert(C,B)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,c())).next(C=>({batchId:f,changes:tA(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let i=D_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=D_();return this.indexManager.getCollectionParents(e,i).next(l=>Ne.forEach(l,f=>{const _=(w=t,C=f.child(i),new fu(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,C;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((C,S)=>{a=a.insert(C,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,Vn.newInvalidDocument(w)))});let l=D_();return a.forEach((f,_)=>{const w=i.get(f);void 0!==w&&Dd(w.mutation,_,qi.empty(),kn.now()),Ml(t,_)&&(l=l.insert(f,_))}),l})}}class yU{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Xt(r.createTime)}),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:cA(r.bundledQuery),readTime:Xt(r.readTime)}),Ne.resolve();var r}}class vU{constructor(){this.overlays=new yr(Je.comparator),this.es=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mu();return Ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),Ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),Ne.resolve()}getOverlaysForCollection(e,t,r){const i=mu(),a=t.length+1,l=new Je(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return Ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new yr((w,C)=>w-C);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let C=a.get(w.largestBatchId);null===C&&(C=mu(),a=a.insert(w.largestBatchId,C)),C.set(w.getKey(),w)}}const f=mu(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,C)=>f.set(w,C)),!(f.size()>=i)););return Ne.resolve(f)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new lA(t,r));let a=this.es.get(t);void 0===a&&(a=c(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class _A{constructor(){this.ns=new Pn(ki.ss),this.rs=new Pn(ki.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ki(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ki(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Je(new dn([])),r=new ki(t,e),i=new ki(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Je(new dn([])),r=new ki(t,e),i=new ki(t,e+1);let a=c();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ki(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ki{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Je.comparator(e.key,t.key)||Ht(e._s,t._s)}static os(e,t){return Ht(e._s,t._s)||Je.comparator(e.key,t.key)}}class wU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Pn(ki.ss)}checkEmpty(e){return Ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new aA(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.gs=this.gs.add(new ki(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Ne.resolve(l)}lookupMutationBatch(e,t){return Ne.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return Ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ki(t,0),i=new ki(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const f=this.ys(l._s);a.push(f)}),Ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Ht);return t.forEach(i=>{const a=new ki(i,0),l=new ki(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],f=>{r=r.add(f._s)})}),Ne.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const l=new ki(new Je(a),0);let f=new Pn(Ht);return this.gs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_._s)),!0)},l),Ne.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){mt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return Ne.forEach(t.mutations,i=>{const a=new ki(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ki(t,0),i=this.gs.firstAfterOrEqual(r);return Ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ne.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class EU{constructor(e){this.Es=e,this.docs=new yr(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ne.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let r=Ms();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Vn.newInvalidDocument(i))}),Ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ms();const l=t.path,f=new Je(l.child("")),_=this.docs.getIteratorFrom(f);for(;_.hasNext();){const{key:w,value:{document:C}}=_.getNext();if(!l.isPrefixOf(w.path))break;w.path.length>l.length+1||l_(xb(C),r)<=0||(i.has(C.key)||Ml(t,C))&&(a=a.insert(C.key,C.mutableCopy()))}return Ne.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ut()}As(e,t){return Ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new IU(this)}getSize(e){return Ne.resolve(this.size)}}class IU extends sk{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),Ne.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class CU{constructor(e){this.persistence=e,this.Rs=new Td(t=>Rl(t),wf),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.bs=0,this.Ps=new _A,this.targetCount=0,this.vs=Ug.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),Ne.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ug(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Dn(t),Ne.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),Ne.waitFor(a).next(()=>i)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return Ne.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),Ne.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),Ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return Ne.resolve(r)}containsKey(e,t){return Ne.resolve(this.Ps.containsKey(t))}}class dk{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new no(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new CU(this),this.indexManager=new uU,this.remoteDocumentCache=new EU(r=>this.referenceDelegate.xs(r)),this.yt=new VN(t),this.Ns=new yU(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new wU(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ze("MemoryPersistence","Starting transaction:",e);const i=new bU(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return Ne.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class bU extends Ew{constructor(e){super(),this.currentSequenceNumber=e}}class lx{constructor(e){this.persistence=e,this.Fs=new _A,this.$s=null}static Bs(e){return new lx(e)}get Ls(){if(this.$s)return this.$s;throw ut()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),Ne.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Ls,r=>{const i=Je.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,It.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Ne.or([()=>Ne.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class xU{constructor(e){this.yt=e}$(e,t,r,i){const a=new Dg("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PN,{unique:!0}),f.createObjectStore("documentMutations"),hk(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=Ne.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),hk(e)),l=l.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,_){return _.store("mutations").W().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PN,{unique:!0});const C=_.store("mutations"),S=w.map(B=>C.put(B));return Ne.waitFor(S)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:Z2});_.createIndex("collectionPathOverlayIndex",Y2,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Q2,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:U2});_.createIndex("documentKeyIndex",V2),_.createIndex("collectionGroupIndex",B2)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:z2}).createIndex("sequenceNumberIndex",W2,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:q2}).createIndex("documentKeyIndex",K2,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=ox(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>Ne.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>Ne.forEach(f,_=>{mt(_.userId===a.userId);const w=Og(this.yt,_);return ek(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,f)=>{const _=new dn(l),w=[0,Ns(_)];a.push(t.get(w).next(C=>C?Ne.resolve():t.put({targetId:0,path:Ns(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ne.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:G2});const r=t.store("collectionParents"),i=new mA,a=l=>{if(i.add(l)){const f=l.lastSegment(),_=l.popLast();return r.put({collectionId:f,parent:Ns(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,f)=>{const _=new dn(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,f,_],w)=>{const C=Ol(f);return a(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=jw(i),l=HN(this.yt,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const f=t.store("remoteDocumentsV14"),_=(w=l,w.document?new Je(dn.fromString(w.document.name).popFirst(5)):w.noDocument?Je.fromSegments(w.noDocument.path):w.unknownDocument?Je.fromSegments(w.unknownDocument.path):ut()).path.toArray();var w;const C={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(C))}).next(()=>Ne.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=ok(this.yt),a=new dk(lx.Bs,this.yt.ie);return r.W().next(l=>{const f=new Map;return l.forEach(_=>{var w;let C=null!==(w=f.get(_.userId))&&void 0!==w?w:c();Og(this.yt,_).keys().forEach(S=>C=C.add(S)),f.set(_.userId,C)}),Ne.forEach(f,(_,w)=>{const C=new kr(w),S=nx.re(this.yt,C),B=a.getIndexManager(C),ee=ax.re(C,this.yt,B,a.referenceDelegate);return new ck(i,ee,S,B).recalculateAndSaveOverlaysForDocumentKeys(new oA(t,no.at),_).next()})})}}function hk(n){n.createObjectStore("targetDocuments",{keyPath:j2}).createIndex("documentTargetsIndex",$2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",H2,{unique:!0}),n.createObjectStore("targetGlobal")}const yA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vA{constructor(e,t,r,i,a,l,f,_,w,C,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=f,this.Js=w,this.Ys=C,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=B=>Promise.resolve(),!vA.C())throw new Ke(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pU(this,i),this.ii=t+"main",this.yt=new VN(_),this.ri=new No(this.ii,this.Xs,new xU(this.yt)),this.Cs=new cU(this.referenceDelegate,this.yt),this.remoteDocumentCache=ok(this.yt),this.Ns=new tU,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ke(Pe.FAILED_PRECONDITION,yA);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new no(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Fe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Fe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(cu(e))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Kw(e).get("owner").next(t=>Ne.resolve(this.mi(t)))}gi(e){return cx(e).delete(this.clientId)}yi(){var e=this;return(0,Fe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ni(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),f=a.filter(_=>-1===l.indexOf(_));return Ne.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ne.resolve(!0):Kw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ke(Pe.FAILED_PRECONDITION,yA);return!1}}return!(!this.networkEnabled||!this.inForeground)||cx(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Fe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new oA(t,no.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>cx(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return ax.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lU(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return nx.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?J2:14===l?UN:13===l?LN:12===l?X2:11===l?FN:void ut();var l;let f;return this.ri.runTransaction(e,i,a,_=>(f=new oA(_,this.Ss?this.Ss.next():no.at),"readwrite-primary"===t?this.fi(f).next(w=>!!w||this.di(f)).next(w=>{if(!w)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ke(Pe.FAILED_PRECONDITION,Db);return r(f)}).next(w=>this.wi(f).next(()=>w)):this.Vi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Vi(e){return Kw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ke(Pe.FAILED_PRECONDITION,yA)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kw(e).put("owner",t)}static C(){return No.C()}_i(e){const t=Kw(e);return t.get("owner").next(r=>this.mi(r)?(Ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ne.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,G.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kw(n){return Ni(n,"owner")}function cx(n){return Ni(n,"clientMetadata")}function wA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class EA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=c(),i=c();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new EA(e,t.fromCache,r,i)}}class fk{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(jS(t))return Ne.resolve(null);let r=fs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=kw(t,null,"F"),r=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=c(...a);return this.Ni.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Fi(t,f);return this.$i(t,w,l,_.readTime)?this.ki(e,kw(t,null,"F")):this.Bi(e,w,t,_)}))})))}Oi(e,t,r,i){return jS(t)||i.isEqual(It.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(i_()<=Mo.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pw(t)),this.Bi(e,l,t,bb(i,-1)))})}Fi(e,t){let r=new Pn(zb(e));return t.forEach((i,a)=>{Ml(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return i_()<=Mo.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",Pw(t)),this.Ni.getDocumentsMatchingQuery(e,t,hs.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class DU{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new yr(Ht),this.Ui=new Td(a=>Rl(a),wf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ck(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function pk(n,e,t,r){return new DU(n,e,t,r)}function gk(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,Fe.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let _=c();for(const w of i){l.push(w.batchId);for(const C of w.mutations)_=_.add(C.key)}for(const w of a){f.push(w.batchId);for(const C of w.mutations)_=_.add(C.key)}return t.localDocuments.getDocuments(r,_).next(w=>({ji:w,removedBatchIds:l,addedBatchIds:f}))})})}),IA.apply(this,arguments)}function TU(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,f,_,w){const C=_.batch,S=C.keys();let B=Ne.resolve();return S.forEach(ee=>{B=B.next(()=>w.getEntry(f,ee)).next(le=>{const Oe=_.docVersions.get(ee);mt(null!==Oe),le.version.compareTo(Oe)<0&&(C.applyToRemoteDocument(le,_),le.isValidDocument()&&(le.setReadTime(_.commitVersion),w.addEntry(le)))})}),B.next(()=>l.mutationQueue.removeMutationBatch(f,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=c();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(f=f.add(l.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function mk(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function SU(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const f=[];e.targetChanges.forEach((C,S)=>{const B=i.get(S);if(!B)return;f.push(t.Cs.removeMatchingKeys(a,C.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,C.addedDocuments,S)));let ee=B.withSequenceNumber(a.currentSequenceNumber);var le,Oe,je;e.targetMismatches.has(S)?ee=ee.withResumeToken(_r.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):C.resumeToken.approximateByteSize()>0&&(ee=ee.withResumeToken(C.resumeToken,r)),i=i.insert(S,ee),Oe=ee,je=C,(0===(le=B).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-le.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,ee))});let _=Ms(),w=c();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),f.push(_k(a,l,e.documentUpdates).next(C=>{_=C.Wi,w=C.zi})),!r.isEqual(It.min())){const C=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(C)}return Ne.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.qi=i,a))}function _k(n,e,t){let r=c(),i=c();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ms();return t.forEach((f,_)=>{const w=a.get(f);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(It.min())?(e.removeEntry(f,_.readTime),l=l.insert(f,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(f,_)):Ze("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",_.version)}),{Wi:l,zi:i}})}function AU(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M_(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,Ne.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new xf(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function N_(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,Fe.Z)(function*(n,e,t){const r=tt(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!cu(l))throw l;Ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),CA.apply(this,arguments)}function dx(n,e,t){const r=tt(n);let i=It.min(),a=c();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,_,w){const C=tt(f),S=C.Ui.get(w);return void 0!==S?Ne.resolve(C.qi.get(S)):C.Cs.getTargetData(_,w)}(r,l,fs(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,f.targetId).next(_=>{a=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:It.min(),t?a:c())).next(f=>(wk(r,Gb(e),f),{documents:f,Hi:a})))}function yk(n,e){const t=tt(n),r=tt(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function vk(n,e){const t=tt(n),r=t.Ki.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,bb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wk(t,e,i),i))}function wk(n,e,t){let r=n.Ki.get(e)||It.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function bA(){return bA=(0,Fe.Z)(function*(n,e,t,r){const i=tt(n);let a=c(),l=Ms();for(const w of t){const C=e.Ji(w.metadata.name);w.document&&(a=a.add(C));const S=e.Yi(w);S.setReadTime(e.Xi(w.metadata.readTime)),l=l.insert(C,S)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield M_(i,(w=r,fs(Rg(dn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>_k(w,f,l).next(C=>(f.apply(w),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Cs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,C.Wi,C.zi)).next(()=>C.Wi)))}),bA.apply(this,arguments)}function MU(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,Fe.Z)(function*(n,e,t=c()){const r=yield M_(n,fs(cA(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Xt(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(_r.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),xA.apply(this,arguments)}function Ek(n,e){return`firestore_clients_${n}_${e}`}function Ik(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function DA(n,e){return`firestore_targets_${n}_${e}`}class hx{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ke(i.error.code,i.error.message))),l?new hx(e,t,i.state,a):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ke(r.error.code,r.error.message))),a?new Zw(e,r.state,i):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=g();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=kS(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new fx(e,a):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class TA{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new TA(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class SA{constructor(){this.activeTargetIds=g()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AA{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new yr(Ht),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Ek(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new SA),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Fe.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(Ek(e.persistenceKey,i));if(a){const l=fx.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(DA(this.persistenceKey,e));if(r){const i=Zw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(DA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ze("SharedClientState","READ",e,t),t}setItem(e,t){Ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=no.at;if(null!=a)try{const f=JSON.parse(a);mt("number"==typeof f),l=f}catch(f){mr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==no.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new hx(this.currentUser,e,t,r),a=Ik(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=Ik(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=DA(this.persistenceKey,e),a=new Zw(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return fx.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return hx.Zi(new kr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Zw.Zi(i,t)}yr(e){return TA.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],f=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.Br(l,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=g();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Ck{constructor(){this.Lr=new SA,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new SA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NU{Ur(e){}shutdown(){}}class bk{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PU{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class OU extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Ze("RestConnection","Sending: ",l,r);const f={};return this.lo(f,i,a),this.fo(e,l,f,r).then(_=>(Ze("RestConnection","Received: ",_),_),_=>{throw bl("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${kU[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const f=new DS;f.setWithCredentials(!0),f.listenOnce(gw.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case n_.NO_ERROR:const w=f.getResponseJson();Ze("Connection","XHR received:",JSON.stringify(w)),a(w);break;case n_.TIMEOUT:Ze("Connection",'RPC "'+e+'" timed out'),l(new Ke(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case n_.HTTP_ERROR:const C=f.getStatus();if(Ze("Connection",'RPC "'+e+'" failed with status:',C,"response text:",f.getResponseText()),C>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const B=S?.error;if(B&&B.status&&B.message){const ee=function(le){const Oe=le.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(Oe)>=0?Oe:Pe.UNKNOWN}(B.status);l(new Ke(ee,B.message))}else l(new Ke(Pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Ke(Pe.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ze("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=fw(),l=pw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new xS({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=i.join("");Ze("Connection","Creating WebChannel: "+_,f);const w=a.createWebChannel(_,f);let C=!1,S=!1;const B=new PU({Hr:le=>{S?Ze("Connection","Not sending because WebChannel is closed:",le):(C||(Ze("Connection","Opening WebChannel transport."),w.open(),C=!0),Ze("Connection","WebChannel sending:",le),w.send(le))},Jr:()=>w.close()}),ee=(le,Oe,je)=>{le.listen(Oe,_t=>{try{je(_t)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return ee(w,r_.EventType.OPEN,()=>{S||Ze("Connection","WebChannel transport opened.")}),ee(w,r_.EventType.CLOSE,()=>{S||(S=!0,Ze("Connection","WebChannel transport closed"),B.io())}),ee(w,r_.EventType.ERROR,le=>{S||(S=!0,bl("Connection","WebChannel transport errored:",le),B.io(new Ke(Pe.UNAVAILABLE,"The operation could not be completed")))}),ee(w,r_.EventType.MESSAGE,le=>{var Oe;if(!S){const je=le.data[0];mt(!!je);const Ct=je.error||(null===(Oe=je[0])||void 0===Oe?void 0:Oe.error);if(Ct){Ze("Connection","WebChannel received error:",Ct);const ct=Ct.status;let pt=function(Wt){const Mr=zr[Wt];if(void 0!==Mr)return XS(Mr)}(ct),Ft=Ct.message;void 0===pt&&(pt=Pe.INTERNAL,Ft="Unknown error status: "+ct+" with message "+Ct.message),S=!0,B.io(new Ke(pt,Ft)),w.close()}else Ze("Connection","WebChannel received:",je),B.ro(je)}}),ee(l,mw.STAT_EVENT,le=>{le.stat===_b.PROXY?Ze("Connection","Detected buffering proxy"):le.stat===_b.NOPROXY&&Ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{B.so()},0),B}}function xk(){return typeof window<"u"?window:null}function px(){return typeof document<"u"?document:null}function Yw(n){return new Ot(n,!0)}class RA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Dk{constructor(e,t,r,i,a,l,f,_){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new RA(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Fe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Fe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Fe.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ke(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Fe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FU extends Dk{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function A2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ut(),i=e.targetChange.targetIds||[],a=function(_,w){return _.wt?(mt(void 0===w||"string"==typeof w),_r.fromBase64String(w||"")):(mt(void 0===w||w instanceof Uint8Array),_r.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(_){const w=void 0===_.code?Pe.UNKNOWN:XS(_.code);return new Ke(w,_.message||"")}(l);t=new U(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Pl(n,r.document.name),a=Xt(r.document.updateTime),l=r.document.createTime?Xt(r.document.createTime):It.min(),f=new Mi({mapValue:{fields:r.document.fields}}),_=Vn.newFoundDocument(i,a,l,f);t=new b(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Pl(n,r.document),a=r.readTime?Xt(r.readTime):It.min(),l=Vn.newNoDocument(i,a);t=new b([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Pl(n,r.document);t=new b([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,a=new YS(r.count||0);t=new T(r.targetId,a)}}var _;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return It.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?It.min():a.readTime?Xt(a.readTime):It.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Bw(this.yt),t.addTarget=function(i,a){let l;const f=a.target;return l=Id(f)?{documents:SN(i,f)}:{query:sA(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Gt(i,a.resumeToken):a.snapshotVersion.compareTo(It.min())>0&&(l.readTime=qe(i,a.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function M2(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Bw(this.yt),t.removeTarget=e,this.Bo(t)}}class LU extends Dk{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function R2(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,i){let a=Xt(r.updateTime?r.updateTime:i);return a.isEqual(It.min())&&(a=Xt(i)),new Zb(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Xt(e.commitTime);return this.listener.Zo(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Bw(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hw(this.yt,r))};this.Bo(t)}}class UU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Ke(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ke(Pe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ke(Pe.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class BU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(mr(t),this.ou=!1):Ze("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class HU{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(f=>{r.enqueueAndForget((0,Fe.Z)(function*(){var _;Sd(l)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Fe.Z)(function*(w){const C=tt(w);C._u.add(4),yield k_(C),C.gu.set("Unknown"),C._u.delete(4),yield Qw(C)}),function(w){return _.apply(this,arguments)})(l))}))}),this.gu=new BU(r,i)}}function Qw(n){return NA.apply(this,arguments)}function NA(){return NA=(0,Fe.Z)(function*(n){if(Sd(n))for(const e of n.wu)yield e(!0)}),NA.apply(this,arguments)}function k_(n){return kA.apply(this,arguments)}function kA(){return kA=(0,Fe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),kA.apply(this,arguments)}function gx(n,e){const t=tt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),FA(t)?OA(t):O_(t).ko()&&PA(t,e))}function Xw(n,e){const t=tt(n),r=O_(t);t.du.delete(e),r.ko()&&Tk(t,e),0===t.du.size&&(r.ko()?r.Fo():Sd(t)&&t.gu.set("Unknown"))}function PA(n,e){n.yu.Ot(e.targetId),O_(n).zo(e)}function Tk(n,e){n.yu.Ot(e),O_(n).Ho(e)}function OA(n){n.yu=new he({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),O_(n).start(),n.gu.uu()}function FA(n){return Sd(n)&&!O_(n).No()&&n.du.size>0}function Sd(n){return 0===tt(n)._u.size}function Sk(n){n.yu=void 0}function jU(n){return LA.apply(this,arguments)}function LA(){return LA=(0,Fe.Z)(function*(n){n.du.forEach((e,t)=>{PA(n,e)})}),LA.apply(this,arguments)}function $U(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,Fe.Z)(function*(n,e){Sk(n),FA(n)?(n.gu.hu(e),OA(n)):n.gu.set("Unknown")}),UA.apply(this,arguments)}function GU(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,Fe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof U&&2===e.state&&e.cause)try{yield(r=(0,Fe.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mx(n,r)}else if(e instanceof b?n.yu.Kt(e):e instanceof T?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(It.min()))try{const r=yield mk(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.Zt(a);return l.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.du.get(_);w&&i.du.set(_,w.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const _=i.du.get(f);if(!_)return;i.du.set(f,_.withResumeToken(_r.EMPTY_BYTE_STRING,_.snapshotVersion)),Tk(i,f);const w=new xf(_.target,f,1,_.sequenceNumber);PA(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ze("RemoteStore","Failed to raise snapshot:",r),yield mx(n,r)}var r}),VA.apply(this,arguments)}function mx(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,Fe.Z)(function*(n,e,t){if(!cu(e))throw e;n._u.add(1),yield k_(n),n.gu.set("Offline"),t||(t=()=>mk(n.localStore)),n.asyncQueue.enqueueRetryable((0,Fe.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Qw(n)}))}),BA.apply(this,arguments)}function Ak(n,e){return e().catch(t=>mx(n,t,e))}function P_(n){return HA.apply(this,arguments)}function HA(){return HA=(0,Fe.Z)(function*(n){const e=tt(n),t=Af(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;zU(e);)try{const i=yield AU(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,WU(e,i)}catch(i){yield mx(e,i)}Rk(e)&&Mk(e)}),HA.apply(this,arguments)}function zU(n){return Sd(n)&&n.fu.length<10}function WU(n,e){n.fu.push(e);const t=Af(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Rk(n){return Sd(n)&&!Af(n).No()&&n.fu.length>0}function Mk(n){Af(n).start()}function qU(n){return jA.apply(this,arguments)}function jA(){return jA=(0,Fe.Z)(function*(n){Af(n).eu()}),jA.apply(this,arguments)}function KU(n){return $A.apply(this,arguments)}function $A(){return $A=(0,Fe.Z)(function*(n){const e=Af(n);for(const t of n.fu)e.Xo(t.mutations)}),$A.apply(this,arguments)}function ZU(n,e,t){return GA.apply(this,arguments)}function GA(){return GA=(0,Fe.Z)(function*(n,e,t){const r=n.fu.shift(),i=uA.from(r,e,t);yield Ak(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield P_(n)}),GA.apply(this,arguments)}function YU(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,Fe.Z)(function*(n,e){var t;e&&Af(n).Yo&&(yield(t=(0,Fe.Z)(function*(r,i){if(QS(a=i.code)&&a!==Pe.ABORTED){const l=r.fu.shift();Af(r).Mo(),yield Ak(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield P_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Rk(n)&&Mk(n)}),zA.apply(this,arguments)}function Nk(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,Fe.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const r=Sd(t);t._u.add(3),yield k_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Qw(t)}),WA.apply(this,arguments)}function qA(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,Fe.Z)(function*(n,e){const t=tt(n);e?(t._u.delete(2),yield Qw(t)):e||(t._u.add(2),yield k_(t),t.gu.set("Unknown"))}),KA.apply(this,arguments)}function O_(n){return n.pu||(n.pu=function(e,t,r){const i=tt(e);return i.su(),new FU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:jU.bind(null,n),Zr:$U.bind(null,n),Wo:GU.bind(null,n)}),n.wu.push(function(){var e=(0,Fe.Z)(function*(t){t?(n.pu.Mo(),FA(n)?OA(n):n.gu.set("Unknown")):(yield n.pu.stop(),Sk(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Af(n){return n.Iu||(n.Iu=function(e,t,r){const i=tt(e);return i.su(),new LU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:qU.bind(null,n),Zr:YU.bind(null,n),tu:KU.bind(null,n),Zo:ZU.bind(null,n)}),n.wu.push(function(){var e=(0,Fe.Z)(function*(t){t?(n.Iu.Mo(),yield P_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ze("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class ZA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new ZA(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ke(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F_(n,e){if(mr("AsyncQueue",`${e}: ${n}`),cu(n))return new Ke(Pe.UNAVAILABLE,`${e}: ${n}`);throw n}class L_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=D_(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new L_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof L_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new L_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class kk{constructor(){this.Tu=new yr(Je.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ut():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class U_{constructor(e,t,r,i,a,l,f,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new U_(e,t,L_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&I_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class QU{constructor(){this.Au=void 0,this.listeners=[]}}class XU{constructor(){this.queries=new Td(e=>$S(e),I_),this.onlineState="Unknown",this.Ru=new Set}}function YA(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,Fe.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new QU),i)try{a.Au=yield t.onListen(r)}catch(l){const f=F_(l,`Initialization of query '${Pw(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&e1(t)}),QA.apply(this,arguments)}function XA(n,e){return JA.apply(this,arguments)}function JA(){return JA=(0,Fe.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),JA.apply(this,arguments)}function JU(n,e){const t=tt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Pu(i)&&(r=!0);l.Au=i}}r&&e1(t)}function eV(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function e1(n){n.Ru.forEach(e=>{e.next()})}class t1{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new U_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=U_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class tV{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Pk{constructor(e){this.yt=e}Ji(e){return Pl(this.yt,e)}Yi(e){return e.metadata.exists?TN(this.yt,e.document,!1):Vn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Xt(e)}}class nV{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ok(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=dn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Pk(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||c()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,Fe.Z)(function*(){const t=yield function RU(n,e,t,r){return bA.apply(this,arguments)}(e.localStore,new Pk(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield MU(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Ok(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Fk{constructor(e){this.key=e}}class Lk{constructor(e){this.key=e}}class Uk{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=c(),this.mutatedKeys=c(),this.Gu=zb(e),this.Qu=new L_(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new kk,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const B=i.get(C),ee=Ml(this.query,S)?S:null,le=!!B&&this.mutatedKeys.has(B.key),Oe=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let je=!1;B&&ee?B.data.isEqual(ee.data)?le!==Oe&&(r.track({type:3,doc:ee}),je=!0):this.Hu(B,ee)||(r.track({type:2,doc:ee}),je=!0,(_&&this.Gu(ee,_)>0||w&&this.Gu(ee,w)<0)&&(f=!0)):!B&&ee?(r.track({type:0,doc:ee}),je=!0):B&&!ee&&(r.track({type:1,doc:B}),je=!0,(_||w)&&(f=!0)),je&&(ee?(l=l.add(ee),a=Oe?a.add(C):a.delete(C)):(l=l.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Qu:l,zu:r,$i:f,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((w,C)=>function(S,B){const ee=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return ee(S)-ee(B)}(w.type,C.type)||this.Gu(w.doc,C.doc)),this.Ju(r);const l=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,_=f!==this.Uu;return this.Uu=f,0!==a.length||_?{snapshot:new U_(this.query,e.Qu,i,a,e.mutatedKeys,0===f,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new kk,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=c(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Lk(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Fk(r))}),t}tc(e){this.qu=e.Hi,this.Ku=c();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return U_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class rV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iV{constructor(e){this.key=e,this.nc=!1}}class sV{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Td(f=>$S(f),I_),this.rc=new Map,this.oc=new Set,this.uc=new yr(Je.comparator),this.cc=new Map,this.ac=new _A,this.hc={},this.lc=new Map,this.fc=Ug.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function oV(n,e){return n1.apply(this,arguments)}function n1(){return n1=(0,Fe.Z)(function*(n,e){const t=x1(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield M_(t.localStore,fs(e));t.isPrimaryClient&&gx(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield r1(t,e,r,"current"===f,l.resumeToken)}return i}),n1.apply(this,arguments)}function r1(n,e,t,r,i){return i1.apply(this,arguments)}function i1(){return i1=(0,Fe.Z)(function*(n,e,t,r,i){n._c=(S,B,ee)=>{return(le=(0,Fe.Z)(function*(Oe,je,_t,Ct){let ct=je.view.Wu(_t);ct.$i&&(ct=yield dx(Oe.localStore,je.query,!1).then(({documents:Wt})=>je.view.Wu(Wt,ct)));const pt=Ct&&Ct.targetChanges.get(je.targetId),Ft=je.view.applyChanges(ct,Oe.isPrimaryClient,pt);return p1(Oe,je.targetId,Ft.Xu),Ft.snapshot}),function(Oe,je,_t,Ct){return le.apply(this,arguments)})(n,S,B,ee);var le};const a=yield dx(n.localStore,e,!0),l=new Uk(e,a.Hi),f=l.Wu(a.documents),_=I.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(f,n.isPrimaryClient,_);p1(n,t,w.Xu);const C=new rV(e,t,l);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),w.snapshot}),i1.apply(this,arguments)}function aV(n,e){return s1.apply(this,arguments)}function s1(){return s1=(0,Fe.Z)(function*(n,e){const t=tt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!I_(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield N_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Xw(t.remoteStore,r.targetId),V_(t,r.targetId)}).catch(lu))):(V_(t,r.targetId),yield N_(t.localStore,r.targetId,!0))}),s1.apply(this,arguments)}function o1(){return o1=(0,Fe.Z)(function*(n,e,t){const r=D1(n);try{const i=yield function(a,l){const f=tt(a),_=kn.now(),w=l.reduce((B,ee)=>B.add(ee.key),c());let C,S;return f.persistence.runTransaction("Locally write mutations","readwrite",B=>{let ee=Ms(),le=c();return f.Gi.getEntries(B,w).next(Oe=>{ee=Oe,ee.forEach((je,_t)=>{_t.isValidDocument()||(le=le.add(je))})}).next(()=>f.localDocuments.getOverlayedDocuments(B,ee)).next(Oe=>{C=Oe;const je=[];for(const _t of l){const Ct=IN(_t,C.get(_t.key).overlayedDocument);null!=Ct&&je.push(new gu(_t.key,Ct,y_(Ct.value.mapValue),jn.exists(!0)))}return f.mutationQueue.addMutationBatch(B,_,je,l)}).next(Oe=>{S=Oe;const je=Oe.applyToLocalDocumentSet(C,le);return f.documentOverlayCache.saveOverlays(B,Oe.batchId,je)})}).then(()=>({batchId:S.batchId,changes:tA(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let _=a.hc[a.currentUser.toKey()];_||(_=new yr(Ht)),_=_.insert(l,f),a.hc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Ad(r,i.changes),yield P_(r.remoteStore)}catch(i){const a=F_(i,"Failed to persist write");t.reject(a)}}),o1.apply(this,arguments)}function Vk(n,e){return a1.apply(this,arguments)}function a1(){return a1=(0,Fe.Z)(function*(n,e){const t=tt(n);try{const r=yield SU(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?mt(l.nc):i.removedDocuments.size>0&&(mt(l.nc),l.nc=!1))}),yield Ad(t,r,e)}catch(r){yield lu(r)}}),a1.apply(this,arguments)}function Bk(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const f=l.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=tt(a);f.onlineState=l;let _=!1;f.queries.forEach((w,C)=>{for(const S of C.listeners)S.bu(l)&&(_=!0)}),_&&e1(f)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lV(n,e,t){return u1.apply(this,arguments)}function u1(){return u1=(0,Fe.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new yr(Je.comparator);l=l.insert(a,Vn.newNoDocument(a,It.min()));const f=c().add(a),_=new v(It.min(),new Map,new Pn(Ht),l,f);yield Vk(r,_),r.uc=r.uc.remove(a),r.cc.delete(e),g1(r)}else yield N_(r.localStore,e,!1).then(()=>V_(r,e,t)).catch(lu)}),u1.apply(this,arguments)}function cV(n,e){return l1.apply(this,arguments)}function l1(){return l1=(0,Fe.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield TU(t.localStore,e);f1(t,r,null),h1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ad(t,i)}catch(i){yield lu(i)}}),l1.apply(this,arguments)}function dV(n,e,t){return c1.apply(this,arguments)}function c1(){return c1=(0,Fe.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(a,l){const f=tt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.mutationQueue.lookupMutationBatch(_,l).next(C=>(mt(null!==C),w=C.keys(),f.mutationQueue.removeMutationBatch(_,C))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>f.localDocuments.getDocuments(_,w))})}(r.localStore,e);f1(r,e,t),h1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ad(r,i)}catch(i){yield lu(i)}}),c1.apply(this,arguments)}function d1(){return d1=(0,Fe.Z)(function*(n,e){const t=tt(n);Sd(t.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=tt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=F_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),d1.apply(this,arguments)}function h1(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function f1(n,e,t){const r=tt(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function V_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Hk(n,r)})}function Hk(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Xw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),g1(n))}function p1(n,e,t){for(const r of t)r instanceof Fk?(n.ac.addReference(r.key,e),fV(n,r)):r instanceof Lk?(Ze("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Hk(n,r.key)):ut()}function fV(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ze("SyncEngine","New document in limbo: "+t),n.oc.add(r),g1(n))}function g1(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Je(dn.fromString(e)),r=n.fc.next();n.cc.set(r,new iV(t)),n.uc=n.uc.insert(t,r),gx(n.remoteStore,new xf(fs(Rg(t.path)),r,2,no.at))}}function Ad(n,e,t){return m1.apply(this,arguments)}function m1(){return m1=(0,Fe.Z)(function*(n,e,t){const r=tt(n),i=[],a=[],l=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,_)=>{l.push(r._c(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const C=EA.Ci(_.targetId,w);a.push(C)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(f=(0,Fe.Z)(function*(_,w){const C=tt(_);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Ne.forEach(w,B=>Ne.forEach(B.Si,ee=>C.persistence.referenceDelegate.addReference(S,B.targetId,ee)).next(()=>Ne.forEach(B.Di,ee=>C.persistence.referenceDelegate.removeReference(S,B.targetId,ee)))))}catch(S){if(!cu(S))throw S;Ze("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const B=S.targetId;if(!S.fromCache){const ee=C.qi.get(B),Oe=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);C.qi=C.qi.insert(B,Oe)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))}),m1.apply(this,arguments)}function pV(n,e){return _1.apply(this,arguments)}function _1(){return _1=(0,Fe.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){Ze("SyncEngine","User change. New user:",e.toKey());const r=yield gk(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(f=>{f.reject(new Ke(Pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ad(t,r.ji)}var i}),_1.apply(this,arguments)}function gV(n,e){const t=tt(n),r=t.cc.get(e);if(r&&r.nc)return c().add(r.key);{let i=c();const a=t.rc.get(e);if(!a)return i;for(const l of a){const f=t.ic.get(l);i=i.unionWith(f.view.ju)}return i}}function mV(n,e){return y1.apply(this,arguments)}function y1(){return y1=(0,Fe.Z)(function*(n,e){const t=tt(n),r=yield dx(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&p1(t,e.targetId,i.Xu),i}),y1.apply(this,arguments)}function _V(n,e){return v1.apply(this,arguments)}function v1(){return v1=(0,Fe.Z)(function*(n,e){const t=tt(n);return vk(t.localStore,e).then(r=>Ad(t,r))}),v1.apply(this,arguments)}function yV(n,e,t,r){return w1.apply(this,arguments)}function w1(){return w1=(0,Fe.Z)(function*(n,e,t,r){const i=tt(n),a=yield function(l,f){const _=tt(l),w=tt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",C=>w.Tn(C,f).next(S=>S?_.localDocuments.getDocuments(C,S):Ne.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield P_(i.remoteStore):"acknowledged"===t||"rejected"===t?(f1(i,e,r||null),h1(i,e),f=e,tt(tt(i.localStore).mutationQueue).An(f)):ut(),yield Ad(i,a)):Ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),w1.apply(this,arguments)}function E1(){return E1=(0,Fe.Z)(function*(n,e){const t=tt(n);if(x1(t),D1(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield jk(t,r.toArray());t.dc=!0,yield qA(t.remoteStore,!0);for(const a of i)gx(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(V_(t,l),N_(t.localStore,l,!0))),Xw(t.remoteStore,l)}),yield i,yield jk(t,r),function(a){const l=tt(a);l.cc.forEach((f,_)=>{Xw(l.remoteStore,_)}),l.ac.fs(),l.cc=new Map,l.uc=new yr(Je.comparator)}(t),t.dc=!1,yield qA(t.remoteStore,!1)}}),E1.apply(this,arguments)}function jk(n,e,t){return I1.apply(this,arguments)}function I1(){return I1=(0,Fe.Z)(function*(n,e,t){const r=tt(n),i=[],a=[];for(const l of e){let f;const _=r.rc.get(l);if(_&&0!==_.length){f=yield M_(r.localStore,fs(_[0]));for(const w of _){const C=r.ic.get(w),S=yield mV(r,C);S.snapshot&&a.push(S.snapshot)}}else{const w=yield yk(r.localStore,l);f=yield M_(r.localStore,w),yield r1(r,$k(w),l,!1,f.resumeToken)}i.push(f)}return r.sc.Wo(a),i}),I1.apply(this,arguments)}function $k(n){return HS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function wV(n){const e=tt(n);return tt(tt(e.localStore).persistence).vi()}function EV(n,e,t,r){return C1.apply(this,arguments)}function C1(){return C1=(0,Fe.Z)(function*(n,e,t,r){const i=tt(n);if(i.dc)return void Ze("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield vk(i.localStore,Gb(a[0])),f=v.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_r.EMPTY_BYTE_STRING);yield Ad(i,l,f);break}case"rejected":yield N_(i.localStore,e,!0),V_(i,e,r);break;default:ut()}}),C1.apply(this,arguments)}function IV(n,e,t){return b1.apply(this,arguments)}function b1(){return b1=(0,Fe.Z)(function*(n,e,t){const r=x1(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Ze("SyncEngine","Adding an already active target "+i);continue}const a=yield yk(r.localStore,i),l=yield M_(r.localStore,a);yield r1(r,$k(a),l.targetId,!1,l.resumeToken),gx(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield N_(r.localStore,i,!1).then(()=>{Xw(r.remoteStore,i),V_(r,i)}).catch(lu))}}),b1.apply(this,arguments)}function x1(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lV.bind(null,e),e.sc.Wo=JU.bind(null,e.eventManager),e.sc.wc=eV.bind(null,e.eventManager),e}function D1(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dV.bind(null,e),e}class Gk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Fe.Z)(function*(){t.yt=Yw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return pk(this.persistence,new fk,e.initialUser,this.yt)}yc(e){return new dk(lx.Bs,this.yt)}gc(e){return new Ck}terminate(){var e=this;return(0,Fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zk extends Gk{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Fe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield D1(r.Ac.syncEngine),yield P_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return pk(this.persistence,new fk,e.initialUser,this.yt)}Tc(e,t){return new hU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new vN(t,this.persistence);return new Mb(e.asyncQueue,r)}yc(e){const t=wA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ro.withCacheSize(this.cacheSizeBytes):ro.DEFAULT;return new vA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xk(),px(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Ck}}class bV extends zk{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Fe.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof AA&&(r.sharedClientState.syncEngine={Fr:yV.bind(null,i),$r:EV.bind(null,i),Br:IV.bind(null,i),vi:wV.bind(null,i),Mr:_V.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Fe.Z)(function*(l){yield function vV(n,e){return E1.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=xk();if(!AA.C(t))throw new Ke(Pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new AA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class T1{initialize(e,t){var r=this;return(0,Fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Bk(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=pV.bind(null,r.syncEngine),yield qA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new XU}createDatastore(e){const t=Yw(e.databaseInfo.databaseId),r=new OU(e.databaseInfo);return new UU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>Bk(this.syncEngine,f,0),l=bk.C()?new bk:new NU,new HU(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,_,w){const C=new sV(r,i,a,l,f,_);return w&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Fe.Z)(function*(t){const r=tt(t);Ze("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield k_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function S1(n,e,t){if(!t)throw new Ke(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Wk(n,e,t,r){if(!0===e&&!0===r)throw new Ke(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qk(n){if(!Je.isDocumentKey(n))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kk(n){if(Je.isDocumentKey(n))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _x(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ke(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_x(n);throw new Ke(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Zk(n,e){if(e<=0)throw new Ke(Pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Yk=new Map;class Qk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ke(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ke(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Wk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ke(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ke(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vb;switch(t.type){case"gapi":return new vw(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ke(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Yk.get(e);t&&(Ze("ComponentProvider","Removing Datastore"),Yk.delete(e),t.terminate())}(this),Promise.resolve()}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class Fl extends Ki{constructor(e,t,r){super(e,t,Rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Je(e))}withConverter(e){return new Fl(this.firestore,e,this._path)}}function Jk(n,e,...t){if(n=(0,G.m9)(n),S1("collection","path",e),n instanceof Jw){const r=dn.fromString(e,...t);return Kk(r),new Fl(n,null,r)}{if(!(n instanceof or||n instanceof Fl))throw new Ke(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return Kk(r),new Fl(n.firestore,null,r)}}function yx(n,e,...t){if(n=(0,G.m9)(n),1===arguments.length&&(e=Cb.R()),S1("doc","path",e),n instanceof Jw){const r=dn.fromString(e,...t);return qk(r),new or(n,null,new Je(r))}{if(!(n instanceof or||n instanceof Fl))throw new Ke(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return qk(r),new or(n.firestore,n instanceof Fl?n.converter:null,new Je(r))}}function eP(n,e){return n=(0,G.m9)(n),e=(0,G.m9)(e),(n instanceof or||n instanceof Fl)&&(e instanceof or||e instanceof Fl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function A1(n,e){return n=(0,G.m9)(n),e=(0,G.m9)(e),n instanceof Ki&&e instanceof Ki&&n.firestore===e.firestore&&I_(n._query,e._query)&&n.converter===e.converter}function tP(n,e=10240){let t=0;return{read:()=>(0,Fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class vx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class DV{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new ni,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Fe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Fe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Fe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new tV(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Fe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Fe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class AV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ke(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Fe.Z)(function*(a,l){const f=tt(a),_=Bw(f.yt)+"/documents",w={documents:l.map(ee=>Vw(f.yt,ee))},C=yield f._o("BatchGetDocuments",_,w,l.length),S=new Map;C.forEach(ee=>{const le=function S2(n,e){return"found"in e?function(t,r){mt(!!r.found);const i=Pl(t,r.found.name),a=Xt(r.found.updateTime),l=r.found.createTime?Xt(r.found.createTime):It.min(),f=new Mi({mapValue:{fields:r.found.fields}});return Vn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const i=Pl(t,r.missing),a=Xt(r.readTime);return Vn.newNoDocument(i,a)}(n,e):ut()}(f.yt,ee);S.set(le.key.toString(),le)});const B=[];return l.forEach(ee=>{const le=S.get(ee.toString());mt(!!le),B.push(le)}),B}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Je.fromPath(i);e.mutations.push(new Uw(a,e.precondition(a)))}),yield(r=(0,Fe.Z)(function*(i,a){const l=tt(i),f=Bw(l.yt)+"/documents",_={writes:a.map(w=>Hw(l.yt,w))};yield l.ao("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ke(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Ke(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class RV{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new RA(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Fe.Z)(function*(){const t=new AV(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!c_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!QS(t)}return!1}}class MV{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kr.UNAUTHENTICATED,this.clientId=Cb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Fe.Z)(function*(f){Ze("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ke(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=F_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function nP(n,e){return R1.apply(this,arguments)}function R1(){return R1=(0,Fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Fe.Z)(function*(a){r.isEqual(a)||(yield gk(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),R1.apply(this,arguments)}function rP(n,e){return M1.apply(this,arguments)}function M1(){return M1=(0,Fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield N1(n);Ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Nk(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Nk(e.remoteStore,a)),n.onlineComponents=e}),M1.apply(this,arguments)}function N1(n){return k1.apply(this,arguments)}function k1(){return k1=(0,Fe.Z)(function*(n){return n.offlineComponents||(Ze("FirestoreClient","Using default OfflineComponentProvider"),yield nP(n,new Gk)),n.offlineComponents}),k1.apply(this,arguments)}function wx(n){return P1.apply(this,arguments)}function P1(){return P1=(0,Fe.Z)(function*(n){return n.onlineComponents||(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield rP(n,new T1)),n.onlineComponents}),P1.apply(this,arguments)}function iP(n){return N1(n).then(e=>e.persistence)}function Ex(n){return N1(n).then(e=>e.localStore)}function O1(n){return wx(n).then(e=>e.remoteStore)}function F1(n){return wx(n).then(e=>e.syncEngine)}function B_(n){return L1.apply(this,arguments)}function L1(){return L1=(0,Fe.Z)(function*(n){const e=yield wx(n),t=e.eventManager;return t.onListen=oV.bind(null,e.syncEngine),t.onUnlisten=aV.bind(null,e.syncEngine),t}),L1.apply(this,arguments)}function oP(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function(i,a,l,f,_){const w=new vx({next:S=>{a.enqueueAndForget(()=>XA(i,C));const B=S.docs.has(l);!B&&S.fromCache?_.reject(new Ke(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&S.fromCache&&f&&"server"===f.source?_.reject(new Ke(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),C=new t1(Rg(l.path),w,{includeMetadataChanges:!0,Nu:!0});return YA(i,C)}(yield B_(n),n.asyncQueue,e,t,r)})),r.promise}function aP(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function(i,a,l,f,_){const w=new vx({next:S=>{a.enqueueAndForget(()=>XA(i,C)),S.fromCache&&"server"===f.source?_.reject(new Ke(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),C=new t1(l,w,{includeMetadataChanges:!0,Nu:!0});return YA(i,C)}(yield B_(n),n.asyncQueue,e,t,r)})),r.promise}class VV{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new RA(this,"async_queue_retry"),this.Wc=()=>{const t=px();t&&Ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=px();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=px();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new ni;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Fe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!cu(t))throw t;Ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,mr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=ZA.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&ut()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Fe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function U1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class BV{constructor(){this._progressObserver={},this._taskCompletionResolver=new ni,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ar extends Jw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new VV,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||uP(this),this._firestoreClient.terminate()}}function Wr(n){return n._firestoreClient||uP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function uP(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new wN(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new MV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function lP(n,e,t){const r=new ni;return n.asyncQueue.enqueue((0,Fe.Z)(function*(){try{yield nP(n,t),yield rP(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===Pe.FAILED_PRECONDITION||l.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;bl("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function cP(n){if(n._initialized||n._terminated)throw new Ke(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ll(_r.fromBase64String(e))}catch(t){throw new Ke(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ll(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ke(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bg{constructor(e){this._methodName=e}}class Ix{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ke(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ke(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const YV=/^__.*__$/;class QV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new gu(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}class dP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class Cx{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Cx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Dx(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(hP(this.sa)&&YV.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class XV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Yw(e)}da(e,t,r,i=!1){return new Cx({sa:e,methodName:t,fa:r,path:sr.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Hg(n){const e=n._freezeSettings(),t=Yw(n._databaseId);return new XV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bx(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);j1("Data must be an object, but it was:",l,r);const f=gP(r,l);let _,w;if(a.merge)_=new qi(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const C=[];for(const S of a.mergeFields){const B=$1(e,S,t);if(!l.contains(B))throw new Ke(Pe.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);_P(C,B)||C.push(B)}_=new qi(C),w=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=l.fieldTransforms;return new QV(new Mi(f),_,w)}class eE extends Bg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eE}}function fP(n,e,t){return new Cx({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class V1 extends Bg{_toFieldTransform(e){return new Mg(e.path,new pu)}isEqual(e){return e instanceof V1}}class JV extends Bg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=fP(this,e,!0),r=this._a.map(a=>jg(a,t)),i=new If(r);return new Mg(e.path,i)}isEqual(e){return this===e}}class eB extends Bg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=fP(this,e,!0),r=this._a.map(a=>jg(a,t)),i=new Cf(r);return new Mg(e.path,i)}isEqual(e){return this===e}}class tB extends Bg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new xd(e.yt,C_(e.yt,this.wa));return new Mg(e.path,t)}isEqual(e){return this===e}}function B1(n,e,t,r){const i=n.da(1,e,t);j1("Data must be an object, but it was:",i,r);const a=[],l=Mi.empty();gf(r,(_,w)=>{const C=xx(e,_,t);w=(0,G.m9)(w);const S=i.ca(C);if(w instanceof eE)a.push(C);else{const B=jg(w,S);null!=B&&(a.push(C),l.set(C,B))}});const f=new qi(a);return new dP(l,f,i.fieldTransforms)}function H1(n,e,t,r,i,a){const l=n.da(1,e,t),f=[$1(e,r,t)],_=[i];if(a.length%2!=0)throw new Ke(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<a.length;B+=2)f.push($1(e,a[B])),_.push(a[B+1]);const w=[],C=Mi.empty();for(let B=f.length-1;B>=0;--B)if(!_P(w,f[B])){const ee=f[B];let le=_[B];le=(0,G.m9)(le);const Oe=l.ca(ee);if(le instanceof eE)w.push(ee);else{const je=jg(le,Oe);null!=je&&(w.push(ee),C.set(ee,je))}}const S=new qi(w);return new dP(C,S,l.fieldTransforms)}function pP(n,e,t,r=!1){return jg(t,n.da(r?4:3,e))}function jg(n,e){if(mP(n=(0,G.m9)(n)))return j1("Unsupported field value:",e,n),gP(n,e);if(n instanceof Bg)return function(t,r){if(!hP(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=jg(l,r.aa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,G.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return C_(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=kn.fromDate(t);return{timestampValue:qe(r.yt,i)}}if(t instanceof kn){const i=new kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qe(r.yt,i)}}if(t instanceof Ix)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ll)return{bytesValue:Gt(r.yt,t._byteString)};if(t instanceof or){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${_x(t)}`)}(n,e)}function gP(n,e){const t={};return NS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gf(n,(r,i)=>{const a=jg(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function mP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof kn||n instanceof Ix||n instanceof Ll||n instanceof or||n instanceof Bg)}function j1(n,e,t){if(!mP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_x(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function $1(n,e,t){if((e=(0,G.m9)(e))instanceof Rd)return e._internalPath;if("string"==typeof e)return xx(n,e);throw Dx("Field path arguments must be of type string or ",n,!1,void 0,t)}const nB=new RegExp("[~\\*/\\[\\]]");function xx(n,e,t){if(e.search(nB)>=0)throw Dx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rd(...e.split("."))._internalPath}catch{throw Dx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dx(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Ke(Pe.INVALID_ARGUMENT,f+n+_)}function _P(n,e){return n.some(t=>t.isEqual(e))}class tE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rB extends tE{data(){return super.data()}}function Tx(n,e){return"string"==typeof e?xx(n,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}function yP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ke(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G1{}class nE extends G1{}function Rf(n,e,...t){let r=[];e instanceof G1&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof H_).length,l=i.filter(f=>f instanceof rE).length;if(a>1||a>0&&l>0)throw new Ke(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class rE extends nE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rE(e,t,r)}_apply(e){const t=this._parse(e);return IP(e._query,t),new Ki(e.firestore,e.converter,$b(e._query,t))}_parse(e){const t=Hg(e.firestore);return function(i,a,l,f,_,w,C){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){EP(C,w);const B=[];for(const ee of C)B.push(wP(f,i,ee));S={arrayValue:{values:B}}}else S=wP(f,i,C)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||EP(C,w),S=pP(l,"where",C,"in"===w||"not-in"===w);return un.create(_,w,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class H_ extends G1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new H_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Tn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)IP(a,f),a=$b(a,f)}(e._query,t),new Ki(e.firestore,e.converter,$b(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class z1 extends nE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new z1(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ke(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ke(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new yf(i,a);return function(f,_){if(null===w_(f)){const w=E_(f);null!==w&&CP(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new fu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Sx extends nE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Sx(e,t,r)}_apply(e){return new Ki(e.firestore,e.converter,kw(e._query,this._limit,this._limitType))}}class Ax extends nE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ax(e,t,r)}_apply(e){const t=vP(e,this.type,this._docOrFields,this._inclusive);return new Ki(e.firestore,e.converter,(i=t,new fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Rx extends nE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Rx(e,t,r)}_apply(e){const t=vP(e,this.type,this._docOrFields,this._inclusive);return new Ki(e.firestore,e.converter,(i=t,new fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function vP(n,e,t,r){if(t[0]=(0,G.m9)(t[0]),t[0]instanceof tE)return function(i,a,l,f,_){if(!f)throw new Ke(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const C of bd(i))if(C.field.isKeyField())w.push(wd(a,f.key));else{const S=f.data.field(C.field);if(d_(S))throw new Ke(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const B=C.field.canonicalString();throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}w.push(S)}return new Ed(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Hg(n.firestore);return function(a,l,f,_,w,C){const S=a.explicitOrderBy;if(w.length>S.length)throw new Ke(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let ee=0;ee<w.length;ee++){const le=w[ee];if(S[ee].field.isKeyField()){if("string"!=typeof le)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof le}`);if(!Nw(a)&&-1!==le.indexOf("/"))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${le}' contains a slash.`);const Oe=a.path.child(dn.fromString(le));if(!Je.isDocumentKey(Oe))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const je=new Je(Oe);B.push(wd(l,je))}else{const Oe=pP(f,_,le);B.push(Oe)}}return new Ed(B,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function wP(n,e,t){if("string"==typeof(t=(0,G.m9)(t))){if(""===t)throw new Ke(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nw(e)&&-1!==t.indexOf("/"))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!Je.isDocumentKey(r))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wd(n,new Je(r))}if(t instanceof or)return wd(n,t._key);throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_x(t)}.`)}function EP(n,e){if(!Array.isArray(n)||0===n.length)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function IP(n,e){if(e.isInequality()){const r=E_(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=w_(n);null!==a&&CP(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ke(Pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function CP(n,e,t){if(!t.isEqual(e))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class W1{convertValue(e,t="none"){switch(vd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return gf(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Ix(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Pb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mf(e));default:return null}}convertTimestamp(e){const t=du(e);return new kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);mt(NN(r));const i=new _d(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(t)||mr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Mx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hB extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}class $g{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Md extends tE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Tx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class iE extends Md{data(e={}){return super.data(e)}}class Mf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $g(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new iE(this._firestore,this._userDataWriter,r.key,r,new $g(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ke(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new iE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new $g(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new iE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new $g(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:fB(l.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function xP(n,e){return n instanceof Md&&e instanceof Md?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mf&&e instanceof Mf&&n._firestore===e._firestore&&A1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nf extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function DP(n,e,t){n=fn(n,or);const r=fn(n.firestore,ar),i=Mx(n.converter,e,t);return j_(r,[bx(Hg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,jn.none())])}function TP(n,e,t,...r){n=fn(n,or);const i=fn(n.firestore,ar),a=Hg(i);let l;return l="string"==typeof(e=(0,G.m9)(e))||e instanceof Rd?H1(a,"updateDoc",n._key,e,t,r):B1(a,"updateDoc",n._key,e),j_(i,[l.toMutation(n._key,jn.exists(!0))])}function SP(n,...e){var t,r,i;n=(0,G.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||U1(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(U1(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,C;if(n instanceof or)w=fn(n.firestore,ar),C=Rg(n._key.path),_={next:S=>{e[l]&&e[l](q1(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=fn(n,Ki);w=fn(S.firestore,ar),C=S._query;const B=new Nf(w);_={next:ee=>{e[l]&&e[l](new Mf(w,B,S,ee))},error:e[l+1],complete:e[l+2]},yP(n._query)}return function(S,B,ee,le){const Oe=new vx(le),je=new t1(B,Oe,ee);return S.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return YA(yield B_(S),je)})),()=>{Oe.bc(),S.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return XA(yield B_(S),je)}))}}(Wr(w),C,f,_)}function j_(n,e){return function(t,r){const i=new ni;return t.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function uV(n,e,t){return o1.apply(this,arguments)}(yield F1(t),r,i)})),i.promise}(Wr(n),e)}function q1(n,e,t){const r=t.docs.get(e._key),i=new Nf(n);return new Md(n,i,e._key,r,new $g(t.hasPendingWrites,t.fromCache),e.converter)}const CB={maxAttempts:5};class AP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hg(e)}set(e,t,r){this._verifyNotCommitted();const i=kf(e,this._firestore),a=Mx(i.converter,t,r),l=bx(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=kf(e,this._firestore);let l;return l="string"==typeof(t=(0,G.m9)(t))||t instanceof Rd?H1(this._dataReader,"WriteBatch.update",a._key,t,r,i):B1(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kf(e,this._firestore);return this._mutations=this._mutations.concat(new bf(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ke(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kf(n,e){if((n=(0,G.m9)(n)).firestore!==e)throw new Ke(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hg(e)}get(e){const t=kf(e,this._firestore),r=new hB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const a=i[0];if(a.isFoundDocument())return new tE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new tE(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=kf(e,this._firestore),a=Mx(i.converter,t,r),l=bx(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=kf(e,this._firestore);let l;return l="string"==typeof(t=(0,G.m9)(t))||t instanceof Rd?H1(this._dataReader,"Transaction.update",a._key,t,r,i):B1(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=kf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kf(e,this._firestore),r=new Nf(this._firestore);return super.get(e).then(i=>new Md(this._firestore,r,t._key,i._document,new $g(!1,!1),t.converter))}}function K1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function MP(){if(typeof Uint8Array>"u")throw new Ke("unimplemented","Uint8Arrays are not available in this environment.")}function NP(){if(!function Nb(){return typeof atob<"u"}())throw new Ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){pd=Gi.SDK_VERSION,(0,Gi._registerComponent)(new Js.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new ar(new bg(t.getProvider("auth-internal")),new Ib(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ke(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _d(f.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(_w,"3.8.3",n),(0,Gi.registerVersion)(_w,"3.8.3","esm2017")}();class sE{constructor(e){this._delegate=e}static fromBase64String(e){return NP(),new sE(Ll.fromBase64String(e))}static fromUint8Array(e){return MP(),new sE(Ll.fromUint8Array(e))}toBase64(){return NP(),this._delegate.toBase64()}toUint8Array(){return MP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Z1(n){return function kB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class PB{enableIndexedDbPersistence(e,t){return function jV(n,e){cP(n=fn(n,ar));const t=Wr(n),r=n._freezeSettings(),i=new T1;return lP(t,i,new zk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $V(n){cP(n=fn(n,ar));const e=Wr(n),t=n._freezeSettings(),r=new T1;return lP(e,r,new bV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function GV(n){if(n._initialized&&!n._terminated)throw new Ke(Pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ni;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Fe.Z)(function*(){try{yield(t=(0,Fe.Z)(function*(r){if(!No.C())return Promise.resolve();const i=r+"main";yield No.delete(i)}),function(r){return t.apply(this,arguments)})(wA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class kP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _d||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Xk(n,e,t,r={}){var i;const a=(n=fn(n,Jw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&bl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=kr.MOCK_USER;else{l=(0,G.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ke(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new kr(_)}n._authCredentials=new wb(new TS(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function WV(n){return function NV(n){return n.asyncQueue.enqueue((0,Fe.Z)(function*(){const e=yield iP(n),t=yield O1(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i._u.delete(0),Qw(i)}(t)}))}(Wr(n=fn(n,ar)))}(this._delegate)}disableNetwork(){return function qV(n){return function kV(n){return n.asyncQueue.enqueue((0,Fe.Z)(function*(){const e=yield iP(n),t=yield O1(n);return e.setNetworkEnabled(!1),(r=(0,Fe.Z)(function*(i){const a=tt(i);a._u.add(0),yield k_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Wr(n=fn(n,ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Wk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function zV(n){return function(e){const t=new ni;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function hV(n,e){return d1.apply(this,arguments)}(yield F1(e),t)})),t.promise}(Wr(n=fn(n,ar)))}(this._delegate)}onSnapshotsInSync(e){return function IB(n,e){return function FV(n,e){const t=new vx(e);return n.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return r=yield B_(n),i=t,tt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return r=yield B_(n),i=t,void tt(r).Ru.delete(i);var r,i}))}}(Wr(n=fn(n,ar)),U1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $_(this,Jk(this._delegate,e))}catch(t){throw ks(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,yx(this._delegate,e))}catch(t){throw ks(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ps(this,function xV(n,e){if(n=fn(n,Jw),S1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ki(n,null,(t=e,new fu(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ks(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function xB(n,e,t){n=fn(n,ar);const r=Object.assign(Object.assign({},CB),t);return function(i){if(i.maxAttempts<1)throw new Ke(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new ni;return i.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){const _=yield function sP(n){return wx(n).then(e=>e.datastore)}(i);new RV(i.asyncQueue,_,l,a,f).run()})),f.promise}(Wr(n),i=>e(new bB(n,i)),r)}(this._delegate,t=>e(new PP(this,t)))}batch(){return Wr(this._delegate),new OP(new AP(this._delegate,e=>j_(this._delegate,e)))}loadBundle(e){return function KV(n,e){const t=Wr(n=fn(n,ar)),r=new BV;return function LV(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return tP(_,w);if(_ instanceof ArrayBuffer)return tP(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new DV(_,l);var _}(t,Yw(e));n.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){!function CV(n,e,t){const r=tt(n);var i;(i=(0,Fe.Z)(function*(a,l,f){try{const _=yield l.getMetadata();if(yield function(B,ee){const le=tt(B),Oe=Xt(ee.createTime);return le.persistence.runTransaction("hasNewerBundle","readonly",je=>le.Ns.getBundleMetadata(je,ee.id)).then(je=>!!je&&je.createTime.compareTo(Oe)>=0)}(a.localStore,_))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(B=_).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);f._updateProgress(Ok(_));const w=new nV(_,a.localStore,l.yt);let C=yield l.mc();for(;C;){const B=yield w.Fu(C);B&&f._updateProgress(B),C=yield l.mc()}const S=yield w.complete();return yield Ad(a,S.Lu,void 0),yield function(B,ee){const le=tt(B);return le.persistence.runTransaction("Save bundle","readwrite",Oe=>le.Ns.saveBundleMetadata(Oe,ee))}(a.localStore,_),f._completeWith(S.progress),Promise.resolve(S.Bu)}catch(_){return bl("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var B}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield F1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ZV(n,e){return function UV(n,e){return n.asyncQueue.enqueue((0,Fe.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield Ex(n),e)}))}(Wr(n=fn(n,ar)),e).then(t=>t?new Ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ps(this,t):null)}}class Nx extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new sE(new Ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(t,this.firestore,null)}}class PP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Nx(e)}get(e){const t=zg(e);return this._delegate.get(t).then(r=>new oE(this._firestore,new Md(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=zg(e);return r?(K1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zg(e);return this._delegate.delete(t),this}}class OP{constructor(e){this._delegate=e}set(e,t,r){const i=zg(e);return r?(K1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new iE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new aE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Gg(e,new Nx(e),t),i.set(t,a)),a}}Gg.INSTANCES=new WeakMap;class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(t,new or(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new Ea(t,new or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $_(this.firestore,Jk(this._delegate,e))}catch(t){throw ks(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,G.m9)(e))instanceof or&&eP(this._delegate,e)}set(e,t){t=K1("DocumentReference.set",t);try{return t?DP(this._delegate,e,t):DP(this._delegate,e)}catch(r){throw ks(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?TP(this._delegate,e):TP(this._delegate,e,t,...r)}catch(i){throw ks(i,"updateDoc()","DocumentReference.update()")}}delete(){return function wB(n){return j_(fn(n.firestore,ar),[new bf(n._key,jn.none())])}(this._delegate)}onSnapshot(...e){const t=FP(e),r=LP(e,i=>new oE(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return SP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function gB(n){n=fn(n,or);const e=fn(n.firestore,ar),t=Wr(e),r=new Nf(e);return function PV(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return(r=(0,Fe.Z)(function*(i,a,l){try{const f=yield function(_,w){const C=tt(_);return C.persistence.runTransaction("read document","readonly",S=>C.localDocuments.getDocument(S,w))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ke(Pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=F_(f,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield Ex(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Md(e,r,n._key,i,new $g(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function mB(n){n=fn(n,or);const e=fn(n.firestore,ar);return oP(Wr(e),n._key,{source:"server"}).then(t=>q1(e,n,t))}(this._delegate):function pB(n){n=fn(n,or);const e=fn(n.firestore,ar);return oP(Wr(e),n._key).then(t=>q1(e,n,t))}(this._delegate),t.then(r=>new oE(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?Gg.getInstance(this.firestore,e):null))}}function ks(n,e,t){return n.message=n.message.replace(e,t),n}function FP(n){for(const e of n)if("object"==typeof e&&!Z1(e))return e;return{}}function LP(n,e){var t,r;let i;return i=Z1(n[0])?n[0]:Z1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class oE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xP(this._delegate,e._delegate)}}class aE extends oE{data(e){const t=this._delegate.data(e);return function Wi(n,e){n||ut()}(void 0!==t),t}}class Ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nx(e)}where(e,t,r){try{return new Ps(this.firestore,Rf(this._delegate,function iB(n,e,t){const r=e,i=Tx("where",n);return rE._create(i,r,t)}(e,t,r)))}catch(i){throw ks(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ps(this.firestore,Rf(this._delegate,function sB(n,e="asc"){const t=e,r=Tx("orderBy",n);return z1._create(r,t)}(e,t)))}catch(r){throw ks(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ps(this.firestore,Rf(this._delegate,function oB(n){return Zk("limit",n),Sx._create("limit",n,"F")}(e)))}catch(t){throw ks(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ps(this.firestore,Rf(this._delegate,function aB(n){return Zk("limitToLast",n),Sx._create("limitToLast",n,"L")}(e)))}catch(t){throw ks(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ps(this.firestore,Rf(this._delegate,function uB(...n){return Ax._create("startAt",n,!0)}(...e)))}catch(t){throw ks(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ps(this.firestore,Rf(this._delegate,function lB(...n){return Ax._create("startAfter",n,!1)}(...e)))}catch(t){throw ks(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ps(this.firestore,Rf(this._delegate,function cB(...n){return Rx._create("endBefore",n,!1)}(...e)))}catch(t){throw ks(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ps(this.firestore,Rf(this._delegate,function dB(...n){return Rx._create("endAt",n,!0)}(...e)))}catch(t){throw ks(t,"endAt()","Query.endAt()")}}isEqual(e){return A1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function yB(n){n=fn(n,Ki);const e=fn(n.firestore,ar),t=Wr(e),r=new Nf(e);return function OV(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return(r=(0,Fe.Z)(function*(i,a,l){try{const f=yield dx(i,a,!0),_=new Uk(a,f.Hi),w=_.Wu(f.documents),C=_.applyChanges(w,!1);l.resolve(C.snapshot)}catch(f){const _=F_(f,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield Ex(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Mf(e,r,n,i))}(this._delegate):"server"===e?.source?function vB(n){n=fn(n,Ki);const e=fn(n.firestore,ar),t=Wr(e),r=new Nf(e);return aP(t,n._query,{source:"server"}).then(i=>new Mf(e,r,n,i))}(this._delegate):function _B(n){n=fn(n,Ki);const e=fn(n.firestore,ar),t=Wr(e),r=new Nf(e);return yP(n._query),aP(t,n._query).then(i=>new Mf(e,r,n,i))}(this._delegate),t.then(r=>new Y1(this.firestore,new Mf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=FP(e),r=LP(e,i=>new Y1(this.firestore,new Mf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return SP(this._delegate,t,r)}withConverter(e){return new Ps(this.firestore,this._delegate.withConverter(e?Gg.getInstance(this.firestore,e):null))}}class FB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new aE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Y1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new aE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new aE(this._firestore,r))})}isEqual(e){return xP(this._delegate,e._delegate)}}class $_ extends Ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?yx(this._delegate):yx(this._delegate,e))}catch(t){throw ks(t,"doc()","CollectionReference.doc()")}}add(e){return function EB(n,e){const t=fn(n.firestore,ar),r=yx(n),i=Mx(n.converter,e);return j_(t,[bx(Hg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ea(this.firestore,t))}isEqual(e){return eP(this._delegate,e._delegate)}withConverter(e){return new $_(this.firestore,this._delegate.withConverter(e?Gg.getInstance(this.firestore,e):null))}}function zg(n){return fn(n,or)}class Q1{constructor(...e){this._delegate=new Rd(...e)}static documentId(){return new Q1(sr.keyField().canonicalString())}isEqual(e){return(e=(0,G.m9)(e))instanceof Rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function TB(){return new V1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wg(e)}static delete(){const e=function DB(){return new eE("deleteField")}();return e._methodName="FieldValue.delete",new Wg(e)}static arrayUnion(...e){const t=function SB(...n){return new JV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wg(t)}static arrayRemove(...e){const t=function AB(...n){return new eB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wg(t)}static increment(e){const t=function RB(n){return new tB("increment",n)}(e);return t._methodName="FieldValue.increment",new Wg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LB={Firestore:kP,GeoPoint:Ix,Timestamp:kn,Blob:sE,Transaction:PP,WriteBatch:OP,DocumentReference:Ea,DocumentSnapshot:oE,Query:Ps,QueryDocumentSnapshot:aE,QuerySnapshot:Y1,CollectionReference:$_,FieldPath:Q1,FieldValue:Wg,setLogLevel:function OB(n){!function yb(n){Cl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function VB(n){(function UB(n,e){n.INTERNAL.registerComponent(new Js.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},LB)))})(n,(e,t)=>new kP(e,t,new PB)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(id.Z);var X1=M(6451),kx=M(5363),BB=M(6063);class HB extends ll.x{constructor(e=1/0,t=1/0,r=BB.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)f=_;f&&r.splice(0,f+1)}}}var UP=M(3099);function VP(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,UP.B)({connector:()=>new HB(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function BP(n,e){return(0,Oy.m)(e)?Tr(()=>n,e):Tr(()=>n)}var J1=M(9468);M(259);const tR=new Map,jP={activated:!1,tokenObservers:[]},WB={initialized:!1,enabled:!1};function Zi(n){return tR.get(n)||Object.assign({},jP)}function Ox(){return WB}class XB{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Fe.Z)(function*(){t.stop();try{t.pending=new G.BH,yield function JB(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new G.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Os=new G.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function GP(n){if(!Zi(n).activated)throw Os.create("use-before-activation",{appName:n.name})}function iR(n,e){return sR.apply(this,arguments)}function sR(){return sR=(0,Fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(S){throw Os.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Os.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(S){throw Os.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Os.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),C=Date.now();return{token:f.token,expireTimeMillis:C+w,issuedAtTimeMillis:C}}),sR.apply(this,arguments)}function r8(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const uE="firebase-app-check-store";let Ux=null;function WP(){return Ux||(Ux=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Os.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(uE,{keyPath:"compositeKey"})}}catch(t){e(Os.create("storage-open",{originalErrorMessage:t?.message}))}}),Ux)}function oR(){return oR=(0,Fe.Z)(function*(n,e){const r=(yield WP()).transaction(uE,"readwrite"),a=r.objectStore(uE).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;f(Os.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),oR.apply(this,arguments)}const lE=new Mo.Yd("@firebase/app-check");function lR(n,e){return(0,G.hl)()?function a8(n,e){return function qP(n,e){return oR.apply(this,arguments)}(function ZP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{lE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YP(){return Ox().enabled}function QP(){return dR.apply(this,arguments)}function dR(){return dR=(0,Fe.Z)(function*(){const n=Ox();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),dR.apply(this,arguments)}const f8={error:"UNKNOWN_ERROR"};function p8(n){return G.US.encodeString(JSON.stringify(n),!1)}function Vx(n){return hR.apply(this,arguments)}function hR(){return hR=(0,Fe.Z)(function*(n,e=!1){const t=n.app;GP(t);const r=Zi(t);let a,i=r.token;if(i&&!G_(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(G_(_)?i=_:yield lR(t,void 0))}if(!e&&i&&G_(i))return{token:i.token};let f,l=!1;if(YP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=iR(r8(t,yield QP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield lR(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Zi(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?lE.warn(_.message):lE.error(_),a=_}return i?a?f=G_(i)?{token:i.token,internalError:a}:eO(a):(f={token:i.token},r.token=i,yield lR(t,i)):f=eO(a),l&&JP(t,f),f}),hR.apply(this,arguments)}function pR(n,e){const t=Zi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function XP(n){const{app:e}=n,t=Zi(e);let r=t.tokenRefresher;r||(r=function g8(n){const{app:e}=n;return new XB((0,Fe.Z)(function*(){let r;if(r=Zi(e).token?yield Vx(n,!0):yield Vx(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Zi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function JP(n,e){const t=Zi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function G_(n){return n.expireTimeMillis-Date.now()>0}function eO(n){return{token:p8(f8),error:n}}class m8{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zi(this.app);for(const t of e)pR(this.app,t.next);return Promise.resolve()}}const uO="app-check-internal";!function R8(){(0,Gi._registerComponent)(new Js.wA("app-check",n=>function _8(n,e){return new m8(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uO).initialize()})),(0,Gi._registerComponent)(new Js.wA(uO,n=>function y8(n){return{getToken:e=>Vx(n,e),addTokenListener:e=>function fR(n,e,t,r){const{app:i}=n,a=Zi(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&G_(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),XP(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>XP(n))}(n,"INTERNAL",e),removeTokenListener:e=>pR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gi.registerVersion)("@firebase/app-check","0.6.3")}();class cE{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window;var Hx=M(9260);const vR=new h.OlP("angularfire2.auth.use-emulator"),wR=new h.OlP("angularfire2.auth.settings"),ER=new h.OlP("angularfire2.auth.tenant-id"),IR=new h.OlP("angularfire2.auth.langugage-code"),CR=new h.OlP("angularfire2.auth.use-device-language"),bR=new h.OlP("angularfire.auth.persistence"),xR=(n,e,t,r,i,a,l,f)=>(0,Gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,C]of Object.entries(l))_.settings[w]=C;return f&&_.setPersistence(f),_},[t,r,i,a,l,f]);let dE=(()=>{class n{constructor(t,r,i,a,l,f,_,w,C,S,B,ee){const le=new ll.x,Oe=Et(void 0).pipe((0,kx.Q)(l.outsideAngular),Tr(()=>a.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,407)))),(0,gt.U)(()=>(0,Gr.on)(t,a,r)),(0,gt.U)(je=>xR(je,a,f,w,C,S,_,B)),VP({bufferSize:1,refCount:!1}));if(xu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Et(null);else{Oe.pipe(la()).subscribe();const _t=Oe.pipe(Tr(pt=>pt.getRedirectResult().then(Ft=>Ft,()=>null)),yn.iC,VP({bufferSize:1,refCount:!1})),Ct=Oe.pipe(Tr(pt=>new Br.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>pt.onAuthStateChanged(Wt=>Ft.next(Wt),Wt=>Ft.error(Wt),()=>Ft.complete()))})))),ct=Oe.pipe(Tr(pt=>new Br.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>pt.onIdTokenChanged(Wt=>Ft.next(Wt),Wt=>Ft.error(Wt),()=>Ft.complete()))}))));this.authState=_t.pipe(BP(Ct),(0,J1.R)(l.outsideAngular),(0,kx.Q)(l.insideAngular)),this.user=_t.pipe(BP(ct),(0,J1.R)(l.outsideAngular),(0,kx.Q)(l.insideAngular)),this.idToken=this.user.pipe(Tr(pt=>pt?(0,Zt.D)(pt.getIdToken()):Et(null))),this.idTokenResult=this.user.pipe(Tr(pt=>pt?(0,Zt.D)(pt.getIdTokenResult()):Et(null))),this.credential=(0,X1.T)(_t,le,this.authState.pipe(To(pt=>!pt))).pipe((0,gt.U)(pt=>pt?.user?pt:null),(0,J1.R)(l.outsideAngular),(0,kx.Q)(l.insideAngular))}return(0,Gr.pX)(this,Oe,a,{spy:{apply:(je,_t,Ct)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&Ct.then(ct=>le.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr.Dh),h.LFG(Gr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(yn.HU),h.LFG(vR,8),h.LFG(wR,8),h.LFG(ER,8),h.LFG(IR,8),h.LFG(CR,8),h.LFG(bR,8),h.LFG(cE,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),F8=(()=>{class n{constructor(){Hx.Z.registerVersion("angularfire",yn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[dE]}),n})();function cO(n,e){return function L8(n,e=I0.z){return new Br.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function DR(n,e){return cO(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function jx(n,e){return DR(n,e).pipe(ru(void 0),Tv(),(0,gt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const _=i.find(C=>C.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function dO(n,e,t){return jx(n,t).pipe(So((r,i)=>function V8(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function B8(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),EC(),(0,gt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function TR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function hO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class fO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ru(void 0),Tv(),To(([r,i])=>i.length>0||!r),(0,gt.U)(([r,i])=>i),yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(So((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hO(e);return dO(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return DR(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yn.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(yn.iC)}add(e){return this.ref.add(e)}doc(e){return new pO(this.ref.doc(e),this.afs)}}class pO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=_O(r,t);return new fO(i,a,this.afs)}snapshotChanges(){return function U8(n,e){return cO(n,e).pipe(ru(void 0),Tv(),(0,gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zt.D)(this.ref.get(e)).pipe(yn.iC)}}class H8{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),To(t=>t.length>0),yn.iC):jx(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(So((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hO(e);return dO(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return DR(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),yn.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(yn.iC)}}const gO=new h.OlP("angularfire2.enableFirestorePersistence"),mO=new h.OlP("angularfire2.firestore.persistenceSettings"),j8=new h.OlP("angularfire2.firestore.settings"),$8=new h.OlP("angularfire2.firestore.use-emulator");function _O(n,e=(t=>t)){return{query:e(n),ref:n}}let yO=(()=>{class n{constructor(t,r,i,a,l,f,_,w,C,S,B,ee,le,Oe,je,_t,Ct){this.schedulers=_;const ct=(0,Gr.on)(t,f,r),pt=C;S&&xR(ct,f,B,le,Oe,je,ee,_t),[this.firestore,this.persistenceEnabled$]=(0,Gr.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Ft=f.runOutsideAngular(()=>ct.firestore());if(a&&Ft.settings(a),pt&&Ft.useEmulator(...pt),i&&!xu(l)){const Wt=()=>{try{return(0,Zt.D)(Ft.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Mr){return typeof console<"u"&&console.warn(Mr),Et(!1)}};return[Ft,f.runOutsideAngular(Wt)]}return[Ft,Et(!1)]},[a,pt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=_O(i,r),f=this.schedulers.ngZone.run(()=>a);return new fO(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new H8(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new pO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr.Dh),h.LFG(Gr.xv,8),h.LFG(gO,8),h.LFG(j8,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(yn.HU),h.LFG(mO,8),h.LFG($8,8),h.LFG(dE,8),h.LFG(vR,8),h.LFG(wR,8),h.LFG(ER,8),h.LFG(IR,8),h.LFG(CR,8),h.LFG(bR,8),h.LFG(cE,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vO=(()=>{class n{constructor(){Hx.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gO,useValue:!0},{provide:mO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[yO]}),n})();class _u{constructor(e,t,r,i){this.afStore=e,this.ngFireAuth=t,this.router=r,this.ngZone=i,this.ngFireAuth.authState.subscribe(a=>{a?(this.userData=a,this.setUserSessionStorage(this.userData)):this.setUserSessionStorage({})})}SignIn(e,t){return this.ngFireAuth.signInWithEmailAndPassword(e,t).then(r=>{this.setUserSessionStorage(r.user),this.router.navigate(["dashboard"])}).catch(r=>{console.log(r)})}RegisterUser(e,t){return this.ngFireAuth.createUserWithEmailAndPassword(e,t)}SendVerificationMail(){var e=this;return(0,Fe.Z)(function*(){(yield e.ngFireAuth.currentUser)?.sendEmailVerification().then(()=>{e.router.navigate(["verify-email"])}).catch(t=>console.log(t))})()}PasswordRecover(e){return this.ngFireAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email has been sent, please check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){const e=this.getUserSessionStorage();return 0!==Object.keys(e).length}get isEmailVerified(){return!1!==JSON.parse(localStorage.getItem("user")??"").emailVerified}SetUserData(e){return this.afStore.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}setUserSessionStorage(e){0!==Object.keys(e).length&&sessionStorage.setItem("user",JSON.stringify(this.convertFireuserToSessionUser(e)))}getUserSessionStorage(){return JSON.parse(sessionStorage.getItem("user")??"{}")}SignOut(){return this.ngFireAuth.signOut().then(()=>{sessionStorage.removeItem("user"),sessionStorage.removeItem("password"),localStorage.removeItem("user"),localStorage.removeItem("password"),this.router.navigate([""],{replaceUrl:!0})})}convertFireuserToSessionUser(e){return{apiKey:"",appName:"",createdAt:"",displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,isAnonymous:e.isAnonymous,lastLoginAt:e.lastLoginAt,photoURL:e.photoURL,providerData:[],stsTokenManager:{},uid:e.uid}}}_u.\u0275fac=function(e){return new(e||_u)(h.LFG(yO),h.LFG(dE),h.LFG($r),h.LFG(h.R0b))},_u.\u0275prov=h.Yz7({token:_u,factory:_u.\u0275fac,providedIn:"root"});var G8=M(5032);const wO="@firebase/database";let SR="";function IO(n){SR=n}class q8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,G.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,G.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class K8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,G.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const CO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new q8(e)}}catch{}return new K8},qg=CO("localStorage"),AR=CO("sessionStorage"),z_=new Mo.Yd("@firebase/database"),bO=function(){let n=1;return function(){return n++}}(),xO=function(n){const e=(0,G.dS)(n),t=new G.gQ;t.update(e);const r=t.digest();return G.US.encodeByteArray(r)},hE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=hE.apply(null,r):e+="object"==typeof r?(0,G.Wl)(r):r,e+=" "}return e};let Kg=null,DO=!0;const TO=function(n,e){(0,G.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(z_.logLevel=Mo.in.VERBOSE,Kg=z_.log.bind(z_),e&&AR.set("logging_enabled",!0)):"function"==typeof n?Kg=n:(Kg=null,AR.remove("logging_enabled"))},Pi=function(...n){if(!0===DO&&(DO=!1,null===Kg&&!0===AR.get("logging_enabled")&&TO(!0)),Kg){const e=hE.apply(null,n);Kg(e)}},fE=function(n){return function(...e){Pi(n,...e)}},RR=function(...n){const e="FIREBASE INTERNAL ERROR: "+hE(...n);z_.error(e)},Ul=function(...n){const e=`FIREBASE FATAL ERROR: ${hE(...n)}`;throw z_.error(e),new Error(e)},ps=function(...n){const e="FIREBASE WARNING: "+hE(...n);z_.warn(e)},$x=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Pf="[MIN_NAME]",Nd="[MAX_NAME]",Zg=function(n,e){if(n===e)return 0;if(n===Pf||e===Nd)return-1;if(e===Pf||n===Nd)return 1;{const t=RO(n),r=RO(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Q8=function(n,e){return n===e?0:n<e?-1:1},pE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,G.Wl)(e))},MR=function(n){if("object"!=typeof n||null===n)return(0,G.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,G.Wl)(e[r]),t+=":",t+=MR(n[e[r]]);return t+="}",t},SO=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const AO=function(n){(0,G.hu)(!$x(n),"Invalid JSON number");const r=1023;let i,a,l,f,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const C=w.join("");let S="";for(_=0;_<64;_+=8){let B=parseInt(C.substr(_,8),2).toString(16);1===B.length&&(B="0"+B),S+=B}return S.toLowerCase()},t4=new RegExp("^-?(0*)\\d{1,10}$"),RO=function(n){if(t4.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},W_=function(n){try{n()}catch(e){setTimeout(()=>{throw ps("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},gE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class s4{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ps(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class o4{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Pi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ps(e)}}let mE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const OO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,UO="websocket",VO="long_polling";class kR{constructor(e,t,r,i,a=!1,l="",f=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function BO(n,e,t){let r;if((0,G.hu)("string"==typeof e,"typeof type must == string"),(0,G.hu)("object"==typeof t,"typeof params must == object"),e===UO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==VO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function a4(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Oi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class u4{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,G.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,G.p$)(this.counters_)}}const PR={},OR={};function FR(n){const e=n.toString();return PR[e]||(PR[e]=new u4),PR[e]}class c4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&W_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Of{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fE(e),this.stats_=FR(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),BO(t,VO,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new c4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,G.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new LR((...a)=>{const[l,f,_,w,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&OO.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Of.forceAllow_=!0}static forceDisallow(){Of.forceDisallow_=!0}static isAvailable(){return!((0,G.Yr)()||!Of.forceAllow_&&(Of.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,G.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,G.h$)(t),i=SO(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,G.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,G.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class LR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,G.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=bO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=LR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Pi("frame writing exception"),f.stack&&Pi(f.stack),Pi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Pi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,G.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Pi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let zx=null;typeof MozWebSocket<"u"?zx=MozWebSocket:typeof WebSocket<"u"&&(zx=WebSocket);let q_=(()=>{class n{constructor(t,r,i,a,l,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fE(this.connId),this.stats_=FR(r),this.connURL=n.connectionURL_(r,f,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,G.Yr)()&&typeof location<"u"&&location.hostname&&OO.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),BO(t,UO,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qg.set("previous_websocket_failure",!0);try{let i;if((0,G.Yr)()){i={headers:{"User-Agent":`Firebase/5/${SR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new zx(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==zx&&!n.forceDisallow_}static previouslyFailed(){return qg.isInMemoryStorage||!0===qg.get("previous_websocket_failure")}markConnectionHealthy(){qg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,G.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,G.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,G.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=SO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),qO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Of,q_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=q_&&q_.isAvailable();let i=r&&!q_.previouslyFailed();if(t.webSocketOnly&&(r||ps("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[q_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class eF{constructor(e,t,r,i,a,l,f,_,w,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fE("c:"+this.id+":"),this.transportManager_=new qO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=pE("t",e),r=pE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=pE("t",e),r=pE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=pE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?RR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):RR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ps("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),gE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class nF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,G.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,G.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Wx extends nF{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,G.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Wx}getInitialEvent(e){return(0,G.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Nn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xn(){return new Nn("")}function on(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ff(n){return n.pieces_.length-n.pieceNum_}function $n(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Nn(n.pieces_,e)}function VR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function _E(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function sF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Nn(e,0)}function vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Nn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Nn(t,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function Fs(n,e){const t=on(n),r=on(e);if(null===t)return e;if(t===r)return Fs($n(n),$n(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function N4(n,e){const t=_E(n,0),r=_E(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Zg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function BR(n,e){if(Ff(n)!==Ff(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ia(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ff(n)>Ff(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class k4{constructor(e,t){this.errorPrefix_=t,this.parts_=_E(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,G.ug)(this.parts_[r]);oF(this)}}function oF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Yg(n))}function Yg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class HR extends nF{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new HR}getInitialEvent(e){return(0,G.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const yE=1e3;let Kx,Qg=(()=>{class n extends tF{constructor(t,r,i,a,l,f,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=fE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,G.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");HR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Wx.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,G.Wl)(l)),(0,G.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new G.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const _=f.d;"ok"===f.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,G.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,G.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,C=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,G.r3)(t,"w")){const i=(0,G.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ps(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,G.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,G.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,G.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,G.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):RR("Unrecognized action received from server: "+(0,G.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,G.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=yE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Fe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,w=null;const C=function(){w?w.close():(_=!0,a())};t.realtime_={close:C,sendRequest:function(ee){(0,G.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(ee)}};const B=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[ee,le]=yield Promise.all([t.authTokenProvider_.getToken(B),t.appCheckTokenProvider_.getToken(B)]);_?Pi("getToken() completed but was canceled"):(Pi("getToken() completed. Creating connection."),t.authToken_=ee&&ee.accessToken,t.appCheckToken_=le&&le.token,w=new eF(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Oe=>{ps(Oe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(ee){t.log_("Failed to get token: "+ee),_||(t.repoInfo_.nodeAdmin&&ps(ee),C())}}})()}interrupt(t){Pi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Pi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,G.xb)(this.interruptReasons_)&&(this.reconnectDelay_=yE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>MR(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Nn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Pi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Pi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,G.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+SR.replace(/\./g,"-")]=1,(0,G.uI)()?t["framework.cordova"]=1:(0,G.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Wx.getInstance().currentlyOnline();return(0,G.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ln{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ln(e,t)}}class qx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ln(Pf,e),i=new ln(Pf,t);return 0!==this.compare(r,i)}minPost(){return ln.MIN}}class lF extends qx{static get __EMPTY_NODE(){return Kx}static set __EMPTY_NODE(e){Kx=e}compare(e,t){return Zg(e.name,t.name)}isDefinedOn(e){throw(0,G.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ln.MIN}maxPost(){return new ln(Nd,Kx)}makePost(e,t){return(0,G.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new ln(e,Kx)}toString(){return".key"}}const Vl=new lF;class Zx{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let $R,yu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??io.EMPTY_NODE,this.right=l??io.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return io.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return io.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class io{constructor(e,t=io.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new io(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,yu.BLACK,null,null))}remove(e){return new io(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zx(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Zx(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Zx(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Zx(this.root_,null,this.comparator_,!0,e)}}function H4(n,e){return Zg(n.name,e.name)}function jR(n,e){return Zg(n,e)}io.EMPTY_NODE=new class B4{copy(e,t,r,i,a){return this}insert(e,t,r){return new yu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const cF=function(n){return"number"==typeof n?"number:"+AO(n):"string:"+n},dF=function(n){if(n.isLeafNode()){const e=n.val();(0,G.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,G.r3)(e,".sv"),"Priority must be a string or number.")}else(0,G.hu)(n===$R||n.isEmpty(),"priority of unexpected type.");(0,G.hu)(n===$R||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let hF,fF,pF,K_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,G.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),dF(this.priorityNode_)}static set __childrenNodeConstructor(t){hF=t}static get __childrenNodeConstructor(){return hF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return an(t)?this:".priority"===on(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=on(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,G.hu)(".priority"!==i||1===Ff(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild($n(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+cF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?AO(this.value_):this.value_,this.lazyHash_=xO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,G.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,G.hu)(a>=0,"Unknown leaf type: "+r),(0,G.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Zn=new class z4 extends qx{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Zg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ln.MIN}maxPost(){return new ln(Nd,new K_("[PRIORITY-POST]",pF))}makePost(e,t){const r=fF(e);return new ln(t,new K_("[PRIORITY-POST]",r))}toString(){return".priority"}},W4=Math.log(2);class q4{constructor(e){this.count=parseInt(Math.log(e+1)/W4,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yx=function(n,e,t,r){n.sort(e);const i=function(_,w){const C=w-_;let S,B;if(0===C)return null;if(1===C)return S=n[_],B=t?t(S):S,new yu(B,S.node,yu.BLACK,null,null);{const ee=parseInt(C/2,10)+_,le=i(_,ee),Oe=i(ee+1,w);return S=n[ee],B=t?t(S):S,new yu(B,S.node,yu.BLACK,le,Oe)}},f=function(_){let w=null,C=null,S=n.length;const B=function(le,Oe){const je=S-le,_t=S;S-=le;const Ct=i(je+1,_t),ct=n[je],pt=t?t(ct):ct;ee(new yu(pt,ct.node,Oe,null,Ct))},ee=function(le){w?(w.left=le,w=le):(C=le,w=le)};for(let le=0;le<_.count;++le){const Oe=_.nextBitIsOne(),je=Math.pow(2,_.count-(le+1));Oe?B(je,yu.BLACK):(B(je,yu.BLACK),B(je,yu.RED))}return C}(new q4(n.length));return new io(r||e,f)};let GR;const Z_={};class kd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,G.hu)(Z_&&Zn,"ChildrenNode.ts has not been loaded"),GR=GR||new kd({".priority":Z_},{".priority":Zn}),GR}get(e){const t=(0,G.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof io?t:null}hasIndex(e){return(0,G.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,G.hu)(e!==Vl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(ln.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?Yx(r,e.getCompare()):Z_;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const C=Object.assign({},this.indexes_);return C[_]=f,new kd(C,w)}addToIndexes(e,t){const r=(0,G.UI)(this.indexes_,(i,a)=>{const l=(0,G.DV)(this.indexSet_,a);if((0,G.hu)(l,"Missing index implementation for "+a),i===Z_){if(l.isDefinedOn(e.node)){const f=[],_=t.getIterator(ln.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&f.push(w),w=_.getNext();return f.push(e),Yx(f,l.getCompare())}return Z_}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new ln(e.name,f))),_.insert(e,e.node)}});return new kd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,G.UI)(this.indexes_,i=>{if(i===Z_)return i;{const a=t.get(e.name);return a?i.remove(new ln(e.name,a)):i}});return new kd(r,this.indexSet_)}}let vE,Jt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&dF(this.priorityNode_),this.children_.isEmpty()&&(0,G.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vE||(vE=new n(new io(jR),null,kd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?vE:r}}getChild(t){const r=on(t);return null===r?this:this.getImmediateChild(r).getChild($n(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,G.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new ln(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?vE:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=on(t);if(null===i)return r;{(0,G.hu)(".priority"!==on(t)||1===Ff(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild($n(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Zn,(f,_)=>{r[f]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+cF(this.getPriority().val())+":"),this.forEachChild(Zn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":xO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new ln(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ln(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ln(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,ln.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,ln.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===wE?-1:0}withIndex(t){if(t===Vl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Vl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Zn),a=r.getIterator(Zn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Vl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const wE=new class K4 extends Jt{constructor(){super(new io(jR),Jt.EMPTY_NODE,kd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Jt.EMPTY_NODE}isEmpty(){return!1}};function Ar(n,e=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,G.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new K_(n,Ar(e));if(n instanceof Array){let t=Jt.EMPTY_NODE;return Oi(n,(r,i)=>{if((0,G.r3)(n,r)&&"."!==r.substring(0,1)){const a=Ar(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Ar(e))}{const t=[];let r=!1;if(Oi(n,(l,f)=>{if("."!==l.substring(0,1)){const _=Ar(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new ln(l,_)))}}),0===t.length)return Jt.EMPTY_NODE;const a=Yx(t,H4,l=>l.name,jR);if(r){const l=Yx(t,Zn.getCompare());return new Jt(a,Ar(e),new kd({".priority":l},{".priority":Zn}))}return new Jt(a,Ar(e),kd.Default)}}Object.defineProperties(ln,{MIN:{value:new ln(Pf,Jt.EMPTY_NODE)},MAX:{value:new ln(Nd,wE)}}),lF.__EMPTY_NODE=Jt.EMPTY_NODE,K_.__childrenNodeConstructor=Jt,function j4(n){$R=n}(wE),function G4(n){pF=n}(wE),function $4(n){fF=n}(Ar);class zR extends qx{constructor(e){super(),this.indexPath_=e,(0,G.hu)(!an(e)&&".priority"!==on(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Zg(e.name,t.name):a}makePost(e,t){const r=Ar(e),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new ln(t,i)}maxPost(){const e=Jt.EMPTY_NODE.updateChild(this.indexPath_,wE);return new ln(Nd,e)}toString(){return _E(this.indexPath_,0).join("/")}}const WR=new class Y4 extends qx{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Zg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ln.MIN}maxPost(){return ln.MAX}makePost(e,t){const r=Ar(e);return new ln(t,r)}toString(){return".value"}};function gF(n){return{type:"value",snapshotNode:n}}function Y_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function EE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function IE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class qR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,G.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(EE(t,f)):(0,G.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(Y_(t,r)):l.trackChildChange(IE(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Zn,(i,a)=>{t.hasChild(i)||r.trackChildChange(EE(i,a))}),t.isLeafNode()||t.forEachChild(Zn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(IE(i,a,l))}else r.trackChildChange(Y_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class CE{constructor(e){this.indexedFilter_=new qR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=CE.getStartPost_(e),this.endPost_=CE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new ln(t,r))||(r=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Jt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Jt.EMPTY_NODE);const a=this;return t.forEachChild(Zn,(l,f)=>{a.matches(new ln(l,f))||(i=i.updateImmediateChild(l,Jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class X4{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new CE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new ln(t,r))||(r=Jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Jt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Jt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const f=a.getNext();l<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?l++:i=i.updateImmediateChild(f.name,Jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(B,ee)=>S(ee,B)}else l=this.index_.getCompare();const f=e;(0,G.hu)(f.numChildren()===this.limit_,"");const _=new ln(t,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),C=this.rangedFilter_.matches(_);if(f.hasChild(t)){const S=f.getImmediateChild(t);let B=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=B&&(B.name===t||f.hasChild(B.name));)B=i.getChildAfterChild(this.index_,B,this.reverse_);const ee=null==B?1:l(B,_);if(C&&!r.isEmpty()&&ee>=0)return a?.trackChildChange(IE(t,r,S)),f.updateImmediateChild(t,r);{a?.trackChildChange(EE(t,S));const Oe=f.updateImmediateChild(t,Jt.EMPTY_NODE);return null!=B&&this.rangedFilter_.matches(B)?(a?.trackChildChange(Y_(B.name,B.node)),Oe.updateImmediateChild(B.name,B.node)):Oe}}return r.isEmpty()?e:C&&l(w,_)>=0?(null!=a&&(a.trackChildChange(EE(w.name,w.node)),a.trackChildChange(Y_(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(w.name,Jt.EMPTY_NODE)):e}}class Qx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,G.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zn}copy(){const e=new Qx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function KR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function ZR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Xx(n,e){const t=n.copy();return t.index_=e,t}function mF(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Zn?t="$priority":n.index_===WR?t="$value":n.index_===Vl?t="$key":((0,G.hu)(n.index_ instanceof zR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,G.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,G.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,G.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,G.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,G.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function _F(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Zn&&(e.i=n.index_.toString()),e}class Jx extends tF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,G.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Jx.getListenId_(e,r),f={};this.listens_[l]=f;const _=mF(e._queryParams);this.restRequest_(a+".json",_,(w,C)=>{let S=C;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,G.DV)(this.listens_,l)===f){let B;B=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(B,null)}})}unlisten(e,t){const r=Jx.getListenId_(e,t);delete this.listens_[r]}get(e){const t=mF(e._queryParams),r=e._path.toString(),i=new G.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,G.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,G.cI)(f.responseText)}catch{ps("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&ps("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class i3{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function eD(){return{value:null,children:new Map}}function Q_(n,e,t){if(an(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=on(e);n.children.has(r)||n.children.set(r,eD()),Q_(n.children.get(r),e=$n(e),t)}}function YR(n,e){if(an(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Zn,(r,i)=>{Q_(n,new Nn(r),i)}),YR(n,e)}}if(n.children.size>0){const t=on(e);return e=$n(e),n.children.has(t)&&YR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function QR(n,e,t){null!==n.value?t(e,n.value):function s3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{QR(i,new Nn(e.toString()+"/"+r),t)})}class o3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Oi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class l3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new o3(e);const r=1e4+2e4*Math.random();gE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Oi(e,(i,a)=>{a>0&&(0,G.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),gE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ca=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ca||(Ca={})),Ca))();function eM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class tD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ca.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(an(this.path)){if(null!=this.affectedTree.value)return(0,G.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Nn(e));return new tD(xn(),t,this.revert)}}return(0,G.hu)(on(this.path)===e,"operationForChild called for unrelated child."),new tD($n(this.path),this.affectedTree,this.revert)}}class bE{constructor(e,t){this.source=e,this.path=t,this.type=Ca.LISTEN_COMPLETE}operationForChild(e){return an(this.path)?new bE(this.source,xn()):new bE(this.source,$n(this.path))}}class Xg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ca.OVERWRITE}operationForChild(e){return an(this.path)?new Xg(this.source,xn(),this.snap.getImmediateChild(e)):new Xg(this.source,$n(this.path),this.snap)}}class X_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ca.MERGE}operationForChild(e){if(an(this.path)){const t=this.children.subtree(new Nn(e));return t.isEmpty()?null:t.value?new Xg(this.source,xn(),t.value):new X_(this.source,xn(),t)}return(0,G.hu)(on(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new X_(this.source,$n(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Lf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(an(e))return this.isFullyInitialized()&&!this.filtered_;const t=on(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class c3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function xE(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,_)=>function f3(n,e,t){if(null==e.childName||null==t.childName)throw(0,G.g5)("Should only compare child_ events.");const r=new ln(e.childName,e.snapshotNode),i=new ln(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),l.forEach(f=>{const _=function h3(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(_,n.query_))})})}function nD(n,e){return{eventCache:n,serverCache:e}}function DE(n,e,t,r){return nD(new Lf(e,t,r),n.serverCache)}function vF(n,e,t,r){return nD(n.eventCache,new Lf(e,t,r))}function rD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Jg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let tM;class Yn{constructor(e,t=(()=>(tM||(tM=new io(Q8)),tM))()){this.value=e,this.children=t}static fromObject(e){let t=new Yn(null);return Oi(e,(r,i)=>{t=t.set(new Nn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xn(),value:this.value};if(an(e))return null;{const r=on(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue($n(e),t);return null!=a?{path:vr(new Nn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(an(e))return this;{const t=on(e),r=this.children.get(t);return null!==r?r.subtree($n(e)):new Yn(null)}}set(e,t){if(an(e))return new Yn(t,this.children);{const r=on(e),a=(this.children.get(r)||new Yn(null)).set($n(e),t),l=this.children.insert(r,a);return new Yn(this.value,l)}}remove(e){if(an(e))return this.children.isEmpty()?new Yn(null):new Yn(null,this.children);{const t=on(e),r=this.children.get(t);if(r){const i=r.remove($n(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Yn(null):new Yn(this.value,a)}return this}}get(e){if(an(e))return this.value;{const t=on(e),r=this.children.get(t);return r?r.get($n(e)):null}}setTree(e,t){if(an(e))return t;{const r=on(e),a=(this.children.get(r)||new Yn(null)).setTree($n(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Yn(this.value,l)}}fold(e){return this.fold_(xn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,xn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(an(e))return null;{const a=on(e),l=this.children.get(a);return l?l.findOnPath_($n(e),vr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xn(),t)}foreachOnPath_(e,t,r){if(an(e))return this;{this.value&&r(t,this.value);const i=on(e),a=this.children.get(i);return a?a.foreachOnPath_($n(e),vr(t,i),r):new Yn(null)}}foreach(e){this.foreach_(xn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class vu{constructor(e){this.writeTree_=e}static empty(){return new vu(new Yn(null))}}function TE(n,e,t){if(an(e))return new vu(new Yn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Fs(i,e);return a=a.updateChild(l,t),new vu(n.writeTree_.set(i,a))}{const i=new Yn(t),a=n.writeTree_.setTree(e,i);return new vu(a)}}}function nM(n,e,t){let r=n;return Oi(t,(i,a)=>{r=TE(r,vr(e,i),a)}),r}function wF(n,e){if(an(e))return vu.empty();{const t=n.writeTree_.setTree(e,new Yn(null));return new vu(t)}}function rM(n,e){return null!=em(n,e)}function em(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Fs(t.path,e)):null}function EF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Zn,(r,i)=>{e.push(new ln(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ln(r,i.value))}),e}function Uf(n,e){if(an(e))return n;{const t=em(n,e);return new vu(null!=t?new Yn(t):n.writeTree_.subtree(e))}}function iM(n){return n.writeTree_.isEmpty()}function J_(n,e){return IF(xn(),n.writeTree_,e)}function IF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,G.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=IF(vr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(vr(n,".priority"),r)),t}}function iD(n,e){return TF(e,n)}function v3(n,e){if(n.snap)return Ia(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ia(vr(n.path,t),e))return!0;return!1}function E3(n){return n.visible}function CF(n,e,t){let r=vu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)Ia(t,l)?(f=Fs(t,l),r=TE(r,f,a.snap)):Ia(l,t)&&(f=Fs(l,t),r=TE(r,xn(),a.snap.getChild(f)));else{if(!a.children)throw(0,G.g5)("WriteRecord should have .snap or .children");if(Ia(t,l))f=Fs(t,l),r=nM(r,f,a.children);else if(Ia(l,t))if(f=Fs(l,t),an(f))r=nM(r,xn(),a.children);else{const _=(0,G.DV)(a.children,on(f));if(_){const w=_.getChild($n(f));r=TE(r,xn(),w)}}}}}return r}function bF(n,e,t,r,i){if(r||i){const a=Uf(n.visibleWrites,e);return!i&&iM(a)?t:i||null!=t||rM(a,xn())?J_(CF(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ia(w.path,e)||Ia(e,w.path))},e),t||Jt.EMPTY_NODE):null}{const a=em(n.visibleWrites,e);if(null!=a)return a;{const l=Uf(n.visibleWrites,e);return iM(l)?t:null!=t||rM(l,xn())?J_(l,t||Jt.EMPTY_NODE):null}}}function sD(n,e,t,r){return bF(n.writeTree,n.treePath,e,t,r)}function sM(n,e){return function I3(n,e,t){let r=Jt.EMPTY_NODE;const i=em(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Zn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Uf(n.visibleWrites,e);return t.forEachChild(Zn,(l,f)=>{const _=J_(Uf(a,new Nn(l)),f);r=r.updateImmediateChild(l,_)}),EF(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return EF(Uf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function xF(n,e,t,r){return function C3(n,e,t,r,i){(0,G.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=vr(e,t);if(rM(n.visibleWrites,a))return null;{const l=Uf(n.visibleWrites,a);return iM(l)?i.getChild(t):J_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function oD(n,e){return function x3(n,e){return em(n.visibleWrites,e)}(n.writeTree,vr(n.treePath,e))}function oM(n,e,t){return function b3(n,e,t,r){const i=vr(e,t),a=em(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?J_(Uf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function DF(n,e){return TF(vr(n.treePath,e),n.writeTree)}function TF(n,e){return{treePath:n,writeTree:e}}class A3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,G.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,G.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,IE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,EE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Y_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,G.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,IE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const SF=new class R3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class aM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Lf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jg(this.viewCache_),a=function S3(n,e,t,r,i,a){return function D3(n,e,t,r,i,a,l){let f;const _=Uf(n.visibleWrites,e),w=em(_,xn());if(null!=w)f=w;else{if(null==t)return[];f=J_(_,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const C=[],S=l.getCompare(),B=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let ee=B.getNext();for(;ee&&C.length<i;)0!==S(ee,r)&&C.push(ee),ee=B.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function AF(n,e,t,r,i,a){const l=e.eventCache;if(null!=oD(r,t))return e;{let f,_;if(an(t))if((0,G.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Jg(e),S=sM(r,w instanceof Jt?w:Jt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=sD(r,Jg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=on(t);if(".priority"===w){(0,G.hu)(1===Ff(t),"Can't have a priority with additional path components");const C=l.getNode();_=e.serverCache.getNode();const S=xF(r,t,C,_);f=null!=S?n.filter.updatePriority(C,S):l.getNode()}else{const C=$n(t);let S;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const B=xF(r,t,l.getNode(),_);S=null!=B?l.getNode().getImmediateChild(w).updateChild(C,B):l.getNode().getImmediateChild(w)}else S=oM(r,w,e.serverCache);f=null!=S?n.filter.updateChild(l.getNode(),w,S,C,i,a):l.getNode()}}return DE(e,f,l.isFullyInitialized()||an(t),n.filter.filtersNodes())}}function aD(n,e,t,r,i,a,l,f){const _=e.serverCache;let w;const C=l?n.filter:n.filter.getIndexedFilter();if(an(t))w=C.updateFullNode(_.getNode(),r,null);else if(C.filtersNodes()&&!_.isFiltered()){const ee=_.getNode().updateChild(t,r);w=C.updateFullNode(_.getNode(),ee,null)}else{const ee=on(t);if(!_.isCompleteForPath(t)&&Ff(t)>1)return e;const le=$n(t),je=_.getNode().getImmediateChild(ee).updateChild(le,r);w=".priority"===ee?C.updatePriority(_.getNode(),je):C.updateChild(_.getNode(),ee,je,le,SF,null)}const S=vF(e,w,_.isFullyInitialized()||an(t),C.filtersNodes());return AF(n,S,t,i,new aM(i,S,a),f)}function uM(n,e,t,r,i,a,l){const f=e.eventCache;let _,w;const C=new aM(i,e,a);if(an(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=DE(e,w,!0,n.filter.filtersNodes());else{const S=on(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=DE(e,w,f.isFullyInitialized(),f.isFiltered());else{const B=$n(t),ee=f.getNode().getImmediateChild(S);let le;if(an(B))le=r;else{const Oe=C.getCompleteChild(S);le=null!=Oe?".priority"===VR(B)&&Oe.getChild(sF(B)).isEmpty()?Oe:Oe.updateChild(B,r):Jt.EMPTY_NODE}_=ee.equals(le)?e:DE(e,n.filter.updateChild(f.getNode(),S,le,B,C,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function RF(n,e){return n.eventCache.isCompleteForChild(e)}function MF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function lM(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=an(t)?r:new Yn(null).setTree(t,r);const C=e.serverCache.getNode();return w.children.inorderTraversal((S,B)=>{if(C.hasChild(S)){const le=MF(0,e.serverCache.getNode().getImmediateChild(S),B);_=aD(n,_,new Nn(S),le,i,a,l,f)}}),w.children.inorderTraversal((S,B)=>{const ee=!e.serverCache.isCompleteForChild(S)&&null===B.value;if(!C.hasChild(S)&&!ee){const Oe=MF(0,e.serverCache.getNode().getImmediateChild(S),B);_=aD(n,_,new Nn(S),Oe,i,a,l,f)}}),_}class V3{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new qR(r.getIndex()),a=function J4(n){return n.loadsAllData()?new qR(n.getIndex()):n.hasLimit()?new X4(n):new CE(n)}(r);this.processor_=function M3(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,_=i.updateFullNode(Jt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Jt.EMPTY_NODE,f.getNode(),null),C=new Lf(_,l.isFullyInitialized(),i.filtersNodes()),S=new Lf(w,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=nD(S,C),this.eventGenerator_=new c3(this.query_)}get query(){return this.query_}}function j3(n,e){const t=Jg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!an(e)&&!t.getImmediateChild(on(e)).isEmpty())?t.getChild(e):null}function NF(n){return 0===n.eventRegistrations_.length}function kF(n,e,t){const r=[];if(t){(0,G.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function PF(n,e,t,r){e.type===Ca.MERGE&&null!==e.source.queryId&&((0,G.hu)(Jg(n.viewCache_),"We should always have a full cache before handling merges"),(0,G.hu)(rD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function k3(n,e,t,r,i){const a=new A3;let l,f;if(t.type===Ca.OVERWRITE){const w=t;w.source.fromUser?l=uM(n,e,w.path,w.snap,r,i,a):((0,G.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!an(w.path),l=aD(n,e,w.path,w.snap,r,i,f,a))}else if(t.type===Ca.MERGE){const w=t;w.source.fromUser?l=function O3(n,e,t,r,i,a,l){let f=e;return r.foreach((_,w)=>{const C=vr(t,_);RF(e,on(C))&&(f=uM(n,f,C,w,i,a,l))}),r.foreach((_,w)=>{const C=vr(t,_);RF(e,on(C))||(f=uM(n,f,C,w,i,a,l))}),f}(n,e,w.path,w.children,r,i,a):((0,G.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),l=lM(n,e,w.path,w.children,r,i,f,a))}else if(t.type===Ca.ACK_USER_WRITE){const w=t;l=w.revert?function U3(n,e,t,r,i,a){let l;if(null!=oD(r,t))return e;{const f=new aM(r,e,i),_=e.eventCache.getNode();let w;if(an(t)||".priority"===on(t)){let C;if(e.serverCache.isFullyInitialized())C=sD(r,Jg(e));else{const S=e.serverCache.getNode();(0,G.hu)(S instanceof Jt,"serverChildren would be complete if leaf node"),C=sM(r,S)}w=n.filter.updateFullNode(_,C,a)}else{const C=on(t);let S=oM(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=_.getImmediateChild(C)),w=null!=S?n.filter.updateChild(_,C,S,$n(t),f,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(_,C,Jt.EMPTY_NODE,$n(t),f,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=sD(r,Jg(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=oD(r,xn()),DE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function F3(n,e,t,r,i,a,l){if(null!=oD(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(an(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return aD(n,e,t,_.getNode().getChild(t),i,a,f,l);if(an(t)){let w=new Yn(null);return _.getNode().forEachChild(Vl,(C,S)=>{w=w.set(new Nn(C),S)}),lM(n,e,t,w,i,a,f,l)}return e}{let w=new Yn(null);return r.foreach((C,S)=>{const B=vr(t,C);_.isCompleteForPath(B)&&(w=w.set(C,_.getNode().getChild(B)))}),lM(n,e,t,w,i,a,f,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Ca.LISTEN_COMPLETE)throw(0,G.g5)("Unknown operation type: "+t.type);l=function L3(n,e,t,r,i){const a=e.serverCache;return AF(n,vF(e,a.getNode(),a.isFullyInitialized()||an(t),a.isFiltered()),t,r,SF,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function P3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=rD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(gF(rD(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function N3(n,e){(0,G.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,G.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,G.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,OF(n,a.changes,a.viewCache.eventCache.getNode(),null)}function OF(n,e,t,r){return function d3(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function Q4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),xE(n,i,"child_removed",e,r,t),xE(n,i,"child_added",e,r,t),xE(n,i,"child_moved",a,r,t),xE(n,i,"child_changed",e,r,t),xE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let uD,cD;class FF{constructor(){this.views=new Map}}function cM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,G.hu)(null!=a,"SyncTree gave us an op for an invalid query."),PF(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(PF(l,e,t,r));return a}}function LF(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=sD(t,i?r:null),_=!1;f?_=!0:r instanceof Jt?(f=sM(t,r),_=!1):(f=Jt.EMPTY_NODE,_=!1);const w=nD(new Lf(f,_,!1),new Lf(r,i,!1));return new V3(e,w)}return l}function UF(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Vf(n,e){let t=null;for(const r of n.views.values())t=t||j3(r,e);return t}function VF(n,e){return e._queryParams.loadsAllData()?lD(n):n.views.get(e._queryIdentifier)}function BF(n,e){return null!=VF(n,e)}function Bf(n){return null!=lD(n)}function lD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let X3=1;class HF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yn(null),this.pendingWriteTree_=function T3(){return{visibleWrites:vu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dM(n,e,t,r,i){return function g3(n,e,t,r,i){(0,G.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=TE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ey(n,new Xg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Hf(n,e,t=!1){const r=function _3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function y3(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,G.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&v3(f,r.path)?i=!1:Ia(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function w3(n){n.visibleWrites=CF(n.allWrites,E3,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=wF(n.visibleWrites,r.path):Oi(r.children,_=>{n.visibleWrites=wF(n.visibleWrites,vr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Yn(null);return null!=r.snap?a=a.set(xn(),!0):Oi(r.children,l=>{a=a.set(new Nn(l),!0)}),ey(n,new tD(r.path,a,t))}return[]}function SE(n,e,t){return ey(n,new Xg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function dD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||BF(l,e))){const _=function Z3(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=Bf(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(kF(w,t,r)),NF(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(kF(_,t,r)),NF(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return f&&!Bf(n)&&a.push(new(function W3(){return(0,G.hu)(uD,"Reference.ts has not been loaded"),uD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function q3(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(f=_.events,!i){const C=-1!==w.findIndex(B=>B._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(B,ee)=>Bf(ee));if(C&&!S){const B=n.syncPointTree_.subtree(a);if(!B.isEmpty()){const ee=function sH(n){return n.fold((e,t,r)=>{if(t&&Bf(t))return[lD(t)];{let i=[];return t&&(i=UF(t)),Oi(r,(a,l)=>{i=i.concat(l)}),i}})}(B);for(let le=0;le<ee.length;++le){const Oe=ee[le],je=Oe.query,_t=zF(n,Oe);n.listenProvider_.startListening(RE(je),AE(n,je),_t.hashFn,_t.onComplete)}}}!S&&w.length>0&&!r&&(C?n.listenProvider_.stopListening(RE(e),null):w.forEach(B=>{const ee=n.queryToTagMap.get(fD(B));n.listenProvider_.stopListening(RE(B),ee)}))}!function oH(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=fD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return f}function jF(n,e,t,r){const i=fM(n,r);if(null!=i){const a=pM(i),l=a.path,f=a.queryId,_=Fs(l,e);return gM(n,l,new Xg(eM(f),_,t))}return[]}function hM(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(B,ee)=>{const le=Fs(B,i);a=a||Vf(ee,le),l=l||Bf(ee)});let _,f=n.syncPointTree_.get(i);f?(l=l||Bf(f),a=a||Vf(f,xn())):(f=new FF,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?_=!0:(_=!1,a=Jt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((ee,le)=>{const Oe=Vf(le,xn());Oe&&(a=a.updateImmediateChild(ee,Oe))}));const w=BF(f,e);if(!w&&!e._queryParams.loadsAllData()){const B=fD(e);(0,G.hu)(!n.queryToTagMap.has(B),"View does not exist, but we have a tag");const ee=function aH(){return X3++}();n.queryToTagMap.set(B,ee),n.tagToQueryMap.set(ee,B)}let S=function K3(n,e,t,r,i,a){const l=LF(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function $3(n,e){n.eventRegistrations_.push(e)}(l,t),function G3(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Zn,(a,l)=>{r.push(Y_(a,l))}),t.isFullyInitialized()&&r.push(gF(t.getNode())),OF(n,r,t.getNode(),e)}(l,t)}(f,e,t,iD(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const B=VF(f,e);S=S.concat(function uH(n,e,t){const r=e._path,i=AE(n,e),a=zF(n,t),l=n.listenProvider_.startListening(RE(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,G.hu)(!Bf(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((w,C,S)=>{if(!an(w)&&C&&Bf(C))return[lD(C).query];{let B=[];return C&&(B=B.concat(UF(C).map(ee=>ee.query))),Oi(S,(ee,le)=>{B=B.concat(le)}),B}});for(let w=0;w<_.length;++w){const C=_[w];n.listenProvider_.stopListening(RE(C),AE(n,C))}}return l}(n,e,B))}return S}function hD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const w=Vf(f,Fs(l,e));if(w)return w});return bF(i,e,a,t,!0)}function ey(n,e){return $F(e,n.syncPointTree_,null,iD(n.pendingWriteTree_,xn()))}function $F(n,e,t,r){if(an(n.path))return GF(n,e,t,r);{const i=e.get(xn());null==t&&null!=i&&(t=Vf(i,xn()));let a=[];const l=on(n.path),f=n.operationForChild(l),_=e.children.get(l);if(_&&f){const w=t?t.getImmediateChild(l):null,C=DF(r,l);a=a.concat($F(f,_,w,C))}return i&&(a=a.concat(cM(i,n,r,t))),a}}function GF(n,e,t,r){const i=e.get(xn());null==t&&null!=i&&(t=Vf(i,xn()));let a=[];return e.children.inorderTraversal((l,f)=>{const _=t?t.getImmediateChild(l):null,w=DF(r,l),C=n.operationForChild(l);C&&(a=a.concat(GF(C,f,_,w)))}),i&&(a=a.concat(cM(i,n,r,t))),a}function zF(n,e){const t=e.query,r=AE(n,t);return{hashFn:()=>(function B3(n){return n.viewCache_.serverCache.getNode()}(e)||Jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function nH(n,e,t){const r=fM(n,t);if(r){const i=pM(r),a=i.path,l=i.queryId,f=Fs(a,e);return gM(n,a,new bE(eM(l),f))}return[]}(n,t._path,r):function tH(n,e){return ey(n,new bE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function e4(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return dD(n,t,null,a)}}}}function AE(n,e){const t=fD(e);return n.queryToTagMap.get(t)}function fD(n){return n._path.toString()+"$"+n._queryIdentifier}function fM(n,e){return n.tagToQueryMap.get(e)}function pM(n){const e=n.indexOf("$");return(0,G.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Nn(n.substr(0,e))}}function gM(n,e,t){const r=n.syncPointTree_.get(e);return(0,G.hu)(r,"Missing sync point for query tag that we're tracking"),cM(r,t,iD(n.pendingWriteTree_,e),null)}function RE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Q3(){return(0,G.hu)(cD,"Reference.ts has not been loaded"),cD}())(n._repo,n._path):n}class mM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new mM(t)}node(){return this.node_}}class _M{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=vr(this.path_,e);return new _M(this.syncTree_,t)}node(){return hD(this.syncTree_,this.path_)}}const WF=function(n,e,t){return n&&"object"==typeof n?((0,G.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?cH(n[".sv"],e,t):"object"==typeof n[".sv"]?dH(n[".sv"],e):void(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},cH=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,G.hu)(!1,"Unexpected server value: "+n)},dH=function(n,e,t){n.hasOwnProperty("increment")||(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,G.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,G.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},qF=function(n,e,t,r){return vM(e,new _M(t,n),r)},yM=function(n,e,t){return vM(n,new mM(e),t)};function vM(n,e,t){const r=n.getPriority().val(),i=WF(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=WF(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new K_(f,Ar(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new K_(i))),l.forEachChild(Zn,(f,_)=>{const w=vM(_,e.getImmediateChild(f),t);w!==_&&(a=a.updateImmediateChild(f,w))}),a}}class wM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function pD(n,e){let t=e instanceof Nn?e:new Nn(e),r=n,i=on(t);for(;null!==i;){const a=(0,G.DV)(r.node.children,i)||{children:{},childCount:0};r=new wM(i,r,a),t=$n(t),i=on(t)}return r}function tm(n){return n.node.value}function EM(n,e){n.node.value=e,IM(n)}function KF(n){return n.node.childCount>0}function gD(n,e){Oi(n.node.children,(t,r)=>{e(new wM(t,n,r))})}function ZF(n,e,t,r){t&&!r&&e(n),gD(n,i=>{ZF(i,e,!0,r)}),t&&r&&e(n)}function ME(n){return new Nn(null===n.parent?n.name:ME(n.parent)+"/"+n.name)}function IM(n){null!==n.parent&&function pH(n,e,t){const r=function hH(n){return void 0===tm(n)&&!KF(n)}(t),i=(0,G.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,IM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,IM(n))}(n.parent,n.name,n)}const gH=/[\[\].#$\/\u0000-\u001F\u007F]/,mH=/[\[\].#$\u0000-\u001F\u007F]/,CM=10485760,mD=function(n){return"string"==typeof n&&0!==n.length&&!gH.test(n)},YF=function(n){return"string"==typeof n&&0!==n.length&&!mH.test(n)},NE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!$x(n)||n&&"object"==typeof n&&(0,G.r3)(n,".sv")},Bl=function(n,e,t,r){r&&void 0===e||kE((0,G.gK)(n,"value"),e,t)},kE=function(n,e,t){const r=t instanceof Nn?new k4(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Yg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Yg(r)+" with contents = "+e.toString());if($x(e))throw new Error(n+"contains "+e.toString()+" "+Yg(r));if("string"==typeof e&&e.length>CM/3&&(0,G.ug)(e)>CM)throw new Error(n+"contains a string greater than "+CM+" utf8 bytes "+Yg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Oi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!mD(l)))throw new Error(n+" contains an invalid key ("+l+") "+Yg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function P4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,G.ug)(e),oF(n)})(r,l),kE(n,f,r),function O4(n){const e=n.parts_.pop();n.byteLength_-=(0,G.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Yg(r)+" in addition to actual children.")}},QF=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,G.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Oi(e,(l,f)=>{const _=new Nn(l);if(kE(i,f,vr(t,_)),".priority"===VR(_)&&!NE(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=_E(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!mD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(N4);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ia(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},bM=function(n,e,t){if(!t||void 0!==e){if($x(e))throw new Error((0,G.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!NE(e))throw new Error((0,G.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},PE=function(n,e,t,r){if(!(r&&void 0===t||mD(t)))throw new Error((0,G.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},OE=function(n,e,t,r){if(!(r&&void 0===t||YF(t)))throw new Error((0,G.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ba=function(n,e){if(".info"===on(e))throw new Error(n+" failed = Can't modify data under /.info/")},XF=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!mD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),YF(n)}(t))throw new Error((0,G.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _D(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!BR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function JF(n,e,t){_D(n,t),eL(n,r=>BR(r,e))}function Po(n,e,t){_D(n,t),eL(n,r=>Ia(r,e)||Ia(e,r))}function eL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(EH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function EH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Kg&&Pi("event: "+t.toString()),W_(r)}}}const tL="repo_interrupt";class CH{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eD(),this.transactionQueueTree_=new wM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nL(n){const t=n.infoData_.getNode(new Nn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function FE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:nL(n)})}function rL(n,e,t,r,i){n.dataUpdateCount++;const a=new Nn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,G.UI)(t,w=>Ar(w));l=function rH(n,e,t,r){const i=fM(n,r);if(i){const a=pM(i),l=a.path,f=a.queryId,_=Fs(l,e),w=Yn.fromObject(t);return gM(n,l,new X_(eM(f),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Ar(t);l=jF(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,G.UI)(t,w=>Ar(w));l=function eH(n,e,t){const r=Yn.fromObject(t);return ey(n,new X_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Ar(t);l=SE(n.serverSyncTree_,a,_)}let f=a;l.length>0&&(f=ny(n,a)),Po(n.eventQueue_,f,l)}function iL(n,e){xM(n,"connected",e),!1===e&&function SH(n){ty(n,"onDisconnectEvents");const e=FE(n),t=eD();QR(n.onDisconnect_,xn(),(i,a)=>{const l=qF(i,a,n.serverSyncTree_,e);Q_(t,i,l)});let r=[];QR(t,xn(),(i,a)=>{r=r.concat(SE(n.serverSyncTree_,i,a));const l=AM(n,i);ny(n,l)}),n.onDisconnect_=eD(),Po(n.eventQueue_,xn(),r)}(n)}function xM(n,e,t){const r=new Nn("/.info/"+e),i=Ar(t);n.infoData_.updateSnapshot(r,i);const a=SE(n.infoSyncTree_,r,i);Po(n.eventQueue_,r,a)}function yD(n){return n.nextWriteId_++}function DM(n,e,t,r,i){ty(n,"set",{path:e.toString(),value:t,priority:r});const a=FE(n),l=Ar(t,r),f=hD(n.serverSyncTree_,e),_=yM(l,f,a),w=yD(n),C=dM(n.serverSyncTree_,e,_,w,!0);_D(n.eventQueue_,C),n.server_.put(e.toString(),l.val(!0),(B,ee)=>{const le="ok"===B;le||ps("set at "+e+" failed: "+B);const Oe=Hf(n.serverSyncTree_,w,!le);Po(n.eventQueue_,e,Oe),jf(0,i,B,ee)});const S=AM(n,e);ny(n,S),Po(n.eventQueue_,S,[])}function AH(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&YR(n.onDisconnect_,e),jf(0,t,r,i)})}function sL(n,e,t,r){const i=Ar(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Q_(n.onDisconnect_,e,i),jf(0,r,a,l)})}function TM(n,e,t){let r;r=".info"===on(e._path)?dD(n.infoSyncTree_,e,t):dD(n.serverSyncTree_,e,t),JF(n.eventQueue_,e._path,r)}function oL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(tL)}function ty(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Pi(t,...e)}function jf(n,e,t,r){e&&W_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function SM(n,e,t){return hD(n.serverSyncTree_,e,t)||Jt.EMPTY_NODE}function vD(n,e=n.transactionQueueTree_){if(e||wD(n,e),tm(e)){const t=uL(n,e);(0,G.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function OH(n,e,t){const r=t.map(w=>w.currentWriteId),i=SM(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const C=t[w];(0,G.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=Fs(e,C.path);a=a.updateChild(S,C.currentOutputSnapshotRaw)}const f=a.val(!0),_=e;n.server_.put(_.toString(),f,w=>{ty(n,"transaction put response",{path:_.toString(),status:w});let C=[];if("ok"===w){const S=[];for(let B=0;B<t.length;B++)t[B].status=2,C=C.concat(Hf(n.serverSyncTree_,t[B].currentWriteId)),t[B].onComplete&&S.push(()=>t[B].onComplete(null,!0,t[B].currentOutputSnapshotResolved)),t[B].unwatcher();wD(n,pD(n.transactionQueueTree_,e)),vD(n,n.transactionQueueTree_),Po(n.eventQueue_,e,C);for(let B=0;B<S.length;B++)W_(S[B])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ps("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}ny(n,e)}},l)}(n,ME(e),t)}else KF(e)&&gD(e,t=>{vD(n,t)})}function ny(n,e){const t=aL(n,e),r=ME(t);return function FH(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],w=Fs(t,_.path);let S,C=!1;if((0,G.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)C=!0,S=_.abortReason,i=i.concat(Hf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)C=!0,S="maxretry",i=i.concat(Hf(n.serverSyncTree_,_.currentWriteId,!0));else{const B=SM(n,_.path,l);_.currentInputSnapshot=B;const ee=e[f].update(B.val());if(void 0!==ee){kE("transaction failed: Data returned ",ee,_.path);let le=Ar(ee);"object"==typeof ee&&null!=ee&&(0,G.r3)(ee,".priority")||(le=le.updatePriority(B.getPriority()));const je=_.currentWriteId,_t=FE(n),Ct=yM(le,B,_t);_.currentOutputSnapshotRaw=le,_.currentOutputSnapshotResolved=Ct,_.currentWriteId=yD(n),l.splice(l.indexOf(je),1),i=i.concat(dM(n.serverSyncTree_,_.path,Ct,_.currentWriteId,_.applyLocally)),i=i.concat(Hf(n.serverSyncTree_,je,!0))}else C=!0,S="nodata",i=i.concat(Hf(n.serverSyncTree_,_.currentWriteId,!0))}Po(n.eventQueue_,t,i),i=[],C&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}wD(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)W_(r[f]);vD(n,n.transactionQueueTree_)}(n,uL(n,t),r),r}function aL(n,e){let t,r=n.transactionQueueTree_;for(t=on(e);null!==t&&void 0===tm(r);)r=pD(r,t),t=on(e=$n(e));return r}function uL(n,e){const t=[];return lL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function lL(n,e,t){const r=tm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);gD(e,i=>{lL(n,i,t)})}function wD(n,e){const t=tm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,EM(e,t.length>0?t:void 0)}gD(e,r=>{wD(n,r)})}function AM(n,e){const t=ME(aL(n,e)),r=pD(n.transactionQueueTree_,e);return function fH(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{RM(n,i)}),RM(n,r),ZF(r,i=>{RM(n,i)}),t}function RM(n,e){const t=tm(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,G.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,G.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Hf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?EM(e,void 0):t.length=a+1,Po(n.eventQueue_,ME(e),i);for(let l=0;l<r.length;l++)W_(r[l])}}const MM=function(n,e){const t=VH(n),r=t.namespace;return"firebase.com"===t.domain&&Ul(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ul("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ps("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new kR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Nn(t.pathString)}},VH=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function LH(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,S)));const B=function UH(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ps(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===f||"wss"===f,_=parseInt(e.substring(w+1),10)):w=e.length;const ee=e.slice(0,w);if("localhost"===ee.toLowerCase())t="localhost";else if(ee.split(".").length<=2)t=ee;else{const le=e.indexOf(".");r=e.substring(0,le).toLowerCase(),t=e.substring(le+1),a=r}"ns"in B&&(a=B.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}},cL="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",BH=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=cL.charAt(t%64),t=Math.floor(t/64);(0,G.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=cL.charAt(e[i]);return(0,G.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class dL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,G.Wl)(this.snapshot.exportVal())}}class hL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class NM{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,G.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class fL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new G.BH;return AH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ba("OnDisconnect.remove",this._path);const e=new G.BH;return sL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ba("OnDisconnect.set",this._path),Bl("OnDisconnect.set",e,this._path,!1);const t=new G.BH;return sL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ba("OnDisconnect.setWithPriority",this._path),Bl("OnDisconnect.setWithPriority",e,this._path,!1),bM("OnDisconnect.setWithPriority",t,!1);const r=new G.BH;return function RH(n,e,t,r,i){const a=Ar(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&Q_(n.onDisconnect_,e,a),jf(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ba("OnDisconnect.update",this._path),QF("OnDisconnect.update",e,this._path,!1);const t=new G.BH;return function MH(n,e,t,r){if((0,G.xb)(t))return Pi("onDisconnect().update() called with empty data.  Don't do anything."),void jf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Oi(t,(l,f)=>{const _=Ar(f);Q_(n.onDisconnect_,vr(e,l),_)}),jf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class so{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return an(this._path)?null:VR(this._path)}get ref(){return new xa(this._repo,this._path)}get _queryIdentifier(){const e=_F(this._queryParams),t=MR(e);return"{}"===t?"default":t}get _queryObject(){return _F(this._queryParams)}isEqual(e){if(!((e=(0,G.m9)(e))instanceof so))return!1;const t=this._repo===e._repo,r=BR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function M4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ED(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function $f(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Vl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Pf)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Nd)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Zn){if(null!=e&&!NE(e)||null!=t&&!NE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,G.hu)(n.getIndex()instanceof zR||n.getIndex()===WR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ID(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class xa extends so{constructor(e,t){super(e,t,new Qx,!1)}get parent(){const e=sF(this._path);return null===e?null:new xa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class nm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Nn(e),r=rm(this.ref,e);return new nm(this._node.getChild(t),r,Zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new nm(i,rm(this.ref,r),Zn)))}hasChild(e){const t=new Nn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pL(n,e){return(n=(0,G.m9)(n))._checkNotDeleted("ref"),void 0!==e?rm(n._root,e):n._root}function gL(n,e){(n=(0,G.m9)(n))._checkNotDeleted("refFromURL");const t=MM(e,n._repo.repoInfo_.nodeAdmin);XF("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ul("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),pL(n,t.path.toString())}function rm(n,e){return null===on((n=(0,G.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),OE("child","path",t,!1)):OE("child","path",e,!1),new xa(n._repo,vr(n._path,e));var t}function kM(n,e){n=(0,G.m9)(n),ba("set",n._path),Bl("set",e,n._path,!1);const t=new G.BH;return DM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function zH(n,e){QF("update",e,n._path,!1);const t=new G.BH;return function TH(n,e,t,r){ty(n,"update",{path:e.toString(),value:t});let i=!0;const a=FE(n),l={};if(Oi(t,(f,_)=>{i=!1,l[f]=qF(vr(e,f),Ar(_),n.serverSyncTree_,a)}),i)Pi("update() called with empty data.  Don't do anything."),jf(0,r,"ok",void 0);else{const f=yD(n),_=function J3(n,e,t,r){!function m3(n,e,t,r){(0,G.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=nM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Yn.fromObject(t);return ey(n,new X_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);_D(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,C)=>{const S="ok"===w;S||ps("update at "+e+" failed: "+w);const B=Hf(n.serverSyncTree_,f,!S),ee=B.length>0?ny(n,e):e;Po(n.eventQueue_,ee,B),jf(0,r,w,C)}),Oi(t,w=>{const C=AM(n,vr(e,w));ny(n,C)}),Po(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function WH(n){n=(0,G.m9)(n);const e=new NM(()=>{}),t=new LE(e);return function DH(n,e,t){const r=function iH(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,C)=>{const S=Fs(w,t);r=r||Vf(C,S)});let i=n.syncPointTree_.get(t);i?r=r||Vf(i,xn()):(i=new FF,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Lf(r,!0,!1):null;return function H3(n){return rD(n.viewCache_)}(LF(i,e,iD(n.pendingWriteTree_,e._path),a?l.getNode():Jt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Ar(i).withIndex(e._queryParams.getIndex());let l;if(hM(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=SE(n.serverSyncTree_,e._path,a);else{const f=AE(n.serverSyncTree_,e);l=jF(n.serverSyncTree_,e._path,a,f)}return Po(n.eventQueue_,e._path,l),dD(n.serverSyncTree_,e,t,null,!0),a},i=>(ty(n,"get for query "+(0,G.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new nm(r,new xa(n._repo,n._path),n._queryParams.getIndex()))}class LE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new dL("value",this,new nm(e.snapshotNode,new xa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new hL(this,e,t):null}matches(e){return e instanceof LE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class CD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new hL(this,e,t):null}createEvent(e,t){(0,G.hu)(null!=e.childName,"Child events should have a childName.");const r=rm(new xa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new dL(e.type,this,new nm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof CD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function UE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(C,S)=>{TM(n._repo,n,f),_(C,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new NM(t,a||void 0),f="value"===e?new LE(l):new CD(e,l);return function NH(n,e,t){let r;r=".info"===on(e._path)?hM(n.infoSyncTree_,e,t):hM(n.serverSyncTree_,e,t),JF(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>TM(n._repo,n,f)}function PM(n,e,t,r){return UE(n,"value",e,t,r)}function mL(n,e,t,r){return UE(n,"child_added",e,t,r)}function _L(n,e,t,r){return UE(n,"child_changed",e,t,r)}function yL(n,e,t,r){return UE(n,"child_moved",e,t,r)}function vL(n,e,t,r){return UE(n,"child_removed",e,t,r)}function wL(n,e,t){let r=null;const i=t?new NM(t):null;"value"===e?r=new LE(i):e&&(r=new CD(e,i)),TM(n._repo,n,r)}class wu{}class EL extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("endAt",this._value,e._path,!0);const t=ZR(e._queryParams,this._value,this._key);if(ID(t),$f(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new so(e._repo,e._path,t,e._orderByCalled)}}class KH extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("endBefore",this._value,e._path,!1);const t=function r3(n,e,t){let r;return r=ZR(n,e,n.index_===Vl||t?t:Pf),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(ID(t),$f(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new so(e._repo,e._path,t,e._orderByCalled)}}class IL extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("startAt",this._value,e._path,!0);const t=KR(e._queryParams,this._value,this._key);if(ID(t),$f(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new so(e._repo,e._path,t,e._orderByCalled)}}class QH extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("startAfter",this._value,e._path,!1);const t=function n3(n,e,t){let r;return r=KR(n,e,n.index_===Vl||t?t:Nd),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ID(t),$f(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new so(e._repo,e._path,t,e._orderByCalled)}}class JH extends wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new so(e._repo,e._path,function e3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class t6 extends wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new so(e._repo,e._path,function t3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class r6 extends wu{constructor(e){super(),this._path=e}_apply(e){ED(e,"orderByChild");const t=new Nn(this._path);if(an(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new zR(t),i=Xx(e._queryParams,r);return $f(i),new so(e._repo,e._path,i,!0)}}class s6 extends wu{_apply(e){ED(e,"orderByKey");const t=Xx(e._queryParams,Vl);return $f(t),new so(e._repo,e._path,t,!0)}}class a6 extends wu{_apply(e){ED(e,"orderByPriority");const t=Xx(e._queryParams,Zn);return $f(t),new so(e._repo,e._path,t,!0)}}class l6 extends wu{_apply(e){ED(e,"orderByValue");const t=Xx(e._queryParams,WR);return $f(t),new so(e._repo,e._path,t,!0)}}class d6 extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Bl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new EL(this._value,this._key)._apply(new IL(this._value,this._key)._apply(e))}}function Eu(n,...e){let t=(0,G.m9)(n);for(const r of e)t=r._apply(t);return t}(function z3(n){(0,G.hu)(!uD,"__referenceConstructor has already been defined"),uD=n})(xa),function Y3(n){(0,G.hu)(!cD,"__referenceConstructor has already been defined"),cD=n}(xa);const OM={};function bL(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ul("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=MM(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${f.namespace}`,l=MM(a,i),f=l.repoInfo):_=!l.repoInfo.secure;const C=i&&_?new mE(mE.OWNER):new o4(n.name,n.options,e);XF("Invalid Firebase Database URL",l),an(l.path)||Ul("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function m6(n,e,t,r){let i=OM[e.name];i||(i={},OM[e.name]=i);let a=i[n.toURLString()];return a&&Ul("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new CH(n,false,t,r),i[n.toURLString()]=a,a}(f,n,C,new s4(n.name,t));return new y6(S,n)}class y6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function bH(n,e,t){if(n.stats_=FR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Jx(n.repoInfo_,(r,i,a,l)=>{rL(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>iL(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,G.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Qg(n.repoInfo_,e,(r,i,a,l)=>{rL(n,r,i,a,l)},r=>{iL(n,r)},r=>{!function xH(n,e){Oi(e,(t,r)=>{xM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function l4(n,e){const t=n.toString();return OR[t]||(OR[t]=e()),OR[t]}(n.repoInfo_,()=>new l3(n.stats_,n.server_)),n.infoData_=new i3,n.infoSyncTree_=new HF({startListening:(r,i,a,l)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=SE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),xM(n,"connected",!1),n.serverSyncTree_=new HF({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,_)=>{const w=l(f,_);Po(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xa(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function g6(n,e){const t=OM[e];(!t||t[n.key]!==n)&&Ul(`Database ${e}(${n.repoInfo_}) has already been deleted.`),oL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ul("Cannot call "+e+" on a deleted database.")}}function xL(){qO.IS_TRANSPORT_INITIALIZED&&ps("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function v6(){xL(),Of.forceDisallow()}function w6(){xL(),q_.forceDisallow(),Of.forceAllow()}function C6(n,e){TO(n,e)}const x6={".sv":"timestamp"};class S6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Qg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Qg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function b6(n){IO(Gi.SDK_VERSION),(0,Gi._registerComponent)(new Js.wA("database",(e,{instanceIdentifier:t})=>bL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(wO,"0.14.3",n),(0,Gi.registerVersion)(wO,"0.14.3","esm2017")}();const N6=new Mo.Yd("@firebase/database-compat"),TL=function(n){N6.warn("FIREBASE WARNING: "+n)};class O6{constructor(e){this._delegate=e}cancel(e){(0,G.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,G.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,G.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,G.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,G.Dv)("OnDisconnect.set",1,2,arguments.length),(0,G.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,G.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,G.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,G.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,TL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,G.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class F6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,G.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Gf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,G.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,G.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,G.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,G.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,G.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),OE("DataSnapshot.child","path",e,!1),new Gf(this._database,this._delegate.child(e))}hasChild(e){return(0,G.Dv)("DataSnapshot.hasChild",1,1,arguments.length),OE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,G.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,G.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,G.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Gf(this._database,t)))}hasChildren(){return(0,G.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,G.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,G.Dv)("DataSnapshot.ref",0,0,arguments.length),new Oo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Yi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,G.Dv)("Query.on",2,4,arguments.length),(0,G.Wj)("Query.on","callback",t,!1);const l=Yi.getCancelAndContextArgs_("Query.on",r,i),f=(w,C)=>{t.call(l.context,new Gf(this.database,w),C)};f.userCallback=t,f.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return PM(this._delegate,f,_),t;case"child_added":return mL(this._delegate,f,_),t;case"child_removed":return vL(this._delegate,f,_),t;case"child_changed":return _L(this._delegate,f,_),t;case"child_moved":return yL(this._delegate,f,_),t;default:throw new Error((0,G.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,G.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,G.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,G.Wj)("Query.off","callback",t,!0),(0,G.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,wL(this._delegate,e,i)}else wL(this._delegate,e)}get(){return WH(this._delegate).then(e=>new Gf(this.database,e))}once(e,t,r,i){(0,G.Dv)("Query.once",1,4,arguments.length),(0,G.Wj)("Query.once","callback",t,!0);const a=Yi.getCancelAndContextArgs_("Query.once",r,i),l=new G.BH,f=(w,C)=>{const S=new Gf(this.database,w);t&&t.call(a.context,S,C),l.resolve(S)};f.userCallback=t,f.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":PM(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":mL(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":vL(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":_L(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":yL(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,G.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,G.Dv)("Query.limitToFirst",1,1,arguments.length),new Yi(this.database,Eu(this._delegate,function e6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new JH(n)}(e)))}limitToLast(e){return(0,G.Dv)("Query.limitToLast",1,1,arguments.length),new Yi(this.database,Eu(this._delegate,function n6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new t6(n)}(e)))}orderByChild(e){return(0,G.Dv)("Query.orderByChild",1,1,arguments.length),new Yi(this.database,Eu(this._delegate,function i6(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return OE("orderByChild","path",n,!1),new r6(n)}(e)))}orderByKey(){return(0,G.Dv)("Query.orderByKey",0,0,arguments.length),new Yi(this.database,Eu(this._delegate,function o6(){return new s6}()))}orderByPriority(){return(0,G.Dv)("Query.orderByPriority",0,0,arguments.length),new Yi(this.database,Eu(this._delegate,function u6(){return new a6}()))}orderByValue(){return(0,G.Dv)("Query.orderByValue",0,0,arguments.length),new Yi(this.database,Eu(this._delegate,function c6(){return new l6}()))}startAt(e=null,t){return(0,G.Dv)("Query.startAt",0,2,arguments.length),new Yi(this.database,Eu(this._delegate,function YH(n=null,e){return PE("startAt","key",e,!0),new IL(n,e)}(e,t)))}startAfter(e=null,t){return(0,G.Dv)("Query.startAfter",0,2,arguments.length),new Yi(this.database,Eu(this._delegate,function XH(n,e){return PE("startAfter","key",e,!0),new QH(n,e)}(e,t)))}endAt(e=null,t){return(0,G.Dv)("Query.endAt",0,2,arguments.length),new Yi(this.database,Eu(this._delegate,function qH(n,e){return PE("endAt","key",e,!0),new EL(n,e)}(e,t)))}endBefore(e=null,t){return(0,G.Dv)("Query.endBefore",0,2,arguments.length),new Yi(this.database,Eu(this._delegate,function ZH(n,e){return PE("endBefore","key",e,!0),new KH(n,e)}(e,t)))}equalTo(e,t){return(0,G.Dv)("Query.equalTo",1,2,arguments.length),new Yi(this.database,Eu(this._delegate,function h6(n,e){return PE("equalTo","key",e,!0),new d6(n,e)}(e,t)))}toString(){return(0,G.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,G.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,G.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Yi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,G.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,G.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,G.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Oo(this.database,new xa(this._delegate._repo,this._delegate._path))}}class Oo extends Yi{constructor(e,t){super(e,new so(t._repo,t._path,new Qx,!1)),this.database=e,this._delegate=t}getKey(){return(0,G.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,G.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Oo(this.database,rm(this._delegate,e))}getParent(){(0,G.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Oo(this.database,e):null}getRoot(){return(0,G.Dv)("Reference.root",0,0,arguments.length),new Oo(this.database,this._delegate.root)}set(e,t){(0,G.Dv)("Reference.set",1,2,arguments.length),(0,G.Wj)("Reference.set","onComplete",t,!0);const r=kM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,G.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,TL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ba("Reference.update",this._delegate._path),(0,G.Wj)("Reference.update","onComplete",t,!0);const r=zH(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,G.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,G.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function GH(n,e,t){if(ba("setWithPriority",n._path),Bl("setWithPriority",e,n._path,!1),bM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new G.BH;return DM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,G.Dv)("Reference.remove",0,1,arguments.length),(0,G.Wj)("Reference.remove","onComplete",e,!0);const t=function jH(n){return ba("remove",n._path),kM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,G.Dv)("Reference.transaction",1,3,arguments.length),(0,G.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,G.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,G.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function A6(n,e,t){var r;if(n=(0,G.m9)(n),ba("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new G.BH,f=PM(n,()=>{});return function PH(n,e,t,r,i,a){ty(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:bO(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=SM(n,e,void 0);l.currentInputSnapshot=f;const _=l.update(f.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{kE("transaction failed: Data returned ",_,l.path),l.status=0;const w=pD(n.transactionQueueTree_,e),C=tm(w)||[];let S;C.push(l),EM(w,C),"object"==typeof _&&null!==_&&(0,G.r3)(_,".priority")?(S=(0,G.DV)(_,".priority"),(0,G.hu)(NE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(hD(n.serverSyncTree_,e)||Jt.EMPTY_NODE).getPriority().val();const B=FE(n),ee=Ar(_,S),le=yM(ee,f,B);l.currentOutputSnapshotRaw=ee,l.currentOutputSnapshotResolved=le,l.currentWriteId=yD(n);const Oe=dM(n.serverSyncTree_,e,le,l.currentWriteId,l.applyLocally);Po(n.eventQueue_,e,Oe),vD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,C)=>{let S=null;_?a.reject(_):(S=new nm(C,new xa(n._repo,n._path),Zn),a.resolve(new S6(w,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new F6(a.committed,new Gf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,G.Dv)("Reference.setPriority",1,2,arguments.length),(0,G.Wj)("Reference.setPriority","onComplete",t,!0);const r=function $H(n,e){n=(0,G.m9)(n),ba("setPriority",n._path),bM("setPriority",e,!1);const t=new G.BH;return DM(n._repo,vr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,G.Dv)("Reference.push",0,2,arguments.length),(0,G.Wj)("Reference.push","onComplete",t,!0);const r=function HH(n,e){n=(0,G.m9)(n),ba("push",n._path),Bl("push",e,n._path,!0);const t=nL(n._repo),r=BH(t),i=rm(n,r),a=rm(n,r);let l;return l=null!=e?kM(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Oo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Oo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return ba("Reference.onDisconnect",this._delegate._path),new O6(new fL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class VE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:v6,forceLongPolling:w6}}useEmulator(e,t,r={}){!function DL(n,e,t,r={}){(n=(0,G.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ul("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ul('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new mE(mE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,G.Sg)(r.mockUserToken,n.app.options.projectId);a=new mE(l)}!function p6(n,e,t,r){n.repoInfo_=new kR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,G.Dv)("database.ref",0,1,arguments.length),e instanceof Oo){const t=gL(this._delegate,e.toString());return new Oo(this,t)}{const t=pL(this._delegate,e);return new Oo(this,t)}}refFromURL(e){(0,G.Dv)("database.refFromURL",1,1,arguments.length);const r=gL(this._delegate,e);return new Oo(this,r)}goOffline(){return(0,G.Dv)("database.goOffline",0,0,arguments.length),function E6(n){(n=(0,G.m9)(n))._checkNotDeleted("goOffline"),oL(n._repo)}(this._delegate)}goOnline(){return(0,G.Dv)("database.goOnline",0,0,arguments.length),function I6(n){(n=(0,G.m9)(n))._checkNotDeleted("goOnline"),function kH(n){n.persistentConnection_&&n.persistentConnection_.resume(tL)}(n._repo)}(this._delegate)}}VE.ServerValue={TIMESTAMP:function D6(){return x6}(),increment:n=>function T6(n){return{".sv":{increment:n}}}(n)};var U6=Object.freeze({__proto__:null,initStandalone:function L6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){IO(t);const l=new Js.zt("auth-internal",new Js.H0("database-standalone"));return l.setComponent(new Js.wA("auth-internal",()=>r,"PRIVATE")),{instance:new VE(bL(n,l,void 0,e,a),n),namespace:i}}});const V6=VE.ServerValue;function SL(n){return null==n}function AL(n){return"function"==typeof n.set}function RL(n,e){return AL(e)?e:n.ref(e)}function ML(n,e){if(function H6(n){return"string"==typeof n}(n))return e.stringCase();if(AL(n))return e.firebaseCase();if(function j6(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function BE(n,e,t="on",r=I0.z){return new Br.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,gt.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,UP.B)())}function NL(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function z6(n,e){const{payload:t,prevKey:r,key:i}=e,a=NL(n,i),l=function G6(n,e){if(SL(e))return 0;{const t=NL(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function kL(n){return(SL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function PL(n,e,t){return function $6(n,e,t){return BE(n,"value","once",t).pipe(Tr(r=>{const i=[Et(r)];return e.forEach(a=>i.push(BE(n,a,"on",t))),(0,X1.T)(...i).pipe(So(z6,[]))}),EC())}(n,e=kL(e),t)}function OL(n,e,t){const r=(e=kL(e)).map(i=>BE(n,i,"on",t));return(0,X1.T)(...r)}function FL(n,e){return function(r,i){return ML(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Z6(n){return function(t){return t?ML(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function LL(n,e){return function(){return BE(n,"value","on",e)}}!function B6(n){n.INTERNAL.registerComponent(new Js.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new VE(i,r)},"PUBLIC").setServiceProps({Reference:Oo,Query:Yi,Database:VE,DataSnapshot:Gf,enableLogging:C6,INTERNAL:U6,ServerValue:V6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.3")}(id.Z);const X6=new h.OlP("angularfire2.realtimeDatabaseURL"),J6=new h.OlP("angularfire2.database.use-emulator");let FM=(()=>{class n{constructor(t,r,i,a,l,f,_,w,C,S,B,ee,le,Oe,je){this.schedulers=f;const _t=_,Ct=(0,Gr.on)(t,l,r);w&&xR(Ct,l,C,B,ee,le,S,Oe),this.database=(0,Gr.cc)(`${Ct.name}.database.${i}`,"AngularFireDatabase",Ct.name,()=>{const ct=l.runOutsideAngular(()=>Ct.database(i||void 0));return _t&&ct.useEmulator(..._t),ct},[_t])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>RL(this.database,t));let a=i;return r&&(a=r(i)),function Y6(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:FL(r,"update"),set:FL(r,"set"),push:i=>r.push(i),remove:Z6(r),snapshotChanges:i=>PL(n,i,t).pipe(yn.iC),stateChanges:i=>OL(n,i,t).pipe(yn.iC),auditTrail:i=>function W6(n,e,t){return function K6(n,e,t){return function q6(n,e){return BE(n,"value","on",e).pipe((0,gt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function z8(...n){const e=(0,Hi.jO)(n);return(0,jr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,na.Xf)(n[_]).subscribe((0,Mn.x)(r,w=>{a[_]=w,!f&&!l[_]&&(l[_]=!0,(f=l.every(Rp.y))&&(l=null))},G8.Z));t.subscribe((0,Mn.x)(r,_=>{if(f){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,gt.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function W8(n){return(0,jr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Mn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,gt.U)(i=>i.actions))}(n,OL(n,e).pipe(So((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(yn.iC),valueChanges:(i,a)=>PL(n,i,t).pipe((0,gt.U)(f=>f.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),yn.iC)}}(a,this)}object(t){return function Q6(n,e){return{query:n,snapshotChanges:()=>LL(n,e.schedulers.outsideAngular)().pipe(yn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>LL(n,e.schedulers.outsideAngular)().pipe(yn.iC,(0,gt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>RL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr.Dh),h.LFG(Gr.xv,8),h.LFG(X6,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(yn.HU),h.LFG(J6,8),h.LFG(dE,8),h.LFG(vR,8),h.LFG(wR,8),h.LFG(ER,8),h.LFG(IR,8),h.LFG(CR,8),h.LFG(bR,8),h.LFG(cE,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ej=(()=>{class n{constructor(){Hx.Z.registerVersion("angularfire",yn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[FM]}),n})();function tj(n,e){1&n&&(h.TgZ(0,"div",10),h.O4$(),h.TgZ(1,"svg",11),h._UZ(2,"path",12)(3,"path",13),h.qZA(),h.kcU(),h.TgZ(4,"span",14),h._uU(5,"Loading..."),h.qZA()())}function nj(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"img",35),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return h.KtG(i.togglePassword())}),h.qZA()}}function rj(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"img",36),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return h.KtG(i.togglePassword())}),h.qZA()}}function ij(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"p",19),h._uU(5),h.qZA()(),h.TgZ(6,"div",20)(7,"img",21),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.closeModal())}),h.qZA()()(),h.TgZ(8,"div",22)(9,"label",23),h._uU(10,"Password"),h.qZA(),h.TgZ(11,"input",24),h.NdJ("ngModelChange",function(i){h.CHM(t);const a=h.oxw();return h.KtG(a.modal.password=i)}),h.qZA()(),h.TgZ(12,"div",25),h.YNc(13,nj,1,0,"img",26),h.YNc(14,rj,1,0,"img",27),h.TgZ(15,"img",28),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.copyPassword(i.modal.password))}),h.qZA()(),h.TgZ(16,"div",29)(17,"label",30),h._uU(18,"Description"),h.qZA(),h.TgZ(19,"textarea",31),h.NdJ("ngModelChange",function(i){h.CHM(t);const a=h.oxw();return h.KtG(a.modal.comment=i)}),h.qZA()(),h.TgZ(20,"div",32)(21,"img",33),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.editPassword())}),h.qZA(),h.TgZ(22,"img",34),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.deletePassword())}),h.qZA()()()()}if(2&n){const t=h.oxw();h.xp6(5),h.hij(" ",t.modal.name," "),h.xp6(6),h.s9C("value",t.modal.password),h.s9C("type",t.inputType),h.Q6J("ngModel",t.modal.password),h.xp6(2),h.Q6J("ngIf",t.isShowing),h.xp6(1),h.Q6J("ngIf",!t.isShowing),h.xp6(5),h.s9C("value",t.modal.comment),h.Q6J("ngModel",t.modal.comment)}}function sj(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",38),h.NdJ("click",function(){const a=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.openModal(a))}),h.TgZ(1,"div",39)(2,"div",40)(3,"p",41),h._uU(4),h.qZA()()()()}if(2&n){const t=e.$implicit;h.xp6(4),h.hij(" ",t.name," ")}}function oj(n,e){if(1&n&&(h.TgZ(0,"ul",15),h.YNc(1,sj,5,1,"li",37),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.list)}}class HE{constructor(e,t,r){this.authService=e,this.db=t,this.router=r,this.list=[],this.isOpen=!1,this.inputType="password",this.isLoading=!0,this.isShowing=!1}ngOnInit(){this.user=Xs(),this.username=this.user?.displayName,this.getPasswords().subscribe(e=>{this.list=e.map(t=>new bv(t.payload.val(),t.key??"")),this.isLoading=!1})}getPasswords(){return this.db.list(this.user.uid.toString(),e=>e).snapshotChanges()}openModal(e){this.modal={...e,password:ga(e.password)},this.isOpen=!0}closeModal(){this.isOpen=!1,this.isShowing=!1,this.hidePassword()}showPassword(){this.inputType="text"}hidePassword(){this.inputType="password"}togglePassword(){"text"==this.inputType?(this.isShowing=!1,this.hidePassword()):(this.isShowing=!0,this.showPassword())}copyPassword(e){navigator.clipboard.writeText(e)}deletePassword(){this.db.object(this.user.uid.toString()+"/"+this.modal.key).remove().then(t=>{this.closeModal()}).catch(t=>{window.alert("Something went wrong!")})}editPassword(){var e={name:this.modal.name,password:wC(this.modal.password),comment:this.modal.comment,email:this.user.email},t={};t["/"+this.user.uid.toString()+"/"+this.modal.key]=e,this.db.database.ref().update(t).then(()=>{this.isOpen=!1}).catch(r=>{console.log(r)})}toNew(){this.router.navigate(["new"])}}HE.\u0275fac=function(e){return new(e||HE)(h.Y36(_u),h.Y36(FM),h.Y36($r))},HE.\u0275cmp=h.Xpm({type:HE,selectors:[["app-dashboard"]],decls:13,vars:4,consts:[[1,"bg-gray-50","dark:bg-gray-900",3,"ngClass"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0","lg:w-6/12"],["href","#",1,"flex","items-center","mb-6","text-2xl","font-semibold","text-gray-900","dark:text-white","ml-16"],["src","../../assets/icon-black-removebg-preview.png","alt","logo",1,"w-12","h-12","mr-2"],["src","../../assets/icons/log-out-outline.svg","alt","logo",1,"w-8","h-8","ml-20",3,"click"],[1,"flex","items-center","mb-6","text-xl","font-semibold","text-gray-900","dark:text-white"],["role","status",4,"ngIf"],["class","divide-gray-200 dark:divide-gray-700 space-y-5 w-11/12",4,"ngIf"],[1,"flex","fixed","z-10","bottom-0","right-0","mb-5","mr-5"],["src","../../assets/icons/add-circle-outline.svg","alt","logo",1,"w-16","h-16","col-end-7",3,"click"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","w-10","h-10","mr-2","text-gray-200","animate-spin","dark:text-gray-600","fill-blue-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"],[1,"divide-gray-200","dark:divide-gray-700","space-y-5","w-11/12"],[1,"pb-3","sm:pb-4","w-full","bg-white","rounded-lg","shadow","dark:border","dark:bg-gray-800","dark:border-gray-700"],[1,"flex","items-center","justify-center","space-x-4","mb-5"],[1,"flex-1","min-w-0","ml-2","mt-1"],[1,"font-2xl","font-medium","text-gray-900","truncate","dark:text-white"],[1,"flex-shrink-0"],["src","../../assets/icons/close-outline.svg","alt","Copy Icon",1,"w-6","h-6","rounded-full","text-white",3,"click"],[1,"flex","flex-col","sm:col-span-2","w-11/12","items-center","justify-center","content-center","mx-auto"],["for","name",1,"mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","password","id","password","placeholder","Password","required","",1,"w-full","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"ngModel","value","type","ngModelChange"],[1,"flex","items-center","mt-3","mb-3","space-x-60","justify-center"],["class","w-7 h-7","src","../../assets/icons/eye-outline.svg","alt","logo",3,"click",4,"ngIf"],["class","w-7 h-7 text-white","src","../../assets/icons/eye-off-outline.svg","alt","logo",3,"click",4,"ngIf"],["src","../../assets/icons/copy-outline.svg","alt","logo",1,"w-7","h-7",3,"click"],[1,"flex","flex-col","sm:col-span-2","min-w-0","items-center","justify-center","content-center","w-11/12","mx-auto"],["for","description",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","description","rows","8","placeholder","Your description here",1,"w-full","p-2.5","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"ngModel","value","ngModelChange"],[1,"flex","items-center","mt-4","mb-3","space-x-60","justify-center"],["src","../../assets/icons/create-outline.svg","alt","logo",1,"w-7","h-7",3,"click"],["src","../../assets/icons/trash-outline.svg","alt","logo",1,"w-7","h-7",3,"click"],["src","../../assets/icons/eye-outline.svg","alt","logo",1,"w-7","h-7",3,"click"],["src","../../assets/icons/eye-off-outline.svg","alt","logo",1,"w-7","h-7","text-white",3,"click"],["class","pb-3 sm:pb-4 w-full bg-white rounded-lg shadow dark:border dark:bg-gray-800 dark:border-gray-700",3,"click",4,"ngFor","ngForOf"],[1,"pb-3","sm:pb-4","w-full","bg-white","rounded-lg","shadow","dark:border","dark:bg-gray-800","dark:border-gray-700",3,"click"],[1,"flex","items-center","space-x-4"],[1,"flex-1","min-w-0"],[1,"text-sm","font-xl","text-center","text-gray-900","truncate","dark:text-white"]],template:function(e,t){1&e&&(h.TgZ(0,"body",0)(1,"div",1)(2,"div",2),h._UZ(3,"img",3),h._uU(4," MassPass "),h.TgZ(5,"img",4),h.NdJ("click",function(){return t.authService.SignOut()}),h.qZA()(),h.TgZ(6,"h3",5),h._uU(7,"Passwords"),h.qZA(),h.YNc(8,tj,6,0,"div",6),h.YNc(9,ij,23,8,"div",7),h.YNc(10,oj,2,1,"ul",7),h.TgZ(11,"div",8)(12,"img",9),h.NdJ("click",function(){return t.toNew()}),h.qZA()()()()),2&e&&(h.Q6J("ngClass",t.isOpen?"h-screen":"h-min"),h.xp6(8),h.Q6J("ngIf",t.isLoading),h.xp6(1),h.Q6J("ngIf",t.isOpen),h.xp6(1),h.Q6J("ngIf",!t.isOpen))},dependencies:[Bt,Fi,Vs,br,bc,Sp,ol]});class ry{constructor(e,t){this.authService=e,this.router=t,this.loading=!1}ngOnInit(){this.authService.isLoggedIn&&this.authService.SignOut()}}ry.\u0275fac=function(e){return new(e||ry)(h.Y36(_u),h.Y36($r))},ry.\u0275cmp=h.Xpm({type:ry,selectors:[["app-login"]],decls:35,vars:0,consts:[[1,"bg-gray-50","dark:bg-gray-900","h-screen"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0"],["href","#",1,"flex","items-center","mb-6","text-2xl","font-semibold","text-gray-900","dark:text-white"],["src","../../assets/icon-black-removebg-preview.png","alt","logo",1,"w-12","h-12","mr-2"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],["action","#",1,"space-y-4","md:space-y-6"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","email","name","email","id","email","placeholder","email@email.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["email",""],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["password",""],[1,"flex","items-center","justify-between"],[1,"flex","items-start"],[1,"flex","items-center","h-5"],["id","remember","aria-describedby","remember","type","checkbox","required","",1,"w-4","h-4","border","border-gray-300","rounded","bg-gray-50","focus:ring-3","focus:ring-primary-300","dark:bg-gray-700","dark:border-gray-600","dark:focus:ring-primary-600","dark:ring-offset-gray-800"],[1,"ml-3","text-sm"],["for","remember",1,"text-gray-500","dark:text-gray-300"],["href","#",1,"text-sm","font-medium","text-primary-500","hover:underline","dark:text-white"],["type","button",1,"w-full","text-white","bg-blue-600","hover:bg-primary-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-primary-600","dark:hover:bg-primary-700",3,"click"],[1,"text-sm","font-light","text-gray-500","dark:text-gray-400"],["href","#",1,"font-medium","text-primary-600","hover:underline","dark:text-primary-500"]],template:function(e,t){if(1&e){const r=h.EpF();h.TgZ(0,"body",0)(1,"div",1)(2,"a",2),h._UZ(3,"img",3),h._uU(4," MassPass "),h.qZA(),h.TgZ(5,"div",4)(6,"div",5)(7,"h1",6),h._uU(8," Sign in to your account "),h.qZA(),h.TgZ(9,"form",7)(10,"div")(11,"label",8),h._uU(12,"Your email"),h.qZA(),h._UZ(13,"input",9,10),h.qZA(),h.TgZ(15,"div")(16,"label",11),h._uU(17,"Password"),h.qZA(),h._UZ(18,"input",12,13),h.qZA(),h.TgZ(20,"div",14)(21,"div",15)(22,"div",16),h._UZ(23,"input",17),h.qZA(),h.TgZ(24,"div",18)(25,"label",19),h._uU(26,"Remember me"),h.qZA()()(),h.TgZ(27,"a",20),h._uU(28,"Forgot password?"),h.qZA()(),h.TgZ(29,"button",21),h.NdJ("click",function(){h.CHM(r);const a=h.MAs(14),l=h.MAs(19);return h.KtG(t.authService.SignIn(a.value,l.value))}),h._uU(30,"Sign in"),h.qZA(),h.TgZ(31,"p",22),h._uU(32," Don\u2019t have an account yet? "),h.TgZ(33,"a",23),h._uU(34,"Sign up"),h.qZA()()()()()()()}},dependencies:[Ks,Em,ua]});class iy{constructor(e,t,r){this.authService=e,this.db=t,this.router=r,this.modal={}}ngOnInit(){this.user=Xs()}addPassword(){let e={email:this.user.email,name:this.modal.name,password:wC(this.modal.password),comment:this.modal.comment??""};this.pushToDB(e),this.modal=new bv("",""),this.router.navigate(["dashboard"])}backToDashboard(){this.router.navigate(["dashboard"])}pushToDB(e){this.db.list(this.user.uid.toString()).push(e).then(r=>{console.log("")}).catch(r=>{console.log(r)})}}iy.\u0275fac=function(e){return new(e||iy)(h.Y36(_u),h.Y36(FM),h.Y36($r))},iy.\u0275cmp=h.Xpm({type:iy,selectors:[["app-newpassword"]],decls:25,vars:3,consts:[[1,"bg-gray-50","dark:bg-gray-900","h-screen"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0","lg:w-6/12"],["href","#",1,"flex","items-center","mb-6","text-2xl","font-semibold","text-gray-900","dark:text-white","ml-16"],["src","../../assets/icon-black-removebg-preview.png","alt","logo",1,"w-12","h-12","mr-2"],["src","../../assets/icons/log-out-outline.svg","alt","logo",1,"w-8","h-8","ml-20",3,"click"],[1,"flex","items-center","mb-6","text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"divide-gray-200","dark:divide-gray-700","space-y-5","w-11/12"],[1,"pb-3","sm:pb-4","w-full","bg-white","rounded-lg","shadow","dark:border","dark:bg-gray-800","dark:border-gray-700"],[1,"flex","flex-col","sm:col-span-2","w-11/12","items-center","justify-center","content-center","mx-auto","mt-5","mb-5"],["for","name",1,"mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","name","id","name","placeholder","Name","required","",1,"w-full","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"ngModel","ngModelChange"],[1,"flex","flex-col","sm:col-span-2","w-11/12","items-center","justify-center","content-center","mx-auto","mb-5"],["type","text","name","password","id","password","placeholder","Password","required","",1,"w-full","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"ngModel","ngModelChange"],[1,"flex","flex-col","sm:col-span-2","min-w-0","items-center","justify-center","content-center","w-11/12","mx-auto"],["for","description",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","description","rows","8","placeholder","Your description here",1,"w-full","p-2.5","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"ngModel","ngModelChange"],[1,"flex","items-center","mt-4","mb-3","space-x-60","justify-center"],["src","../../assets/icons/checkmark-outline.svg","alt","logo",1,"w-7","h-7",3,"click"],["src","../../assets/icons/close-outline.svg","alt","logo",1,"w-7","h-7",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"body",0)(1,"div",1)(2,"div",2),h._UZ(3,"img",3),h._uU(4," MassPass "),h.TgZ(5,"img",4),h.NdJ("click",function(){return t.authService.SignOut()}),h.qZA()(),h.TgZ(6,"h3",5),h._uU(7,"New Password"),h.qZA(),h.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),h._uU(12,"Name"),h.qZA(),h.TgZ(13,"input",10),h.NdJ("ngModelChange",function(i){return t.modal.name=i}),h.qZA()(),h.TgZ(14,"div",11)(15,"label",9),h._uU(16,"Password"),h.qZA(),h.TgZ(17,"input",12),h.NdJ("ngModelChange",function(i){return t.modal.password=i}),h.qZA()(),h.TgZ(18,"div",13)(19,"label",14),h._uU(20,"Description"),h.qZA(),h.TgZ(21,"textarea",15),h.NdJ("ngModelChange",function(i){return t.modal.comment=i}),h.qZA()(),h.TgZ(22,"div",16)(23,"img",17),h.NdJ("click",function(){return t.addPassword()}),h.qZA(),h.TgZ(24,"img",18),h.NdJ("click",function(){return t.backToDashboard()}),h.qZA()()()()()()),2&e&&(h.xp6(13),h.Q6J("ngModel",t.modal.name),h.xp6(4),h.Q6J("ngModel",t.modal.password),h.xp6(4),h.Q6J("ngModel",t.modal.comment))},dependencies:[br,bc,Sp,ol]});class Pd{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.isLoggedIn||this.router.navigate(["login"]),!0}}Pd.\u0275fac=function(e){return new(e||Pd)(h.LFG(_u),h.LFG($r))},Pd.\u0275prov=h.Yz7({token:Pd,factory:Pd.\u0275fac});const aj=[{path:"",component:ry},{path:"login",component:ry},{path:"dashboard",component:HE,canActivate:[Pd]},{path:"new",component:iy,canActivate:[Pd]},{path:"**",component:iy,canActivate:[Pd]}];class sy{}function uj(n,e){1&n&&h._UZ(0,"router-outlet")}sy.\u0275fac=function(e){return new(e||sy)},sy.\u0275mod=h.oAB({type:sy}),sy.\u0275inj=h.cJS({imports:[Cv.forRoot(aj),Cv]});class jE{constructor(e,t){this.title="masspass-web",this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,e.isLoggedIn&&t.navigate(["dashboard"])},500)}}jE.\u0275fac=function(e){return new(e||jE)(h.Y36(_u),h.Y36($r))},jE.\u0275cmp=h.Xpm({type:jE,selectors:[["app-root"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&h.YNc(0,uj,1,0,"router-outlet",0),2&e&&h.Q6J("ngIf",!t.isLoading)},dependencies:[Vs,Jy]});const UL="firebasestorage.googleapis.com",VL="storageBucket";class Rr extends G.ZR{constructor(e,t,r=0){super(LM(e),`Firebase Storage: ${t} (${LM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return LM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Qn=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Qn||(Qn={})),Qn))();function LM(n){return"storage/"+n}function UM(){return new Rr(Qn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function BL(){return new Rr(Qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HL(){return new Rr(Qn.CANCELED,"User canceled the upload/download.")}function jL(){return new Rr(Qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oy(n){return new Rr(Qn.INVALID_ARGUMENT,n)}function $L(){return new Rr(Qn.APP_DELETED,"The Firebase app was deleted.")}function GL(n){return new Rr(Qn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $E(n,e){return new Rr(Qn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function GE(n){throw new Rr(Qn.INTERNAL_ERROR,"Internal error: "+n)}class gs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=gs.makeFromUrl(e,t)}catch{return new gs(e,"")}if(""===r.path)return r;throw function vj(n){return new Rr(Qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(pt){pt.path_=decodeURIComponent(pt.path)}const S=t.replace(/[.]/g,"\\."),ct=[{regex:f,indices:{bucket:1,path:3},postModify:function a(pt){"/"===pt.path.charAt(pt.path.length-1)&&(pt.path_=pt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===UL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let pt=0;pt<ct.length;pt++){const Ft=ct[pt],Wt=Ft.regex.exec(e);if(Wt){let Cu=Wt[Ft.indices.path];Cu||(Cu=""),r=new gs(Wt[Ft.indices.bucket],Cu),Ft.postModify(r);break}}if(null==r)throw function yj(n){return new Rr(Qn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class bj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function bD(n){return"string"==typeof n||n instanceof String}function zL(n){return VM()&&n instanceof Blob}function VM(){return typeof Blob<"u"&&!(0,G.UG)()}function BM(n,e,t,r){if(r<e)throw oy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw oy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Od(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function WL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var zf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(zf||(zf={})),zf))();function qL(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class Rj{constructor(e,t,r,i,a,l,f,_,w,C,S,B=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=C,this.connectionFactory_=S,this.retry=B,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ee,le)=>{this.resolve_=ee,this.reject_=le,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function Tj(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==f){const _=UM();_.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,_):_)}else l(i.canceled?this.appDelete_?$L():HL():BL())};this.canceled_?t(0,new xD(!1,null,!0)):this.backoffId_=function xj(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function _(){return 2===f}let w=!1;function C(...je){w||(w=!0,e.apply(null,je))}function S(je){i=setTimeout(()=>{i=null,n(ee,_())},je)}function B(){a&&clearTimeout(a)}function ee(je,..._t){if(w)return void B();if(je)return B(),void C.call(null,je,..._t);if(_()||l)return B(),void C.call(null,je,..._t);let ct;r<64&&(r*=2),1===f?(f=2,ct=0):ct=1e3*(r+Math.random()),S(ct)}let le=!1;function Oe(je){le||(le=!0,B(),!w&&(null!==i?(je||(f=2),clearTimeout(i),S(0)):je||(f=1)))}return S(0),a=setTimeout(()=>{l=!0,Oe(!0)},t),Oe}((r,i)=>{if(i)return void r(!1,new xD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===zf.NO_ERROR,_=a.getStatus();if(!f||qL(_,this.additionalRetryCodes_)&&this.retry){const C=a.getErrorCode()===zf.ABORT;return void r(!1,new xD(!1,null,C))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new xD(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Dj(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Lj(...n){const e=function Fj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(VM())return new Blob(n);throw new Rr(Qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HM{constructor(e,t){this.data=e,this.contentType=t||null}}function jM(n,e){switch(n){case Fo.RAW:return new HM(KL(e));case Fo.BASE64:case Fo.BASE64URL:return new HM(ZL(n,e));case Fo.DATA_URL:return new HM(function Hj(n){const e=new YL(n);return e.base64?ZL(Fo.BASE64,e.rest):function Bj(n){let e;try{e=decodeURIComponent(n)}catch{throw $E(Fo.DATA_URL,"Malformed data URL.")}return KL(e)}(e.rest)}(e),function jj(n){return new YL(n).contentType}(e))}throw UM()}function KL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ZL(n,e){switch(n){case Fo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw $E(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw $E(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Vj(n){if(typeof atob>"u")throw function Cj(n){return new Rr(Qn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:$E(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class YL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw $E(Fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function $j(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Hl{constructor(e,t){let r=0,i="";zL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(zL(this.data_)){const i=function Uj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Hl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Hl(r,!0)}}static getBlob(...e){if(VM()){const t=e.map(r=>r instanceof Hl?r.data_:r);return new Hl(Lj.apply(null,t))}{const t=e.map(l=>bD(l)?jM(Fo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[a++]=l[f]}),new Hl(i,!0)}}uploadData(){return this.data_}}function $M(n){let e;try{e=JSON.parse(n)}catch{return null}return function Aj(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function QL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Wj(n,e){return e}class Ls{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Wj}}let DD=null;function zE(){if(DD)return DD;const n=[];n.push(new Ls("bucket")),n.push(new Ls("generation")),n.push(new Ls("metageneration")),n.push(new Ls("name","fullPath",!0));const t=new Ls("name");t.xform=function e(a,l){return function qj(n){return!bD(n)||n.length<2?n:QL(n)}(l)},n.push(t);const i=new Ls("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ls("timeCreated")),n.push(new Ls("updated")),n.push(new Ls("md5Hash",null,!0)),n.push(new Ls("cacheControl",null,!0)),n.push(new Ls("contentDisposition",null,!0)),n.push(new Ls("contentEncoding",null,!0)),n.push(new Ls("contentLanguage",null,!0)),n.push(new Ls("contentType",null,!0)),n.push(new Ls("metadata","customMetadata",!0)),DD=n,DD}function XL(n,e,t){const r=$M(e);return null===r?null:function Zj(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function Kj(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new gs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function GM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const JL="prefixes";class jl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function $l(n){if(!n)throw UM()}function TD(n,e){return function t(r,i){const a=XL(n,i,e);return $l(null!==a),a}}function ay(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function mj(){return new Rr(Qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function gj(){return new Rr(Qn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function pj(n){return new Rr(Qn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function _j(n){return new Rr(Qn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function WE(n){const e=ay(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function fj(n){return new Rr(Qn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function t2(n,e,t){const i=Od(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new jl(i,"GET",TD(n,t),l);return f.errorHandler=WE(e),f}function t$(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=Od(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,C=new jl(f,"GET",function Jj(n,e){return function t(r,i){const a=function Xj(n,e,t){const r=$M(t);return null===r?null:function Qj(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[JL])for(const i of t[JL]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new gs(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new gs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return $l(null!==a),a}}(n,e.bucket),w);return C.urlParams=a,C.errorHandler=ay(e),C}function r2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function s$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class SD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function zM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{$l(!1)}return $l(!!t&&-1!==(e||["active"]).indexOf(t)),t}const l$={STATE_CHANGED:"state_changed"},Us={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function WM(n){switch(n){case"running":case"pausing":case"canceling":return Us.RUNNING;case"paused":return Us.PAUSED;case"success":return Us.SUCCESS;case"canceled":return Us.CANCELED;default:return Us.ERROR}}class c${constructor(e,t,r){if(function Sj(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function uy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class d${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw GE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw GE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw GE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw GE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw GE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class h$ extends d${initXhr(){this.xhr_.responseType="text"}}function Iu(){return new h$}class a2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=zE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Qn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(qL(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=BL()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Qn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function o$(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=r2(e,r,i),f={name:l.fullPath},_=Od(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=GM(l,t),le=new jl(_,"POST",function ee(Oe){let je;zM(Oe);try{je=Oe.getResponseHeader("X-Goog-Upload-URL")}catch{$l(!1)}return $l(bD(je)),je},n.maxUploadRetryTime);return le.urlParams=f,le.headers=C,le.body=S,le.errorHandler=ay(e),le}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Iu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function a$(n,e,t,r){const _=new jl(t,"POST",function a(w){const C=zM(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$l(!1)}S||$l(!1);const B=Number(S);return $l(!isNaN(B)),new SD(B,r.size(),"final"===C)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=ay(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Iu,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new SD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function u$(n,e,t,r,i,a,l,f){const _=new SD(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function Ej(){return new Rr(Qn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let C=w;i>0&&(C=Math.min(C,i));const S=_.current;let ee="";ee=0===C?"finalize":w===C?"upload, finalize":"upload";const le={"X-Goog-Upload-Command":ee,"X-Goog-Upload-Offset":`${_.current}`},Oe=r.slice(S,S+C);if(null===Oe)throw jL();const ct=new jl(t,"POST",function je(pt,Ft){const Wt=zM(pt,["active","final"]),Mr=_.current+C,Cu=r.size();let ZM;return ZM="final"===Wt?TD(e,a)(pt,Ft):null,new SD(Mr,Cu,"final"===Wt,ZM)},e.maxUploadRetryTime);return ct.headers=le,ct.body=Oe.uploadData(),ct.progressCallback=f||null,ct.errorHandler=ay(n),ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(l,Iu,i,a,!1);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=t2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Iu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function i2(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let ct="";for(let pt=0;pt<2;pt++)ct+=Math.random().toString().slice(2);return ct}();l["Content-Type"]="multipart/related; boundary="+_;const w=r2(e,r,i),C=GM(w,t),ee=Hl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===ee)throw jL();const le={name:w.fullPath},Oe=Od(a,n.host,n._protocol),_t=n.maxUploadRetryTime,Ct=new jl(Oe,"POST",TD(n,t),_t);return Ct.urlParams=le,Ct.headers=l,Ct.body=ee.uploadData(),Ct.errorHandler=ay(e),Ct}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Iu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=HL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=WM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new c$(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(WM(this._state)){case Us.SUCCESS:uy(this._resolve.bind(null,this.snapshot))();break;case Us.CANCELED:case Us.ERROR:uy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(WM(this._state)){case Us.RUNNING:case Us.PAUSED:e.next&&uy(e.next.bind(e,this.snapshot))();break;case Us.SUCCESS:e.complete&&uy(e.complete.bind(e))();break;default:e.error&&uy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class im{constructor(e,t){this._service=e,this._location=t instanceof gs?t:gs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new im(e,t)}get root(){const e=new gs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QL(this._location.path)}get storage(){return this._service}get parent(){const e=function Gj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new gs(this._location.bucket,e);return new im(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw GL(e)}}function l2(n,e,t){return qM.apply(this,arguments)}function qM(){return qM=(0,Fe.Z)(function*(n,e,t){const i=yield c2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield l2(n,e,i.nextPageToken))}),qM.apply(this,arguments)}function c2(n,e){null!=e&&"number"==typeof e.maxResults&&BM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=t$(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Iu)}function b$(n){n._throwIfRoot("getDownloadURL");const e=function n$(n,e,t){const i=Od(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new jl(i,"GET",function e$(n,e){return function t(r,i){const a=XL(n,i,e);return $l(null!==a),function Yj(n,e,t,r){const i=$M(e);if(null===i||!bD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return Od("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+WL({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=WE(e),f}(n.storage,n._location,zE());return n.storage.makeRequestWithTokens(e,Iu).then(t=>{if(null===t)throw function Ij(){return new Rr(Qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function d2(n,e){const t=function zj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new gs(n._location.bucket,t);return new im(n.storage,r)}function h2(n,e){if(n instanceof KM){const t=n;if(null==t._bucket)throw function wj(){return new Rr(Qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VL+"' property when initializing the app?")}();const r=new im(t,t._bucket);return null!=e?h2(r,e):r}return void 0!==e?d2(n,e):n}function S$(n,e){if(e&&function D$(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof KM)return function T$(n,e){return new im(n,e)}(n,e);throw oy("To use ref(service, url), the first argument must be a Storage instance.")}return h2(n,e)}function f2(n,e){const t=e?.[VL];return null==t?null:gs.makeFromBucketSpec(t,n)}class KM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=UL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?gs.makeFromBucketSpec(i,this._host):f2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?gs.makeFromBucketSpec(this._url,e):f2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Fe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Fe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new im(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new bj($L());{const l=function Oj(n,e,t,r,i,a,l=!0){const f=WL(n.urlParams),_=n.url+f,w=Object.assign({},n.headers);return function kj(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function Mj(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function Nj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function Pj(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new Rj(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Fe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const p2="@firebase/storage";function _2(n,e){return S$(n=(0,G.m9)(n),e)}function U$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new KM(t,r,i,e,Gi.SDK_VERSION)}!function V$(){(0,Gi._registerComponent)(new Js.wA("storage",U$,"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(p2,"0.11.1",""),(0,Gi.registerVersion)(p2,"0.11.1","esm2017")}();class AD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class v2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new AD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new AD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new AD(l,this,this._ref)):{next:t.next?l=>t.next(new AD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class w2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Fd(e,this._service))}get items(){return this._delegate.items.map(e=>new Fd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Fd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function L$(n,e){return d2(n,e)}(this._delegate,e);return new Fd(t,this.storage)}get root(){return new Fd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Fd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new v2(function R$(n,e,t){return function v$(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new a2(n,new Hl(e),t)}(n=(0,G.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Fo.RAW,r){this._throwIfRoot("putString");const i=jM(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new v2(new a2(this._delegate,new Hl(i.data,!0),a),this)}listAll(){return function P$(n){return function E$(n){const e={prefixes:[],items:[]};return l2(n,e).then(()=>e)}(n=(0,G.m9)(n))}(this._delegate).then(e=>new w2(e,this.storage))}list(e){return function k$(n,e){return c2(n=(0,G.m9)(n),e)}(this._delegate,e||void 0).then(t=>new w2(t,this.storage))}getMetadata(){return function M$(n){return function I$(n){n._throwIfRoot("getMetadata");const e=t2(n.storage,n._location,zE());return n.storage.makeRequestWithTokens(e,Iu)}(n=(0,G.m9)(n))}(this._delegate)}updateMetadata(e){return function N$(n,e){return function C$(n,e){n._throwIfRoot("updateMetadata");const t=function r$(n,e,t,r){const a=Od(e.fullServerUrl(),n.host,n._protocol),f=GM(t,r),w=n.maxOperationRetryTime,C=new jl(a,"PATCH",TD(n,r),w);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=f,C.errorHandler=WE(e),C}(n.storage,n._location,e,zE());return n.storage.makeRequestWithTokens(t,Iu)}(n=(0,G.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function O$(n){return b$(n=(0,G.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function F$(n){return function x$(n){n._throwIfRoot("deleteObject");const e=function i$(n,e){const r=Od(e.fullServerUrl(),n.host,n._protocol),f=new jl(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=WE(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Iu)}(n=(0,G.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw GL(e)}}class E2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(I2(e))throw oy("ref() expected a child path but got a URL, use refFromURL instead.");return new Fd(_2(this._delegate,e),this)}refFromURL(e){if(!I2(e))throw oy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gs.makeFromUrl(e,this._delegate.host)}catch{throw oy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fd(_2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function y2(n,e,t,r={}){!function A$(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,G.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function I2(n){return/^[A-Za-z]+:\/\//.test(n)}function $$(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new E2(t,r)}function C2(n){const e=function z$(n){return new Br.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function lj(n,e=I0.z){return(0,jr.e)((t,r)=>{let i=null,a=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,C=e.now();if(C<w)return i=this.schedule(void 0,w-C),void r.add(i);f()}t.subscribe((0,Mn.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,gt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function RD(n){return{getDownloadURL:()=>Et(void 0).pipe(yn.fc,Tr(()=>n.getDownloadURL()),yn.iC),getMetadata:()=>Et(void 0).pipe(yn.fc,Tr(()=>n.getMetadata()),yn.iC),delete:()=>(0,Zt.D)(n.delete()),child:e=>RD(n.child(e)),updateMetadata:e=>(0,Zt.D)(n.updateMetadata(e)),put:(e,t)=>C2(n.put(e,t)),putString:(e,t,r)=>C2(n.putString(e,t,r)),list:e=>(0,Zt.D)(n.list(e)),listAll:()=>(0,Zt.D)(n.listAll())}}!function G$(n){const e={TaskState:Us,TaskEvent:l$,StringFormat:Fo,Storage:E2,Reference:Fd};n.INTERNAL.registerComponent(new Js.wA("storage-compat",$$,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.1")}(id.Z);const W$=new h.OlP("angularfire2.storageBucket"),q$=new h.OlP("angularfire2.storage.maxUploadRetryTime"),K$=new h.OlP("angularfire2.storage.maxOperationRetryTime"),Z$=new h.OlP("angularfire2.storage.use-emulator");let Y$=(()=>{class n{constructor(t,r,i,a,l,f,_,w,C,S){const B=(0,Gr.on)(t,l,r);this.storage=(0,Gr.cc)(`${B.name}.storage.${i}`,"AngularFireStorage",B.name,()=>{const ee=l.runOutsideAngular(()=>B.storage(i||void 0)),le=C;return le&&ee.useEmulator(...le),_&&ee.setMaxUploadRetryTime(_),w&&ee.setMaxOperationRetryTime(w),ee},[_,w])}ref(t){return RD(this.storage.ref(t))}refFromURL(t){return RD(this.storage.refFromURL(t))}upload(t,r,i){return RD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr.Dh),h.LFG(Gr.xv,8),h.LFG(W$,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(yn.HU),h.LFG(q$,8),h.LFG(K$,8),h.LFG(Z$,8),h.LFG(cE,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Q$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),X$=(()=>{class n{constructor(){Hx.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Y$],imports:[Q$]}),n})();class ly{}ly.\u0275fac=function(e){return new(e||ly)},ly.\u0275mod=h.oAB({type:ly,bootstrap:[jE]}),ly.\u0275inj=h.cJS({providers:[vO,_u,Pd],imports:[eh,sy,Gr.hO.initializeApp({apiKey:"AIzaSyBsC1-zrz-0Imag3q0Go7x6wwe7GsvWBM4",authDomain:"chatapp-ebc86.firebaseapp.com",databaseURL:"https://chatapp-ebc86-default-rtdb.europe-west1.firebasedatabase.app",projectId:"chatapp-ebc86",storageBucket:"chatapp-ebc86.appspot.com",messagingSenderId:"38212819423",appId:"1:38212819423:web:154becdaefa3c9a5c44c6a",measurementId:"G-S3SW5BRVTK"}),vO,F8,ej,X$,iI]}),dm().bootstrapModule(ly).catch(n=>console.error(n))},7466:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,Z=O.lib.BlockCipher,ie=O.algo,K=[],J=[],L=[],H=[],k=[],R=[],P=[],$=[],q=[],te=[];!function(){for(var j=[],z=0;z<256;z++)j[z]=z<128?z<<1:z<<1^283;var ue=0,ne=0;for(z=0;z<256;z++){var se=ne^ne<<1^ne<<2^ne<<3^ne<<4;K[ue]=se=se>>>8^255&se^99,J[se]=ue;var W,oe=j[ue],be=j[oe],ve=j[be];L[ue]=(W=257*j[se]^16843008*se)<<24|W>>>8,H[ue]=W<<16|W>>>16,k[ue]=W<<8|W>>>24,R[ue]=W,P[se]=(W=16843009*ve^65537*be^257*oe^16843008*ue)<<24|W>>>8,$[se]=W<<16|W>>>16,q[se]=W<<8|W>>>24,te[se]=W,ue?(ue=oe^j[j[j[ve^oe]]],ne^=j[j[ne]]):ue=ne=1}}();var ge=[0,1,2,4,8,16,32,64,128,27,54],Q=ie.AES=Z.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var z=this._keyPriorReset=this._key,ue=z.words,ne=z.sigBytes/4,oe=4*((this._nRounds=ne+6)+1),be=this._keySchedule=[],ve=0;ve<oe;ve++)ve<ne?be[ve]=ue[ve]:(j=be[ve-1],ve%ne?ne>6&&ve%ne==4&&(j=K[j>>>24]<<24|K[j>>>16&255]<<16|K[j>>>8&255]<<8|K[255&j]):(j=K[(j=j<<8|j>>>24)>>>24]<<24|K[j>>>16&255]<<16|K[j>>>8&255]<<8|K[255&j],j^=ge[ve/ne|0]<<24),be[ve]=be[ve-ne]^j);for(var W=this._invKeySchedule=[],_e=0;_e<oe;_e++){if(ve=oe-_e,_e%4)var j=be[ve];else j=be[ve-4];W[_e]=_e<4||ve<=4?j:P[K[j>>>24]]^$[K[j>>>16&255]]^q[K[j>>>8&255]]^te[K[255&j]]}}},encryptBlock:function(j,z){this._doCryptBlock(j,z,this._keySchedule,L,H,k,R,K)},decryptBlock:function(j,z){var ue=j[z+1];j[z+1]=j[z+3],j[z+3]=ue,this._doCryptBlock(j,z,this._invKeySchedule,P,$,q,te,J),ue=j[z+1],j[z+1]=j[z+3],j[z+3]=ue},_doCryptBlock:function(j,z,ue,ne,se,oe,be,ve){for(var W=this._nRounds,_e=j[z]^ue[0],ce=j[z+1]^ue[1],Te=j[z+2]^ue[2],He=j[z+3]^ue[3],Ae=4,me=1;me<W;me++){var we=ne[_e>>>24]^se[ce>>>16&255]^oe[Te>>>8&255]^be[255&He]^ue[Ae++],Me=ne[ce>>>24]^se[Te>>>16&255]^oe[He>>>8&255]^be[255&_e]^ue[Ae++],ke=ne[Te>>>24]^se[He>>>16&255]^oe[_e>>>8&255]^be[255&ce]^ue[Ae++],de=ne[He>>>24]^se[_e>>>16&255]^oe[ce>>>8&255]^be[255&Te]^ue[Ae++];_e=we,ce=Me,Te=ke,He=de}we=(ve[_e>>>24]<<24|ve[ce>>>16&255]<<16|ve[Te>>>8&255]<<8|ve[255&He])^ue[Ae++],Me=(ve[ce>>>24]<<24|ve[Te>>>16&255]<<16|ve[He>>>8&255]<<8|ve[255&_e])^ue[Ae++],ke=(ve[Te>>>24]<<24|ve[He>>>16&255]<<16|ve[_e>>>8&255]<<8|ve[255&ce])^ue[Ae++],de=(ve[He>>>24]<<24|ve[_e>>>16&255]<<16|ve[ce>>>8&255]<<8|ve[255&Te])^ue[Ae++],j[z]=we,j[z+1]=Me,j[z+2]=ke,j[z+3]=de},keySize:8});O.AES=Z._createHelper(Q)}(),h.AES)},3057:function(Ue,Ie,M){var N,Z,ie,K,J,L,k,P,$,te,ge,Q,z,ne,oe,be,W,_e,h;Ue.exports=(h=M(7585),M(7865),void(h.lib.Cipher||(N=h,Z=N.lib,ie=Z.Base,K=Z.WordArray,J=Z.BufferedBlockAlgorithm,L=N.enc,k=L.Base64,P=N.algo.EvpKDF,$=Z.Cipher=J.extend({cfg:ie.extend(),createEncryptor:function(ce,Te){return this.create(this._ENC_XFORM_MODE,ce,Te)},createDecryptor:function(ce,Te){return this.create(this._DEC_XFORM_MODE,ce,Te)},init:function(ce,Te,He){this.cfg=this.cfg.extend(He),this._xformMode=ce,this._key=Te,this.reset()},reset:function(){J.reset.call(this),this._doReset()},process:function(ce){return this._append(ce),this._process()},finalize:function(ce){return ce&&this._append(ce),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ce(Te){return"string"==typeof Te?_e:be}return function(Te){return{encrypt:function(He,Ae,me){return ce(Ae).encrypt(Te,He,Ae,me)},decrypt:function(He,Ae,me){return ce(Ae).decrypt(Te,He,Ae,me)}}}}()}),Z.StreamCipher=$.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),te=N.mode={},ge=Z.BlockCipherMode=ie.extend({createEncryptor:function(ce,Te){return this.Encryptor.create(ce,Te)},createDecryptor:function(ce,Te){return this.Decryptor.create(ce,Te)},init:function(ce,Te){this._cipher=ce,this._iv=Te}}),Q=te.CBC=function(){var ce=ge.extend();function Te(He,Ae,me){var we,Me=this._iv;Me?(we=Me,this._iv=undefined):we=this._prevBlock;for(var ke=0;ke<me;ke++)He[Ae+ke]^=we[ke]}return ce.Encryptor=ce.extend({processBlock:function(He,Ae){var me=this._cipher,we=me.blockSize;Te.call(this,He,Ae,we),me.encryptBlock(He,Ae),this._prevBlock=He.slice(Ae,Ae+we)}}),ce.Decryptor=ce.extend({processBlock:function(He,Ae){var me=this._cipher,we=me.blockSize,Me=He.slice(Ae,Ae+we);me.decryptBlock(He,Ae),Te.call(this,He,Ae,we),this._prevBlock=Me}}),ce}(),z=(N.pad={}).Pkcs7={pad:function(ce,Te){for(var He=4*Te,Ae=He-ce.sigBytes%He,me=Ae<<24|Ae<<16|Ae<<8|Ae,we=[],Me=0;Me<Ae;Me+=4)we.push(me);var ke=K.create(we,Ae);ce.concat(ke)},unpad:function(ce){ce.sigBytes-=255&ce.words[ce.sigBytes-1>>>2]}},Z.BlockCipher=$.extend({cfg:$.cfg.extend({mode:Q,padding:z}),reset:function(){var ce;$.reset.call(this);var Te=this.cfg,He=Te.iv,Ae=Te.mode;this._xformMode==this._ENC_XFORM_MODE?ce=Ae.createEncryptor:(ce=Ae.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ce?this._mode.init(this,He&&He.words):(this._mode=ce.call(Ae,this,He&&He.words),this._mode.__creator=ce)},_doProcessBlock:function(ce,Te){this._mode.processBlock(ce,Te)},_doFinalize:function(){var ce,Te=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Te.pad(this._data,this.blockSize),ce=this._process(!0)):(ce=this._process(!0),Te.unpad(ce)),ce},blockSize:4}),ne=Z.CipherParams=ie.extend({init:function(ce){this.mixIn(ce)},toString:function(ce){return(ce||this.formatter).stringify(this)}}),oe=(N.format={}).OpenSSL={stringify:function(ce){var He=ce.ciphertext,Ae=ce.salt;return(Ae?K.create([1398893684,1701076831]).concat(Ae).concat(He):He).toString(k)},parse:function(ce){var Te,He=k.parse(ce),Ae=He.words;return 1398893684==Ae[0]&&1701076831==Ae[1]&&(Te=K.create(Ae.slice(2,4)),Ae.splice(0,4),He.sigBytes-=16),ne.create({ciphertext:He,salt:Te})}},be=Z.SerializableCipher=ie.extend({cfg:ie.extend({format:oe}),encrypt:function(ce,Te,He,Ae){Ae=this.cfg.extend(Ae);var me=ce.createEncryptor(He,Ae),we=me.finalize(Te),Me=me.cfg;return ne.create({ciphertext:we,key:He,iv:Me.iv,algorithm:ce,mode:Me.mode,padding:Me.padding,blockSize:ce.blockSize,formatter:Ae.format})},decrypt:function(ce,Te,He,Ae){return Ae=this.cfg.extend(Ae),Te=this._parse(Te,Ae.format),ce.createDecryptor(He,Ae).finalize(Te.ciphertext)},_parse:function(ce,Te){return"string"==typeof ce?Te.parse(ce,this):ce}}),W=(N.kdf={}).OpenSSL={execute:function(ce,Te,He,Ae){Ae||(Ae=K.random(8));var me=P.create({keySize:Te+He}).compute(ce,Ae),we=K.create(me.words.slice(Te),4*He);return me.sigBytes=4*Te,ne.create({key:me,iv:we,salt:Ae})}},_e=Z.PasswordBasedCipher=be.extend({cfg:be.cfg.extend({kdf:W}),encrypt:function(ce,Te,He,Ae){var me=(Ae=this.cfg.extend(Ae)).kdf.execute(He,ce.keySize,ce.ivSize);Ae.iv=me.iv;var we=be.encrypt.call(this,ce,Te,me.key,Ae);return we.mixIn(me),we},decrypt:function(ce,Te,He,Ae){Ae=this.cfg.extend(Ae),Te=this._parse(Te,Ae.format);var me=Ae.kdf.execute(He,ce.keySize,ce.ivSize,Te.salt);return Ae.iv=me.iv,be.decrypt.call(this,ce,Te,me.key,Ae)}}))))},7585:function(Ue,Ie,M){var h;Ue.exports=(h=h||function(O,N){var Z;if(typeof window<"u"&&window.crypto&&(Z=window.crypto),typeof self<"u"&&self.crypto&&(Z=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(Z=globalThis.crypto),!Z&&typeof window<"u"&&window.msCrypto&&(Z=window.msCrypto),!Z&&typeof global<"u"&&global.crypto&&(Z=global.crypto),!Z)try{Z=M(2480)}catch{}var ie=function(){if(Z){if("function"==typeof Z.getRandomValues)try{return Z.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof Z.randomBytes)try{return Z.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},K=Object.create||function(){function j(){}return function(z){var ue;return j.prototype=z,ue=new j,j.prototype=null,ue}}(),J={},L=J.lib={},H=L.Base={extend:function(j){var z=K(this);return j&&z.mixIn(j),(!z.hasOwnProperty("init")||this.init===z.init)&&(z.init=function(){z.$super.init.apply(this,arguments)}),z.init.prototype=z,z.$super=this,z},create:function(){var j=this.extend();return j.init.apply(j,arguments),j},init:function(){},mixIn:function(j){for(var z in j)j.hasOwnProperty(z)&&(this[z]=j[z]);j.hasOwnProperty("toString")&&(this.toString=j.toString)},clone:function(){return this.init.prototype.extend(this)}},k=L.WordArray=H.extend({init:function(j,z){j=this.words=j||[],this.sigBytes=null!=z?z:4*j.length},toString:function(j){return(j||P).stringify(this)},concat:function(j){var z=this.words,ue=j.words,ne=this.sigBytes,se=j.sigBytes;if(this.clamp(),ne%4)for(var oe=0;oe<se;oe++)z[ne+oe>>>2]|=(ue[oe>>>2]>>>24-oe%4*8&255)<<24-(ne+oe)%4*8;else for(var ve=0;ve<se;ve+=4)z[ne+ve>>>2]=ue[ve>>>2];return this.sigBytes+=se,this},clamp:function(){var j=this.words,z=this.sigBytes;j[z>>>2]&=4294967295<<32-z%4*8,j.length=O.ceil(z/4)},clone:function(){var j=H.clone.call(this);return j.words=this.words.slice(0),j},random:function(j){for(var z=[],ue=0;ue<j;ue+=4)z.push(ie());return new k.init(z,j)}}),R=J.enc={},P=R.Hex={stringify:function(j){for(var z=j.words,ue=j.sigBytes,ne=[],se=0;se<ue;se++){var oe=z[se>>>2]>>>24-se%4*8&255;ne.push((oe>>>4).toString(16)),ne.push((15&oe).toString(16))}return ne.join("")},parse:function(j){for(var z=j.length,ue=[],ne=0;ne<z;ne+=2)ue[ne>>>3]|=parseInt(j.substr(ne,2),16)<<24-ne%8*4;return new k.init(ue,z/2)}},$=R.Latin1={stringify:function(j){for(var z=j.words,ue=j.sigBytes,ne=[],se=0;se<ue;se++)ne.push(String.fromCharCode(z[se>>>2]>>>24-se%4*8&255));return ne.join("")},parse:function(j){for(var z=j.length,ue=[],ne=0;ne<z;ne++)ue[ne>>>2]|=(255&j.charCodeAt(ne))<<24-ne%4*8;return new k.init(ue,z)}},q=R.Utf8={stringify:function(j){try{return decodeURIComponent(escape($.stringify(j)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(j){return $.parse(unescape(encodeURIComponent(j)))}},te=L.BufferedBlockAlgorithm=H.extend({reset:function(){this._data=new k.init,this._nDataBytes=0},_append:function(j){"string"==typeof j&&(j=q.parse(j)),this._data.concat(j),this._nDataBytes+=j.sigBytes},_process:function(j){var z,ue=this._data,ne=ue.words,se=ue.sigBytes,oe=this.blockSize,ve=se/(4*oe),W=(ve=j?O.ceil(ve):O.max((0|ve)-this._minBufferSize,0))*oe,_e=O.min(4*W,se);if(W){for(var ce=0;ce<W;ce+=oe)this._doProcessBlock(ne,ce);z=ne.splice(0,W),ue.sigBytes-=_e}return new k.init(z,_e)},clone:function(){var j=H.clone.call(this);return j._data=this._data.clone(),j},_minBufferSize:0}),Q=(L.Hasher=te.extend({cfg:H.extend(),init:function(j){this.cfg=this.cfg.extend(j),this.reset()},reset:function(){te.reset.call(this),this._doReset()},update:function(j){return this._append(j),this._process(),this},finalize:function(j){return j&&this._append(j),this._doFinalize()},blockSize:16,_createHelper:function(j){return function(z,ue){return new j.init(ue).finalize(z)}},_createHmacHelper:function(j){return function(z,ue){return new Q.HMAC.init(j,ue).finalize(z)}}}),J.algo={});return J}(Math),h)},8319:function(Ue,Ie,M){var h,Z;Ue.exports=(h=M(7585),Z=h.lib.WordArray,h.enc.Base64={stringify:function(L){var H=L.words,k=L.sigBytes,R=this._map;L.clamp();for(var P=[],$=0;$<k;$+=3)for(var Q=(H[$>>>2]>>>24-$%4*8&255)<<16|(H[$+1>>>2]>>>24-($+1)%4*8&255)<<8|H[$+2>>>2]>>>24-($+2)%4*8&255,j=0;j<4&&$+.75*j<k;j++)P.push(R.charAt(Q>>>6*(3-j)&63));var z=R.charAt(64);if(z)for(;P.length%4;)P.push(z);return P.join("")},parse:function(L){var H=L.length,k=this._map,R=this._reverseMap;if(!R){R=this._reverseMap=[];for(var P=0;P<k.length;P++)R[k.charCodeAt(P)]=P}var $=k.charAt(64);if($){var q=L.indexOf($);-1!==q&&(H=q)}return function J(L,H,k){for(var R=[],P=0,$=0;$<H;$++)if($%4){var q=k[L.charCodeAt($-1)]<<$%4*2,te=k[L.charCodeAt($)]>>>6-$%4*2;R[P>>>2]|=(q|te)<<24-P%4*8,P++}return Z.create(R,P)}(L,H,R)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},h.enc.Base64)},4410:function(Ue,Ie,M){var h,Z;Ue.exports=(h=M(7585),Z=h.lib.WordArray,h.enc.Base64url={stringify:function(L,H=!0){var k=L.words,R=L.sigBytes,P=H?this._safe_map:this._map;L.clamp();for(var $=[],q=0;q<R;q+=3)for(var j=(k[q>>>2]>>>24-q%4*8&255)<<16|(k[q+1>>>2]>>>24-(q+1)%4*8&255)<<8|k[q+2>>>2]>>>24-(q+2)%4*8&255,z=0;z<4&&q+.75*z<R;z++)$.push(P.charAt(j>>>6*(3-z)&63));var ue=P.charAt(64);if(ue)for(;$.length%4;)$.push(ue);return $.join("")},parse:function(L,H=!0){var k=L.length,R=H?this._safe_map:this._map,P=this._reverseMap;if(!P){P=this._reverseMap=[];for(var $=0;$<R.length;$++)P[R.charCodeAt($)]=$}var q=R.charAt(64);if(q){var te=L.indexOf(q);-1!==te&&(k=te)}return function J(L,H,k){for(var R=[],P=0,$=0;$<H;$++)if($%4){var q=k[L.charCodeAt($-1)]<<$%4*2,te=k[L.charCodeAt($)]>>>6-$%4*2;R[P>>>2]|=(q|te)<<24-P%4*8,P++}return Z.create(R,P)}(L,k,P)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},h.enc.Base64url)},9012:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),function(){var Z=h.lib.WordArray,ie=h.enc;function J(L){return L<<8&4278255360|L>>>8&16711935}ie.Utf16=ie.Utf16BE={stringify:function(L){for(var H=L.words,k=L.sigBytes,R=[],P=0;P<k;P+=2)R.push(String.fromCharCode(H[P>>>2]>>>16-P%4*8&65535));return R.join("")},parse:function(L){for(var H=L.length,k=[],R=0;R<H;R++)k[R>>>1]|=L.charCodeAt(R)<<16-R%2*16;return Z.create(k,2*H)}},ie.Utf16LE={stringify:function(L){for(var H=L.words,k=L.sigBytes,R=[],P=0;P<k;P+=2){var $=J(H[P>>>2]>>>16-P%4*8&65535);R.push(String.fromCharCode($))}return R.join("")},parse:function(L){for(var H=L.length,k=[],R=0;R<H;R++)k[R>>>1]|=J(L.charCodeAt(R)<<16-R%2*16);return Z.create(k,2*H)}}}(),h.enc.Utf16)},7865:function(Ue,Ie,M){var O,N,Z,ie,K,L,h;Ue.exports=(h=M(7585),M(5162),M(3764),ie=(N=(O=h).lib).WordArray,L=(K=O.algo).EvpKDF=(Z=N.Base).extend({cfg:Z.extend({keySize:4,hasher:K.MD5,iterations:1}),init:function(H){this.cfg=this.cfg.extend(H)},compute:function(H,k){for(var R,P=this.cfg,$=P.hasher.create(),q=ie.create(),te=q.words,ge=P.keySize,Q=P.iterations;te.length<ge;){R&&$.update(R),R=$.update(H).finalize(k),$.reset();for(var j=1;j<Q;j++)R=$.finalize(R),$.reset();q.concat(R)}return q.sigBytes=4*ge,q}}),O.EvpKDF=function(H,k,R){return L.create(R).compute(H,k)},h.EvpKDF)},1847:function(Ue,Ie,M){var h,ie,J;Ue.exports=(h=M(7585),M(3057),ie=h.lib.CipherParams,J=h.enc.Hex,h.format.Hex={stringify:function(k){return k.ciphertext.toString(J)},parse:function(k){var R=J.parse(k);return ie.create({ciphertext:R})}},h.format.Hex)},3764:function(Ue,Ie,M){var h,K;Ue.exports=(h=M(7585),K=h.enc.Utf8,void(h.algo.HMAC=h.lib.Base.extend({init:function(H,k){H=this._hasher=new H.init,"string"==typeof k&&(k=K.parse(k));var R=H.blockSize,P=4*R;k.sigBytes>P&&(k=H.finalize(k)),k.clamp();for(var $=this._oKey=k.clone(),q=this._iKey=k.clone(),te=$.words,ge=q.words,Q=0;Q<R;Q++)te[Q]^=1549556828,ge[Q]^=909522486;$.sigBytes=q.sigBytes=P,this.reset()},reset:function(){var H=this._hasher;H.reset(),H.update(this._iKey)},update:function(H){return this._hasher.update(H),this},finalize:function(H){var k=this._hasher,R=k.finalize(H);return k.reset(),k.finalize(this._oKey.clone().concat(R))}})))},7206:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(401),M(7412),M(9012),M(8319),M(4410),M(9493),M(5162),M(1817),M(8769),M(3351),M(6787),M(1971),M(4973),M(3764),M(8812),M(7865),M(3057),M(4424),M(6635),M(3592),M(9354),M(7934),M(4413),M(4630),M(187),M(1691),M(3237),M(1847),M(7466),M(7243),M(486),M(8182),M(3544),h)},7412:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),function(){if("function"==typeof ArrayBuffer){var Z=h.lib.WordArray,ie=Z.init,K=Z.init=function(J){if(J instanceof ArrayBuffer&&(J=new Uint8Array(J)),(J instanceof Int8Array||typeof Uint8ClampedArray<"u"&&J instanceof Uint8ClampedArray||J instanceof Int16Array||J instanceof Uint16Array||J instanceof Int32Array||J instanceof Uint32Array||J instanceof Float32Array||J instanceof Float64Array)&&(J=new Uint8Array(J.buffer,J.byteOffset,J.byteLength)),J instanceof Uint8Array){for(var L=J.byteLength,H=[],k=0;k<L;k++)H[k>>>2]|=J[k]<<24-k%4*8;ie.call(this,H,L)}else ie.apply(this,arguments)};K.prototype=Z}}(),h.lib.WordArray)},9493:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),function(O){var N=h,Z=N.lib,ie=Z.WordArray,K=Z.Hasher,J=N.algo,L=[];!function(){for(var q=0;q<64;q++)L[q]=4294967296*O.abs(O.sin(q+1))|0}();var H=J.MD5=K.extend({_doReset:function(){this._hash=new ie.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(q,te){for(var ge=0;ge<16;ge++){var Q=te+ge,j=q[Q];q[Q]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8)}var z=this._hash.words,ue=q[te+0],ne=q[te+1],se=q[te+2],oe=q[te+3],be=q[te+4],ve=q[te+5],W=q[te+6],_e=q[te+7],ce=q[te+8],Te=q[te+9],He=q[te+10],Ae=q[te+11],me=q[te+12],we=q[te+13],Me=q[te+14],ke=q[te+15],de=z[0],Ee=z[1],xe=z[2],Ce=z[3];de=k(de,Ee,xe,Ce,ue,7,L[0]),Ce=k(Ce,de,Ee,xe,ne,12,L[1]),xe=k(xe,Ce,de,Ee,se,17,L[2]),Ee=k(Ee,xe,Ce,de,oe,22,L[3]),de=k(de,Ee,xe,Ce,be,7,L[4]),Ce=k(Ce,de,Ee,xe,ve,12,L[5]),xe=k(xe,Ce,de,Ee,W,17,L[6]),Ee=k(Ee,xe,Ce,de,_e,22,L[7]),de=k(de,Ee,xe,Ce,ce,7,L[8]),Ce=k(Ce,de,Ee,xe,Te,12,L[9]),xe=k(xe,Ce,de,Ee,He,17,L[10]),Ee=k(Ee,xe,Ce,de,Ae,22,L[11]),de=k(de,Ee,xe,Ce,me,7,L[12]),Ce=k(Ce,de,Ee,xe,we,12,L[13]),xe=k(xe,Ce,de,Ee,Me,17,L[14]),de=R(de,Ee=k(Ee,xe,Ce,de,ke,22,L[15]),xe,Ce,ne,5,L[16]),Ce=R(Ce,de,Ee,xe,W,9,L[17]),xe=R(xe,Ce,de,Ee,Ae,14,L[18]),Ee=R(Ee,xe,Ce,de,ue,20,L[19]),de=R(de,Ee,xe,Ce,ve,5,L[20]),Ce=R(Ce,de,Ee,xe,He,9,L[21]),xe=R(xe,Ce,de,Ee,ke,14,L[22]),Ee=R(Ee,xe,Ce,de,be,20,L[23]),de=R(de,Ee,xe,Ce,Te,5,L[24]),Ce=R(Ce,de,Ee,xe,Me,9,L[25]),xe=R(xe,Ce,de,Ee,oe,14,L[26]),Ee=R(Ee,xe,Ce,de,ce,20,L[27]),de=R(de,Ee,xe,Ce,we,5,L[28]),Ce=R(Ce,de,Ee,xe,se,9,L[29]),xe=R(xe,Ce,de,Ee,_e,14,L[30]),de=P(de,Ee=R(Ee,xe,Ce,de,me,20,L[31]),xe,Ce,ve,4,L[32]),Ce=P(Ce,de,Ee,xe,ce,11,L[33]),xe=P(xe,Ce,de,Ee,Ae,16,L[34]),Ee=P(Ee,xe,Ce,de,Me,23,L[35]),de=P(de,Ee,xe,Ce,ne,4,L[36]),Ce=P(Ce,de,Ee,xe,be,11,L[37]),xe=P(xe,Ce,de,Ee,_e,16,L[38]),Ee=P(Ee,xe,Ce,de,He,23,L[39]),de=P(de,Ee,xe,Ce,we,4,L[40]),Ce=P(Ce,de,Ee,xe,ue,11,L[41]),xe=P(xe,Ce,de,Ee,oe,16,L[42]),Ee=P(Ee,xe,Ce,de,W,23,L[43]),de=P(de,Ee,xe,Ce,Te,4,L[44]),Ce=P(Ce,de,Ee,xe,me,11,L[45]),xe=P(xe,Ce,de,Ee,ke,16,L[46]),de=$(de,Ee=P(Ee,xe,Ce,de,se,23,L[47]),xe,Ce,ue,6,L[48]),Ce=$(Ce,de,Ee,xe,_e,10,L[49]),xe=$(xe,Ce,de,Ee,Me,15,L[50]),Ee=$(Ee,xe,Ce,de,ve,21,L[51]),de=$(de,Ee,xe,Ce,me,6,L[52]),Ce=$(Ce,de,Ee,xe,oe,10,L[53]),xe=$(xe,Ce,de,Ee,He,15,L[54]),Ee=$(Ee,xe,Ce,de,ne,21,L[55]),de=$(de,Ee,xe,Ce,ce,6,L[56]),Ce=$(Ce,de,Ee,xe,ke,10,L[57]),xe=$(xe,Ce,de,Ee,W,15,L[58]),Ee=$(Ee,xe,Ce,de,we,21,L[59]),de=$(de,Ee,xe,Ce,be,6,L[60]),Ce=$(Ce,de,Ee,xe,Ae,10,L[61]),xe=$(xe,Ce,de,Ee,se,15,L[62]),Ee=$(Ee,xe,Ce,de,Te,21,L[63]),z[0]=z[0]+de|0,z[1]=z[1]+Ee|0,z[2]=z[2]+xe|0,z[3]=z[3]+Ce|0},_doFinalize:function(){var q=this._data,te=q.words,ge=8*this._nDataBytes,Q=8*q.sigBytes;te[Q>>>5]|=128<<24-Q%32;var j=O.floor(ge/4294967296),z=ge;te[15+(Q+64>>>9<<4)]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),te[14+(Q+64>>>9<<4)]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8),q.sigBytes=4*(te.length+1),this._process();for(var ue=this._hash,ne=ue.words,se=0;se<4;se++){var oe=ne[se];ne[se]=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8)}return ue},clone:function(){var q=K.clone.call(this);return q._hash=this._hash.clone(),q}});function k(q,te,ge,Q,j,z,ue){var ne=q+(te&ge|~te&Q)+j+ue;return(ne<<z|ne>>>32-z)+te}function R(q,te,ge,Q,j,z,ue){var ne=q+(te&Q|ge&~Q)+j+ue;return(ne<<z|ne>>>32-z)+te}function P(q,te,ge,Q,j,z,ue){var ne=q+(te^ge^Q)+j+ue;return(ne<<z|ne>>>32-z)+te}function $(q,te,ge,Q,j,z,ue){var ne=q+(ge^(te|~Q))+j+ue;return(ne<<z|ne>>>32-z)+te}N.MD5=K._createHelper(H),N.HmacMD5=K._createHmacHelper(H)}(Math),h.MD5)},4424:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(3057),h.mode.CFB=function(){var O=h.lib.BlockCipherMode.extend();function N(Z,ie,K,J){var L,H=this._iv;H?(L=H.slice(0),this._iv=void 0):L=this._prevBlock,J.encryptBlock(L,0);for(var k=0;k<K;k++)Z[ie+k]^=L[k]}return O.Encryptor=O.extend({processBlock:function(Z,ie){var K=this._cipher,J=K.blockSize;N.call(this,Z,ie,J,K),this._prevBlock=Z.slice(ie,ie+J)}}),O.Decryptor=O.extend({processBlock:function(Z,ie){var K=this._cipher,J=K.blockSize,L=Z.slice(ie,ie+J);N.call(this,Z,ie,J,K),this._prevBlock=L}}),O}(),h.mode.CFB)},3592:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(3057),h.mode.CTRGladman=function(){var O=h.lib.BlockCipherMode.extend();function N(K){if(255==(K>>24&255)){var J=K>>16&255,L=K>>8&255,H=255&K;255===J?(J=0,255===L?(L=0,255===H?H=0:++H):++L):++J,K=0,K+=J<<16,K+=L<<8,K+=H}else K+=1<<24;return K}var ie=O.Encryptor=O.extend({processBlock:function(K,J){var L=this._cipher,H=L.blockSize,k=this._iv,R=this._counter;k&&(R=this._counter=k.slice(0),this._iv=void 0),function Z(K){return 0===(K[0]=N(K[0]))&&(K[1]=N(K[1])),K}(R);var P=R.slice(0);L.encryptBlock(P,0);for(var $=0;$<H;$++)K[J+$]^=P[$]}});return O.Decryptor=ie,O}(),h.mode.CTRGladman)},6635:function(Ue,Ie,M){var O,N,h;Ue.exports=(h=M(7585),M(3057),h.mode.CTR=(N=(O=h.lib.BlockCipherMode.extend()).Encryptor=O.extend({processBlock:function(Z,ie){var K=this._cipher,J=K.blockSize,L=this._iv,H=this._counter;L&&(H=this._counter=L.slice(0),this._iv=void 0);var k=H.slice(0);K.encryptBlock(k,0),H[J-1]=H[J-1]+1|0;for(var R=0;R<J;R++)Z[ie+R]^=k[R]}}),O.Decryptor=N,O),h.mode.CTR)},7934:function(Ue,Ie,M){var O,h;Ue.exports=(h=M(7585),M(3057),h.mode.ECB=((O=h.lib.BlockCipherMode.extend()).Encryptor=O.extend({processBlock:function(N,Z){this._cipher.encryptBlock(N,Z)}}),O.Decryptor=O.extend({processBlock:function(N,Z){this._cipher.decryptBlock(N,Z)}}),O),h.mode.ECB)},9354:function(Ue,Ie,M){var O,N,h;Ue.exports=(h=M(7585),M(3057),h.mode.OFB=(N=(O=h.lib.BlockCipherMode.extend()).Encryptor=O.extend({processBlock:function(Z,ie){var K=this._cipher,J=K.blockSize,L=this._iv,H=this._keystream;L&&(H=this._keystream=L.slice(0),this._iv=void 0),K.encryptBlock(H,0);for(var k=0;k<J;k++)Z[ie+k]^=H[k]}}),O.Decryptor=N,O),h.mode.OFB)},4413:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(3057),h.pad.AnsiX923={pad:function(O,N){var Z=O.sigBytes,ie=4*N,K=ie-Z%ie,J=Z+K-1;O.clamp(),O.words[J>>>2]|=K<<24-J%4*8,O.sigBytes+=K},unpad:function(O){O.sigBytes-=255&O.words[O.sigBytes-1>>>2]}},h.pad.Ansix923)},4630:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(3057),h.pad.Iso10126={pad:function(O,N){var Z=4*N,ie=Z-O.sigBytes%Z;O.concat(h.lib.WordArray.random(ie-1)).concat(h.lib.WordArray.create([ie<<24],1))},unpad:function(O){O.sigBytes-=255&O.words[O.sigBytes-1>>>2]}},h.pad.Iso10126)},187:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(3057),h.pad.Iso97971={pad:function(O,N){O.concat(h.lib.WordArray.create([2147483648],1)),h.pad.ZeroPadding.pad(O,N)},unpad:function(O){h.pad.ZeroPadding.unpad(O),O.sigBytes--}},h.pad.Iso97971)},3237:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(3057),h.pad.NoPadding={pad:function(){},unpad:function(){}},h.pad.NoPadding)},1691:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(3057),h.pad.ZeroPadding={pad:function(O,N){var Z=4*N;O.clamp(),O.sigBytes+=Z-(O.sigBytes%Z||Z)},unpad:function(O){var N=O.words,Z=O.sigBytes-1;for(Z=O.sigBytes-1;Z>=0;Z--)if(N[Z>>>2]>>>24-Z%4*8&255){O.sigBytes=Z+1;break}}},h.pad.ZeroPadding)},8812:function(Ue,Ie,M){var O,N,Z,ie,K,L,H,h;Ue.exports=(h=M(7585),M(5162),M(3764),ie=(N=(O=h).lib).WordArray,L=(K=O.algo).HMAC,H=K.PBKDF2=(Z=N.Base).extend({cfg:Z.extend({keySize:4,hasher:K.SHA1,iterations:1}),init:function(k){this.cfg=this.cfg.extend(k)},compute:function(k,R){for(var P=this.cfg,$=L.create(P.hasher,k),q=ie.create(),te=ie.create([1]),ge=q.words,Q=te.words,j=P.keySize,z=P.iterations;ge.length<j;){var ue=$.update(R).finalize(te);$.reset();for(var ne=ue.words,se=ne.length,oe=ue,be=1;be<z;be++){oe=$.finalize(oe),$.reset();for(var ve=oe.words,W=0;W<se;W++)ne[W]^=ve[W]}q.concat(ue),Q[0]++}return q.sigBytes=4*j,q}}),O.PBKDF2=function(k,R,P){return H.create(P).compute(k,R)},h.PBKDF2)},3544:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,Z=O.lib.StreamCipher,K=[],J=[],L=[],H=O.algo.RabbitLegacy=Z.extend({_doReset:function(){var R=this._key.words,P=this.cfg.iv,$=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],q=this._C=[R[2]<<16|R[2]>>>16,4294901760&R[0]|65535&R[1],R[3]<<16|R[3]>>>16,4294901760&R[1]|65535&R[2],R[0]<<16|R[0]>>>16,4294901760&R[2]|65535&R[3],R[1]<<16|R[1]>>>16,4294901760&R[3]|65535&R[0]];this._b=0;for(var te=0;te<4;te++)k.call(this);for(te=0;te<8;te++)q[te]^=$[te+4&7];if(P){var ge=P.words,Q=ge[0],j=ge[1],z=16711935&(Q<<8|Q>>>24)|4278255360&(Q<<24|Q>>>8),ue=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),ne=z>>>16|4294901760&ue,se=ue<<16|65535&z;for(q[0]^=z,q[1]^=ne,q[2]^=ue,q[3]^=se,q[4]^=z,q[5]^=ne,q[6]^=ue,q[7]^=se,te=0;te<4;te++)k.call(this)}},_doProcessBlock:function(R,P){var $=this._X;k.call(this),K[0]=$[0]^$[5]>>>16^$[3]<<16,K[1]=$[2]^$[7]>>>16^$[5]<<16,K[2]=$[4]^$[1]>>>16^$[7]<<16,K[3]=$[6]^$[3]>>>16^$[1]<<16;for(var q=0;q<4;q++)K[q]=16711935&(K[q]<<8|K[q]>>>24)|4278255360&(K[q]<<24|K[q]>>>8),R[P+q]^=K[q]},blockSize:4,ivSize:2});function k(){for(var R=this._X,P=this._C,$=0;$<8;$++)J[$]=P[$];for(P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<J[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<J[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<J[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<J[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<J[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<J[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<J[6]>>>0?1:0)|0,this._b=P[7]>>>0<J[7]>>>0?1:0,$=0;$<8;$++){var q=R[$]+P[$],te=65535&q,ge=q>>>16;L[$]=((te*te>>>17)+te*ge>>>15)+ge*ge^((4294901760&q)*q|0)+((65535&q)*q|0)}R[0]=L[0]+(L[7]<<16|L[7]>>>16)+(L[6]<<16|L[6]>>>16)|0,R[1]=L[1]+(L[0]<<8|L[0]>>>24)+L[7]|0,R[2]=L[2]+(L[1]<<16|L[1]>>>16)+(L[0]<<16|L[0]>>>16)|0,R[3]=L[3]+(L[2]<<8|L[2]>>>24)+L[1]|0,R[4]=L[4]+(L[3]<<16|L[3]>>>16)+(L[2]<<16|L[2]>>>16)|0,R[5]=L[5]+(L[4]<<8|L[4]>>>24)+L[3]|0,R[6]=L[6]+(L[5]<<16|L[5]>>>16)+(L[4]<<16|L[4]>>>16)|0,R[7]=L[7]+(L[6]<<8|L[6]>>>24)+L[5]|0}O.RabbitLegacy=Z._createHelper(H)}(),h.RabbitLegacy)},8182:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,Z=O.lib.StreamCipher,K=[],J=[],L=[],H=O.algo.Rabbit=Z.extend({_doReset:function(){for(var R=this._key.words,P=this.cfg.iv,$=0;$<4;$++)R[$]=16711935&(R[$]<<8|R[$]>>>24)|4278255360&(R[$]<<24|R[$]>>>8);var q=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],te=this._C=[R[2]<<16|R[2]>>>16,4294901760&R[0]|65535&R[1],R[3]<<16|R[3]>>>16,4294901760&R[1]|65535&R[2],R[0]<<16|R[0]>>>16,4294901760&R[2]|65535&R[3],R[1]<<16|R[1]>>>16,4294901760&R[3]|65535&R[0]];for(this._b=0,$=0;$<4;$++)k.call(this);for($=0;$<8;$++)te[$]^=q[$+4&7];if(P){var ge=P.words,Q=ge[0],j=ge[1],z=16711935&(Q<<8|Q>>>24)|4278255360&(Q<<24|Q>>>8),ue=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),ne=z>>>16|4294901760&ue,se=ue<<16|65535&z;for(te[0]^=z,te[1]^=ne,te[2]^=ue,te[3]^=se,te[4]^=z,te[5]^=ne,te[6]^=ue,te[7]^=se,$=0;$<4;$++)k.call(this)}},_doProcessBlock:function(R,P){var $=this._X;k.call(this),K[0]=$[0]^$[5]>>>16^$[3]<<16,K[1]=$[2]^$[7]>>>16^$[5]<<16,K[2]=$[4]^$[1]>>>16^$[7]<<16,K[3]=$[6]^$[3]>>>16^$[1]<<16;for(var q=0;q<4;q++)K[q]=16711935&(K[q]<<8|K[q]>>>24)|4278255360&(K[q]<<24|K[q]>>>8),R[P+q]^=K[q]},blockSize:4,ivSize:2});function k(){for(var R=this._X,P=this._C,$=0;$<8;$++)J[$]=P[$];for(P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<J[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<J[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<J[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<J[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<J[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<J[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<J[6]>>>0?1:0)|0,this._b=P[7]>>>0<J[7]>>>0?1:0,$=0;$<8;$++){var q=R[$]+P[$],te=65535&q,ge=q>>>16;L[$]=((te*te>>>17)+te*ge>>>15)+ge*ge^((4294901760&q)*q|0)+((65535&q)*q|0)}R[0]=L[0]+(L[7]<<16|L[7]>>>16)+(L[6]<<16|L[6]>>>16)|0,R[1]=L[1]+(L[0]<<8|L[0]>>>24)+L[7]|0,R[2]=L[2]+(L[1]<<16|L[1]>>>16)+(L[0]<<16|L[0]>>>16)|0,R[3]=L[3]+(L[2]<<8|L[2]>>>24)+L[1]|0,R[4]=L[4]+(L[3]<<16|L[3]>>>16)+(L[2]<<16|L[2]>>>16)|0,R[5]=L[5]+(L[4]<<8|L[4]>>>24)+L[3]|0,R[6]=L[6]+(L[5]<<16|L[5]>>>16)+(L[4]<<16|L[4]>>>16)|0,R[7]=L[7]+(L[6]<<8|L[6]>>>24)+L[5]|0}O.Rabbit=Z._createHelper(H)}(),h.Rabbit)},486:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,Z=O.lib.StreamCipher,ie=O.algo,K=ie.RC4=Z.extend({_doReset:function(){for(var H=this._key,k=H.words,R=H.sigBytes,P=this._S=[],$=0;$<256;$++)P[$]=$;$=0;for(var q=0;$<256;$++){var te=$%R,Q=P[$];P[$]=P[q=(q+P[$]+(k[te>>>2]>>>24-te%4*8&255))%256],P[q]=Q}this._i=this._j=0},_doProcessBlock:function(H,k){H[k]^=J.call(this)},keySize:8,ivSize:0});function J(){for(var H=this._S,k=this._i,R=this._j,P=0,$=0;$<4;$++){var q=H[k=(k+1)%256];H[k]=H[R=(R+H[k])%256],H[R]=q,P|=H[(H[k]+H[R])%256]<<24-8*$}return this._i=k,this._j=R,P}O.RC4=Z._createHelper(K);var L=ie.RC4Drop=K.extend({cfg:K.cfg.extend({drop:192}),_doReset:function(){K._doReset.call(this);for(var H=this.cfg.drop;H>0;H--)J.call(this)}});O.RC4Drop=Z._createHelper(L)}(),h.RC4)},4973:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),function(O){var N=h,Z=N.lib,ie=Z.WordArray,K=Z.Hasher,J=N.algo,L=ie.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),H=ie.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),k=ie.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),R=ie.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),P=ie.create([0,1518500249,1859775393,2400959708,2840853838]),$=ie.create([1352829926,1548603684,1836072691,2053994217,0]),q=J.RIPEMD160=K.extend({_doReset:function(){this._hash=ie.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ne,se){for(var oe=0;oe<16;oe++){var be=se+oe,ve=ne[be];ne[be]=16711935&(ve<<8|ve>>>24)|4278255360&(ve<<24|ve>>>8)}var we,Me,ke,de,Ee,xe,Ce,bt,et,Pt,We,W=this._hash.words,_e=P.words,ce=$.words,Te=L.words,He=H.words,Ae=k.words,me=R.words;for(xe=we=W[0],Ce=Me=W[1],bt=ke=W[2],et=de=W[3],Pt=Ee=W[4],oe=0;oe<80;oe+=1)We=we+ne[se+Te[oe]]|0,We+=oe<16?te(Me,ke,de)+_e[0]:oe<32?ge(Me,ke,de)+_e[1]:oe<48?Q(Me,ke,de)+_e[2]:oe<64?j(Me,ke,de)+_e[3]:z(Me,ke,de)+_e[4],We=(We=ue(We|=0,Ae[oe]))+Ee|0,we=Ee,Ee=de,de=ue(ke,10),ke=Me,Me=We,We=xe+ne[se+He[oe]]|0,We+=oe<16?z(Ce,bt,et)+ce[0]:oe<32?j(Ce,bt,et)+ce[1]:oe<48?Q(Ce,bt,et)+ce[2]:oe<64?ge(Ce,bt,et)+ce[3]:te(Ce,bt,et)+ce[4],We=(We=ue(We|=0,me[oe]))+Pt|0,xe=Pt,Pt=et,et=ue(bt,10),bt=Ce,Ce=We;We=W[1]+ke+et|0,W[1]=W[2]+de+Pt|0,W[2]=W[3]+Ee+xe|0,W[3]=W[4]+we+Ce|0,W[4]=W[0]+Me+bt|0,W[0]=We},_doFinalize:function(){var ne=this._data,se=ne.words,oe=8*this._nDataBytes,be=8*ne.sigBytes;se[be>>>5]|=128<<24-be%32,se[14+(be+64>>>9<<4)]=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8),ne.sigBytes=4*(se.length+1),this._process();for(var ve=this._hash,W=ve.words,_e=0;_e<5;_e++){var ce=W[_e];W[_e]=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8)}return ve},clone:function(){var ne=K.clone.call(this);return ne._hash=this._hash.clone(),ne}});function te(ne,se,oe){return ne^se^oe}function ge(ne,se,oe){return ne&se|~ne&oe}function Q(ne,se,oe){return(ne|~se)^oe}function j(ne,se,oe){return ne&oe|se&~oe}function z(ne,se,oe){return ne^(se|~oe)}function ue(ne,se){return ne<<se|ne>>>32-se}N.RIPEMD160=K._createHelper(q),N.HmacRIPEMD160=K._createHmacHelper(q)}(Math),h.RIPEMD160)},5162:function(Ue,Ie,M){var O,N,Z,ie,J,L,h;Ue.exports=(h=M(7585),Z=(N=(O=h).lib).WordArray,J=[],L=O.algo.SHA1=(ie=N.Hasher).extend({_doReset:function(){this._hash=new Z.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(H,k){for(var R=this._hash.words,P=R[0],$=R[1],q=R[2],te=R[3],ge=R[4],Q=0;Q<80;Q++){if(Q<16)J[Q]=0|H[k+Q];else{var j=J[Q-3]^J[Q-8]^J[Q-14]^J[Q-16];J[Q]=j<<1|j>>>31}var z=(P<<5|P>>>27)+ge+J[Q];z+=Q<20?1518500249+($&q|~$&te):Q<40?1859775393+($^q^te):Q<60?($&q|$&te|q&te)-1894007588:($^q^te)-899497514,ge=te,te=q,q=$<<30|$>>>2,$=P,P=z}R[0]=R[0]+P|0,R[1]=R[1]+$|0,R[2]=R[2]+q|0,R[3]=R[3]+te|0,R[4]=R[4]+ge|0},_doFinalize:function(){var H=this._data,k=H.words,R=8*this._nDataBytes,P=8*H.sigBytes;return k[P>>>5]|=128<<24-P%32,k[14+(P+64>>>9<<4)]=Math.floor(R/4294967296),k[15+(P+64>>>9<<4)]=R,H.sigBytes=4*k.length,this._process(),this._hash},clone:function(){var H=ie.clone.call(this);return H._hash=this._hash.clone(),H}}),O.SHA1=ie._createHelper(L),O.HmacSHA1=ie._createHmacHelper(L),h.SHA1)},8769:function(Ue,Ie,M){var O,Z,ie,K,J,h;Ue.exports=(h=M(7585),M(1817),Z=(O=h).lib.WordArray,J=(ie=O.algo).SHA224=(K=ie.SHA256).extend({_doReset:function(){this._hash=new Z.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var L=K._doFinalize.call(this);return L.sigBytes-=4,L}}),O.SHA224=K._createHelper(J),O.HmacSHA224=K._createHmacHelper(J),h.SHA224)},1817:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),function(O){var N=h,Z=N.lib,ie=Z.WordArray,K=Z.Hasher,J=N.algo,L=[],H=[];!function(){function P(ge){for(var Q=O.sqrt(ge),j=2;j<=Q;j++)if(!(ge%j))return!1;return!0}function $(ge){return 4294967296*(ge-(0|ge))|0}for(var q=2,te=0;te<64;)P(q)&&(te<8&&(L[te]=$(O.pow(q,.5))),H[te]=$(O.pow(q,1/3)),te++),q++}();var k=[],R=J.SHA256=K.extend({_doReset:function(){this._hash=new ie.init(L.slice(0))},_doProcessBlock:function(P,$){for(var q=this._hash.words,te=q[0],ge=q[1],Q=q[2],j=q[3],z=q[4],ue=q[5],ne=q[6],se=q[7],oe=0;oe<64;oe++){if(oe<16)k[oe]=0|P[$+oe];else{var be=k[oe-15],W=k[oe-2];k[oe]=((be<<25|be>>>7)^(be<<14|be>>>18)^be>>>3)+k[oe-7]+((W<<15|W>>>17)^(W<<13|W>>>19)^W>>>10)+k[oe-16]}var Te=te&ge^te&Q^ge&Q,me=se+((z<<26|z>>>6)^(z<<21|z>>>11)^(z<<7|z>>>25))+(z&ue^~z&ne)+H[oe]+k[oe];se=ne,ne=ue,ue=z,z=j+me|0,j=Q,Q=ge,ge=te,te=me+(((te<<30|te>>>2)^(te<<19|te>>>13)^(te<<10|te>>>22))+Te)|0}q[0]=q[0]+te|0,q[1]=q[1]+ge|0,q[2]=q[2]+Q|0,q[3]=q[3]+j|0,q[4]=q[4]+z|0,q[5]=q[5]+ue|0,q[6]=q[6]+ne|0,q[7]=q[7]+se|0},_doFinalize:function(){var P=this._data,$=P.words,q=8*this._nDataBytes,te=8*P.sigBytes;return $[te>>>5]|=128<<24-te%32,$[14+(te+64>>>9<<4)]=O.floor(q/4294967296),$[15+(te+64>>>9<<4)]=q,P.sigBytes=4*$.length,this._process(),this._hash},clone:function(){var P=K.clone.call(this);return P._hash=this._hash.clone(),P}});N.SHA256=K._createHelper(R),N.HmacSHA256=K._createHmacHelper(R)}(Math),h.SHA256)},1971:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(401),function(O){var N=h,Z=N.lib,ie=Z.WordArray,K=Z.Hasher,L=N.x64.Word,H=N.algo,k=[],R=[],P=[];!function(){for(var te=1,ge=0,Q=0;Q<24;Q++){k[te+5*ge]=(Q+1)*(Q+2)/2%64;var z=(2*te+3*ge)%5;te=ge%5,ge=z}for(te=0;te<5;te++)for(ge=0;ge<5;ge++)R[te+5*ge]=ge+(2*te+3*ge)%5*5;for(var ue=1,ne=0;ne<24;ne++){for(var se=0,oe=0,be=0;be<7;be++){if(1&ue){var ve=(1<<be)-1;ve<32?oe^=1<<ve:se^=1<<ve-32}128&ue?ue=ue<<1^113:ue<<=1}P[ne]=L.create(se,oe)}}();var $=[];!function(){for(var te=0;te<25;te++)$[te]=L.create()}();var q=H.SHA3=K.extend({cfg:K.cfg.extend({outputLength:512}),_doReset:function(){for(var te=this._state=[],ge=0;ge<25;ge++)te[ge]=new L.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(te,ge){for(var Q=this._state,j=this.blockSize/2,z=0;z<j;z++){var ue=te[ge+2*z],ne=te[ge+2*z+1];ue=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8),(se=Q[z]).high^=ne=16711935&(ne<<8|ne>>>24)|4278255360&(ne<<24|ne>>>8),se.low^=ue}for(var oe=0;oe<24;oe++){for(var be=0;be<5;be++){for(var ve=0,W=0,_e=0;_e<5;_e++)ve^=(se=Q[be+5*_e]).high,W^=se.low;var ce=$[be];ce.high=ve,ce.low=W}for(be=0;be<5;be++){var Te=$[(be+4)%5],He=$[(be+1)%5],Ae=He.high,me=He.low;for(ve=Te.high^(Ae<<1|me>>>31),W=Te.low^(me<<1|Ae>>>31),_e=0;_e<5;_e++)(se=Q[be+5*_e]).high^=ve,se.low^=W}for(var we=1;we<25;we++){var Me=(se=Q[we]).high,ke=se.low,de=k[we];de<32?(ve=Me<<de|ke>>>32-de,W=ke<<de|Me>>>32-de):(ve=ke<<de-32|Me>>>64-de,W=Me<<de-32|ke>>>64-de);var Ee=$[R[we]];Ee.high=ve,Ee.low=W}var xe=$[0],Ce=Q[0];for(xe.high=Ce.high,xe.low=Ce.low,be=0;be<5;be++)for(_e=0;_e<5;_e++){var bt=$[we=be+5*_e],et=$[(be+1)%5+5*_e],Pt=$[(be+2)%5+5*_e];(se=Q[we]).high=bt.high^~et.high&Pt.high,se.low=bt.low^~et.low&Pt.low}var se,We=P[oe];(se=Q[0]).high^=We.high,se.low^=We.low}},_doFinalize:function(){var te=this._data,ge=te.words,j=8*te.sigBytes,z=32*this.blockSize;ge[j>>>5]|=1<<24-j%32,ge[(O.ceil((j+1)/z)*z>>>5)-1]|=128,te.sigBytes=4*ge.length,this._process();for(var ue=this._state,ne=this.cfg.outputLength/8,se=ne/8,oe=[],be=0;be<se;be++){var ve=ue[be],W=ve.high,_e=ve.low;W=16711935&(W<<8|W>>>24)|4278255360&(W<<24|W>>>8),oe.push(_e=16711935&(_e<<8|_e>>>24)|4278255360&(_e<<24|_e>>>8)),oe.push(W)}return new ie.init(oe,ne)},clone:function(){for(var te=K.clone.call(this),ge=te._state=this._state.slice(0),Q=0;Q<25;Q++)ge[Q]=ge[Q].clone();return te}});N.SHA3=K._createHelper(q),N.HmacSHA3=K._createHmacHelper(q)}(Math),h.SHA3)},6787:function(Ue,Ie,M){var O,N,Z,ie,K,J,L,h;Ue.exports=(h=M(7585),M(401),M(3351),Z=(N=(O=h).x64).Word,ie=N.WordArray,L=(K=O.algo).SHA384=(J=K.SHA512).extend({_doReset:function(){this._hash=new ie.init([new Z.init(3418070365,3238371032),new Z.init(1654270250,914150663),new Z.init(2438529370,812702999),new Z.init(355462360,4144912697),new Z.init(1731405415,4290775857),new Z.init(2394180231,1750603025),new Z.init(3675008525,1694076839),new Z.init(1203062813,3204075428)])},_doFinalize:function(){var H=J._doFinalize.call(this);return H.sigBytes-=16,H}}),O.SHA384=J._createHelper(L),O.HmacSHA384=J._createHmacHelper(L),h.SHA384)},3351:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(401),function(){var O=h,Z=O.lib.Hasher,ie=O.x64,K=ie.Word,J=ie.WordArray,L=O.algo;function H(){return K.create.apply(K,arguments)}var k=[H(1116352408,3609767458),H(1899447441,602891725),H(3049323471,3964484399),H(3921009573,2173295548),H(961987163,4081628472),H(1508970993,3053834265),H(2453635748,2937671579),H(2870763221,3664609560),H(3624381080,2734883394),H(310598401,1164996542),H(607225278,1323610764),H(1426881987,3590304994),H(1925078388,4068182383),H(2162078206,991336113),H(2614888103,633803317),H(3248222580,3479774868),H(3835390401,2666613458),H(4022224774,944711139),H(264347078,2341262773),H(604807628,2007800933),H(770255983,1495990901),H(1249150122,1856431235),H(1555081692,3175218132),H(1996064986,2198950837),H(2554220882,3999719339),H(2821834349,766784016),H(2952996808,2566594879),H(3210313671,3203337956),H(3336571891,1034457026),H(3584528711,2466948901),H(113926993,3758326383),H(338241895,168717936),H(666307205,1188179964),H(773529912,1546045734),H(1294757372,1522805485),H(1396182291,2643833823),H(1695183700,2343527390),H(1986661051,1014477480),H(2177026350,1206759142),H(2456956037,344077627),H(2730485921,1290863460),H(2820302411,3158454273),H(3259730800,3505952657),H(3345764771,106217008),H(3516065817,3606008344),H(3600352804,1432725776),H(4094571909,1467031594),H(275423344,851169720),H(430227734,3100823752),H(506948616,1363258195),H(659060556,3750685593),H(883997877,3785050280),H(958139571,3318307427),H(1322822218,3812723403),H(1537002063,2003034995),H(1747873779,3602036899),H(1955562222,1575990012),H(2024104815,1125592928),H(2227730452,2716904306),H(2361852424,442776044),H(2428436474,593698344),H(2756734187,3733110249),H(3204031479,2999351573),H(3329325298,3815920427),H(3391569614,3928383900),H(3515267271,566280711),H(3940187606,3454069534),H(4118630271,4000239992),H(116418474,1914138554),H(174292421,2731055270),H(289380356,3203993006),H(460393269,320620315),H(685471733,587496836),H(852142971,1086792851),H(1017036298,365543100),H(1126000580,2618297676),H(1288033470,3409855158),H(1501505948,4234509866),H(1607167915,987167468),H(1816402316,1246189591)],R=[];!function(){for(var $=0;$<80;$++)R[$]=H()}();var P=L.SHA512=Z.extend({_doReset:function(){this._hash=new J.init([new K.init(1779033703,4089235720),new K.init(3144134277,2227873595),new K.init(1013904242,4271175723),new K.init(2773480762,1595750129),new K.init(1359893119,2917565137),new K.init(2600822924,725511199),new K.init(528734635,4215389547),new K.init(1541459225,327033209)])},_doProcessBlock:function($,q){for(var te=this._hash.words,ge=te[0],Q=te[1],j=te[2],z=te[3],ue=te[4],ne=te[5],se=te[6],oe=te[7],be=ge.high,ve=ge.low,W=Q.high,_e=Q.low,ce=j.high,Te=j.low,He=z.high,Ae=z.low,me=ue.high,we=ue.low,Me=ne.high,ke=ne.low,de=se.high,Ee=se.low,xe=oe.high,Ce=oe.low,bt=be,et=ve,Pt=W,We=_e,St=ce,hn=Te,Cn=He,pn=Ae,tn=me,En=we,ii=Me,ur=ke,Xn=de,qr=Ee,gn=xe,Jn=Ce,ot=0;ot<80;ot++){var On,Gn,In=R[ot];if(ot<16)Gn=In.high=0|$[q+2*ot],On=In.low=0|$[q+2*ot+1];else{var lr=R[ot-15],Pr=lr.high,Tt=lr.low,xt=(Tt>>>1|Pr<<31)^(Tt>>>8|Pr<<24)^(Tt>>>7|Pr<<25),Ei=R[ot-2],mn=Ei.high,_n=Ei.low,er=(_n>>>19|mn<<13)^(_n<<3|mn>>>29)^(_n>>>6|mn<<26),ms=R[ot-7],en=R[ot-16],oi=en.low;In.high=Gn=(Gn=(Gn=((Pr>>>1|Tt<<31)^(Pr>>>8|Tt<<24)^Pr>>>7)+ms.high+((On=xt+ms.low)>>>0<xt>>>0?1:0))+((mn>>>19|_n<<13)^(mn<<3|_n>>>29)^mn>>>6)+((On+=er)>>>0<er>>>0?1:0))+en.high+((On+=oi)>>>0<oi>>>0?1:0),In.low=On}var nt,Qe=tn&ii^~tn&Xn,Ge=En&ur^~En&qr,st=bt&Pt^bt&St^Pt&St,Vt=(et>>>28|bt<<4)^(et<<30|bt>>>2)^(et<<25|bt>>>7),fe=k[ot],Se=fe.low,Rt=gn+((tn>>>14|En<<18)^(tn>>>18|En<<14)^(tn<<23|En>>>9))+((nt=Jn+((En>>>14|tn<<18)^(En>>>18|tn<<14)^(En<<23|tn>>>9)))>>>0<Jn>>>0?1:0),Qt=Vt+(et&We^et&hn^We&hn);gn=Xn,Jn=qr,Xn=ii,qr=ur,ii=tn,ur=En,tn=Cn+(Rt=(Rt=(Rt=Rt+Qe+((nt+=Ge)>>>0<Ge>>>0?1:0))+fe.high+((nt+=Se)>>>0<Se>>>0?1:0))+Gn+((nt+=On)>>>0<On>>>0?1:0))+((En=pn+nt|0)>>>0<pn>>>0?1:0)|0,Cn=St,pn=hn,St=Pt,hn=We,Pt=bt,We=et,bt=Rt+(((bt>>>28|et<<4)^(bt<<30|et>>>2)^(bt<<25|et>>>7))+st+(Qt>>>0<Vt>>>0?1:0))+((et=nt+Qt|0)>>>0<nt>>>0?1:0)|0}ve=ge.low=ve+et,ge.high=be+bt+(ve>>>0<et>>>0?1:0),_e=Q.low=_e+We,Q.high=W+Pt+(_e>>>0<We>>>0?1:0),Te=j.low=Te+hn,j.high=ce+St+(Te>>>0<hn>>>0?1:0),Ae=z.low=Ae+pn,z.high=He+Cn+(Ae>>>0<pn>>>0?1:0),we=ue.low=we+En,ue.high=me+tn+(we>>>0<En>>>0?1:0),ke=ne.low=ke+ur,ne.high=Me+ii+(ke>>>0<ur>>>0?1:0),Ee=se.low=Ee+qr,se.high=de+Xn+(Ee>>>0<qr>>>0?1:0),Ce=oe.low=Ce+Jn,oe.high=xe+gn+(Ce>>>0<Jn>>>0?1:0)},_doFinalize:function(){var $=this._data,q=$.words,te=8*this._nDataBytes,ge=8*$.sigBytes;return q[ge>>>5]|=128<<24-ge%32,q[30+(ge+128>>>10<<5)]=Math.floor(te/4294967296),q[31+(ge+128>>>10<<5)]=te,$.sigBytes=4*q.length,this._process(),this._hash.toX32()},clone:function(){var $=Z.clone.call(this);return $._hash=this._hash.clone(),$},blockSize:32});O.SHA512=Z._createHelper(P),O.HmacSHA512=Z._createHmacHelper(P)}(),h.SHA512)},7243:function(Ue,Ie,M){var h;Ue.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,N=O.lib,Z=N.WordArray,ie=N.BlockCipher,K=O.algo,J=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],L=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],H=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],k=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],R=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],P=K.DES=ie.extend({_doReset:function(){for(var Q=this._key.words,j=[],z=0;z<56;z++){var ue=J[z]-1;j[z]=Q[ue>>>5]>>>31-ue%32&1}for(var ne=this._subKeys=[],se=0;se<16;se++){var oe=ne[se]=[],be=H[se];for(z=0;z<24;z++)oe[z/6|0]|=j[(L[z]-1+be)%28]<<31-z%6,oe[4+(z/6|0)]|=j[28+(L[z+24]-1+be)%28]<<31-z%6;for(oe[0]=oe[0]<<1|oe[0]>>>31,z=1;z<7;z++)oe[z]=oe[z]>>>4*(z-1)+3;oe[7]=oe[7]<<5|oe[7]>>>27}var ve=this._invSubKeys=[];for(z=0;z<16;z++)ve[z]=ne[15-z]},encryptBlock:function(ge,Q){this._doCryptBlock(ge,Q,this._subKeys)},decryptBlock:function(ge,Q){this._doCryptBlock(ge,Q,this._invSubKeys)},_doCryptBlock:function(ge,Q,j){this._lBlock=ge[Q],this._rBlock=ge[Q+1],$.call(this,4,252645135),$.call(this,16,65535),q.call(this,2,858993459),q.call(this,8,16711935),$.call(this,1,1431655765);for(var z=0;z<16;z++){for(var ue=j[z],ne=this._lBlock,se=this._rBlock,oe=0,be=0;be<8;be++)oe|=k[be][((se^ue[be])&R[be])>>>0];this._lBlock=se,this._rBlock=ne^oe}var ve=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ve,$.call(this,1,1431655765),q.call(this,8,16711935),q.call(this,2,858993459),$.call(this,16,65535),$.call(this,4,252645135),ge[Q]=this._lBlock,ge[Q+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function $(ge,Q){var j=(this._lBlock>>>ge^this._rBlock)&Q;this._rBlock^=j,this._lBlock^=j<<ge}function q(ge,Q){var j=(this._rBlock>>>ge^this._lBlock)&Q;this._lBlock^=j,this._rBlock^=j<<ge}O.DES=ie._createHelper(P);var te=K.TripleDES=ie.extend({_doReset:function(){var Q=this._key.words;if(2!==Q.length&&4!==Q.length&&Q.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var j=Q.slice(0,2),z=Q.length<4?Q.slice(0,2):Q.slice(2,4),ue=Q.length<6?Q.slice(0,2):Q.slice(4,6);this._des1=P.createEncryptor(Z.create(j)),this._des2=P.createEncryptor(Z.create(z)),this._des3=P.createEncryptor(Z.create(ue))},encryptBlock:function(ge,Q){this._des1.encryptBlock(ge,Q),this._des2.decryptBlock(ge,Q),this._des3.encryptBlock(ge,Q)},decryptBlock:function(ge,Q){this._des3.decryptBlock(ge,Q),this._des2.encryptBlock(ge,Q),this._des1.decryptBlock(ge,Q)},keySize:6,ivSize:2,blockSize:2});O.TripleDES=ie._createHelper(te)}(),h.TripleDES)},401:function(Ue,Ie,M){var Z,ie,K,J,h;Ue.exports=(h=M(7585),ie=(Z=h.lib).Base,K=Z.WordArray,(J=h.x64={}).Word=ie.extend({init:function(k,R){this.high=k,this.low=R}}),J.WordArray=ie.extend({init:function(k,R){k=this.words=k||[],this.sigBytes=null!=R?R:8*k.length},toX32:function(){for(var k=this.words,R=k.length,P=[],$=0;$<R;$++){var q=k[$];P.push(q.high),P.push(q.low)}return K.create(P,this.sigBytes)},clone:function(){for(var k=ie.clone.call(this),R=k.words=this.words.slice(0),P=R.length,$=0;$<P;$++)R[$]=R[$].clone();return k}}),h)},9751:(Ue,Ie,M)=>{"use strict";M.d(Ie,{y:()=>L});var h=M(930),O=M(727),N=M(8822),Z=M(9635),ie=M(2416),K=M(576),J=M(2806);let L=(()=>{class P{constructor(q){q&&(this._subscribe=q)}lift(q){const te=new P;return te.source=this,te.operator=q,te}subscribe(q,te,ge){const Q=function R(P){return P&&P instanceof h.Lv||function k(P){return P&&(0,K.m)(P.next)&&(0,K.m)(P.error)&&(0,K.m)(P.complete)}(P)&&(0,O.Nn)(P)}(q)?q:new h.Hp(q,te,ge);return(0,J.x)(()=>{const{operator:j,source:z}=this;Q.add(j?j.call(Q,z):z?this._subscribe(Q):this._trySubscribe(Q))}),Q}_trySubscribe(q){try{return this._subscribe(q)}catch(te){q.error(te)}}forEach(q,te){return new(te=H(te))((ge,Q)=>{const j=new h.Hp({next:z=>{try{q(z)}catch(ue){Q(ue),j.unsubscribe()}},error:Q,complete:ge});this.subscribe(j)})}_subscribe(q){var te;return null===(te=this.source)||void 0===te?void 0:te.subscribe(q)}[N.L](){return this}pipe(...q){return(0,Z.U)(q)(this)}toPromise(q){return new(q=H(q))((te,ge)=>{let Q;this.subscribe(j=>Q=j,j=>ge(j),()=>te(Q))})}}return P.create=$=>new P($),P})();function H(P){var $;return null!==($=P??ie.v.Promise)&&void 0!==$?$:Promise}},7579:(Ue,Ie,M)=>{"use strict";M.d(Ie,{x:()=>J});var h=M(9751),O=M(727);const Z=(0,M(3888).d)(H=>function(){H(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=M(8737),K=M(2806);let J=(()=>{class H extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(R){const P=new L(this,this);return P.operator=R,P}_throwIfClosed(){if(this.closed)throw new Z}next(R){(0,K.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const P of this.currentObservers)P.next(R)}})}error(R){(0,K.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=R;const{observers:P}=this;for(;P.length;)P.shift().error(R)}})}complete(){(0,K.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:R}=this;for(;R.length;)R.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var R;return(null===(R=this.observers)||void 0===R?void 0:R.length)>0}_trySubscribe(R){return this._throwIfClosed(),super._trySubscribe(R)}_subscribe(R){return this._throwIfClosed(),this._checkFinalizedStatuses(R),this._innerSubscribe(R)}_innerSubscribe(R){const{hasError:P,isStopped:$,observers:q}=this;return P||$?O.Lc:(this.currentObservers=null,q.push(R),new O.w0(()=>{this.currentObservers=null,(0,ie.P)(q,R)}))}_checkFinalizedStatuses(R){const{hasError:P,thrownError:$,isStopped:q}=this;P?R.error($):q&&R.complete()}asObservable(){const R=new h.y;return R.source=this,R}}return H.create=(k,R)=>new L(k,R),H})();class L extends J{constructor(k,R){super(),this.destination=k,this.source=R}next(k){var R,P;null===(P=null===(R=this.destination)||void 0===R?void 0:R.next)||void 0===P||P.call(R,k)}error(k){var R,P;null===(P=null===(R=this.destination)||void 0===R?void 0:R.error)||void 0===P||P.call(R,k)}complete(){var k,R;null===(R=null===(k=this.destination)||void 0===k?void 0:k.complete)||void 0===R||R.call(k)}_subscribe(k){var R,P;return null!==(P=null===(R=this.source)||void 0===R?void 0:R.subscribe(k))&&void 0!==P?P:O.Lc}}},930:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Hp:()=>ge,Lv:()=>P});var h=M(576),O=M(727),N=M(2416),Z=M(7849),ie=M(5032);const K=H("C",void 0,void 0);function H(ne,se,oe){return{kind:ne,value:se,error:oe}}var k=M(3410),R=M(2806);class P extends O.w0{constructor(se){super(),this.isStopped=!1,se?(this.destination=se,(0,O.Nn)(se)&&se.add(this)):this.destination=ue}static create(se,oe,be){return new ge(se,oe,be)}next(se){this.isStopped?z(function L(ne){return H("N",ne,void 0)}(se),this):this._next(se)}error(se){this.isStopped?z(function J(ne){return H("E",void 0,ne)}(se),this):(this.isStopped=!0,this._error(se))}complete(){this.isStopped?z(K,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(se){this.destination.next(se)}_error(se){try{this.destination.error(se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $=Function.prototype.bind;function q(ne,se){return $.call(ne,se)}class te{constructor(se){this.partialObserver=se}next(se){const{partialObserver:oe}=this;if(oe.next)try{oe.next(se)}catch(be){Q(be)}}error(se){const{partialObserver:oe}=this;if(oe.error)try{oe.error(se)}catch(be){Q(be)}else Q(se)}complete(){const{partialObserver:se}=this;if(se.complete)try{se.complete()}catch(oe){Q(oe)}}}class ge extends P{constructor(se,oe,be){let ve;if(super(),(0,h.m)(se)||!se)ve={next:se??void 0,error:oe??void 0,complete:be??void 0};else{let W;this&&N.v.useDeprecatedNextContext?(W=Object.create(se),W.unsubscribe=()=>this.unsubscribe(),ve={next:se.next&&q(se.next,W),error:se.error&&q(se.error,W),complete:se.complete&&q(se.complete,W)}):ve=se}this.destination=new te(ve)}}function Q(ne){N.v.useDeprecatedSynchronousErrorHandling?(0,R.O)(ne):(0,Z.h)(ne)}function z(ne,se){const{onStoppedNotification:oe}=N.v;oe&&k.z.setTimeout(()=>oe(ne,se))}const ue={closed:!0,next:ie.Z,error:function j(ne){throw ne},complete:ie.Z}},727:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Lc:()=>K,w0:()=>ie,Nn:()=>J});var h=M(576);const N=(0,M(3888).d)(H=>function(R){H(this),this.message=R?`${R.length} errors occurred during unsubscription:\n${R.map((P,$)=>`${$+1}) ${P.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=R});var Z=M(8737);class ie{constructor(k){this.initialTeardown=k,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let k;if(!this.closed){this.closed=!0;const{_parentage:R}=this;if(R)if(this._parentage=null,Array.isArray(R))for(const q of R)q.remove(this);else R.remove(this);const{initialTeardown:P}=this;if((0,h.m)(P))try{P()}catch(q){k=q instanceof N?q.errors:[q]}const{_finalizers:$}=this;if($){this._finalizers=null;for(const q of $)try{L(q)}catch(te){k=k??[],te instanceof N?k=[...k,...te.errors]:k.push(te)}}if(k)throw new N(k)}}add(k){var R;if(k&&k!==this)if(this.closed)L(k);else{if(k instanceof ie){if(k.closed||k._hasParent(this))return;k._addParent(this)}(this._finalizers=null!==(R=this._finalizers)&&void 0!==R?R:[]).push(k)}}_hasParent(k){const{_parentage:R}=this;return R===k||Array.isArray(R)&&R.includes(k)}_addParent(k){const{_parentage:R}=this;this._parentage=Array.isArray(R)?(R.push(k),R):R?[R,k]:k}_removeParent(k){const{_parentage:R}=this;R===k?this._parentage=null:Array.isArray(R)&&(0,Z.P)(R,k)}remove(k){const{_finalizers:R}=this;R&&(0,Z.P)(R,k),k instanceof ie&&k._removeParent(this)}}ie.EMPTY=(()=>{const H=new ie;return H.closed=!0,H})();const K=ie.EMPTY;function J(H){return H instanceof ie||H&&"closed"in H&&(0,h.m)(H.remove)&&(0,h.m)(H.add)&&(0,h.m)(H.unsubscribe)}function L(H){(0,h.m)(H)?H():H.unsubscribe()}},2416:(Ue,Ie,M)=>{"use strict";M.d(Ie,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ue,Ie,M)=>{"use strict";M.d(Ie,{E:()=>O});const O=new(M(9751).y)(ie=>ie.complete())},8996:(Ue,Ie,M)=>{"use strict";M.d(Ie,{D:()=>se});var h=M(8421),O=M(5363),N=M(9468),K=M(9751),L=M(2202),H=M(576),k=M(9672);function P(oe,be){if(!oe)throw new Error("Iterable cannot be null");return new K.y(ve=>{(0,k.f)(ve,be,()=>{const W=oe[Symbol.asyncIterator]();(0,k.f)(ve,be,()=>{W.next().then(_e=>{_e.done?ve.complete():ve.next(_e.value)})},0,!0)})})}var $=M(3670),q=M(8239),te=M(1144),ge=M(6495),Q=M(2206),j=M(4532),z=M(3260);function se(oe,be){return be?function ne(oe,be){if(null!=oe){if((0,$.c)(oe))return function Z(oe,be){return(0,h.Xf)(oe).pipe((0,N.R)(be),(0,O.Q)(be))}(oe,be);if((0,te.z)(oe))return function J(oe,be){return new K.y(ve=>{let W=0;return be.schedule(function(){W===oe.length?ve.complete():(ve.next(oe[W++]),ve.closed||this.schedule())})})}(oe,be);if((0,q.t)(oe))return function ie(oe,be){return(0,h.Xf)(oe).pipe((0,N.R)(be),(0,O.Q)(be))}(oe,be);if((0,Q.D)(oe))return P(oe,be);if((0,ge.T)(oe))return function R(oe,be){return new K.y(ve=>{let W;return(0,k.f)(ve,be,()=>{W=oe[L.h](),(0,k.f)(ve,be,()=>{let _e,ce;try{({value:_e,done:ce}=W.next())}catch(Te){return void ve.error(Te)}ce?ve.complete():ve.next(_e)},0,!0)}),()=>(0,H.m)(W?.return)&&W.return()})}(oe,be);if((0,z.L)(oe))return function ue(oe,be){return P((0,z.Q)(oe),be)}(oe,be)}throw(0,j.z)(oe)}(oe,be):(0,h.Xf)(oe)}},8421:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Xf:()=>$});var h=M(655),O=M(1144),N=M(8239),Z=M(9751),ie=M(3670),K=M(2206),J=M(4532),L=M(6495),H=M(3260),k=M(576),R=M(7849),P=M(8822);function $(ne){if(ne instanceof Z.y)return ne;if(null!=ne){if((0,ie.c)(ne))return function q(ne){return new Z.y(se=>{const oe=ne[P.L]();if((0,k.m)(oe.subscribe))return oe.subscribe(se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ne);if((0,O.z)(ne))return function te(ne){return new Z.y(se=>{for(let oe=0;oe<ne.length&&!se.closed;oe++)se.next(ne[oe]);se.complete()})}(ne);if((0,N.t)(ne))return function ge(ne){return new Z.y(se=>{ne.then(oe=>{se.closed||(se.next(oe),se.complete())},oe=>se.error(oe)).then(null,R.h)})}(ne);if((0,K.D)(ne))return j(ne);if((0,L.T)(ne))return function Q(ne){return new Z.y(se=>{for(const oe of ne)if(se.next(oe),se.closed)return;se.complete()})}(ne);if((0,H.L)(ne))return function z(ne){return j((0,H.Q)(ne))}(ne)}throw(0,J.z)(ne)}function j(ne){return new Z.y(se=>{(function ue(ne,se){var oe,be,ve,W;return(0,h.mG)(this,void 0,void 0,function*(){try{for(oe=(0,h.KL)(ne);!(be=yield oe.next()).done;)if(se.next(be.value),se.closed)return}catch(_e){ve={error:_e}}finally{try{be&&!be.done&&(W=oe.return)&&(yield W.call(oe))}finally{if(ve)throw ve.error}}se.complete()})})(ne,se).catch(oe=>se.error(oe))})}},6451:(Ue,Ie,M)=>{"use strict";M.d(Ie,{T:()=>K});var h=M(8189),O=M(8421),N=M(515),Z=M(7669),ie=M(8996);function K(...J){const L=(0,Z.yG)(J),H=(0,Z._6)(J,1/0),k=J;return k.length?1===k.length?(0,O.Xf)(k[0]):(0,h.J)(H)((0,ie.D)(k,L)):N.E}},5403:(Ue,Ie,M)=>{"use strict";M.d(Ie,{x:()=>O});var h=M(930);function O(Z,ie,K,J,L){return new N(Z,ie,K,J,L)}class N extends h.Lv{constructor(ie,K,J,L,H,k){super(ie),this.onFinalize=H,this.shouldUnsubscribe=k,this._next=K?function(R){try{K(R)}catch(P){ie.error(P)}}:super._next,this._error=L?function(R){try{L(R)}catch(P){ie.error(P)}finally{this.unsubscribe()}}:super._error,this._complete=J?function(){try{J()}catch(R){ie.error(R)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:K}=this;super.unsubscribe(),!K&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Ue,Ie,M)=>{"use strict";M.d(Ie,{U:()=>N});var h=M(4482),O=M(5403);function N(Z,ie){return(0,h.e)((K,J)=>{let L=0;K.subscribe((0,O.x)(J,H=>{J.next(Z.call(ie,H,L++))}))})}},8189:(Ue,Ie,M)=>{"use strict";M.d(Ie,{J:()=>N});var h=M(5577),O=M(4671);function N(Z=1/0){return(0,h.z)(O.y,Z)}},5577:(Ue,Ie,M)=>{"use strict";M.d(Ie,{z:()=>L});var h=M(4004),O=M(8421),N=M(4482),Z=M(9672),ie=M(5403),J=M(576);function L(H,k,R=1/0){return(0,J.m)(k)?L((P,$)=>(0,h.U)((q,te)=>k(P,q,$,te))((0,O.Xf)(H(P,$))),R):("number"==typeof k&&(R=k),(0,N.e)((P,$)=>function K(H,k,R,P,$,q,te,ge){const Q=[];let j=0,z=0,ue=!1;const ne=()=>{ue&&!Q.length&&!j&&k.complete()},se=be=>j<P?oe(be):Q.push(be),oe=be=>{q&&k.next(be),j++;let ve=!1;(0,O.Xf)(R(be,z++)).subscribe((0,ie.x)(k,W=>{$?.(W),q?se(W):k.next(W)},()=>{ve=!0},void 0,()=>{if(ve)try{for(j--;Q.length&&j<P;){const W=Q.shift();te?(0,Z.f)(k,te,()=>oe(W)):oe(W)}ne()}catch(W){k.error(W)}}))};return H.subscribe((0,ie.x)(k,se,()=>{ue=!0,ne()})),()=>{ge?.()}}(P,$,H,R)))}},5363:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Q:()=>Z});var h=M(9672),O=M(4482),N=M(5403);function Z(ie,K=0){return(0,O.e)((J,L)=>{J.subscribe((0,N.x)(L,H=>(0,h.f)(L,ie,()=>L.next(H),K),()=>(0,h.f)(L,ie,()=>L.complete(),K),H=>(0,h.f)(L,ie,()=>L.error(H),K)))})}},3099:(Ue,Ie,M)=>{"use strict";M.d(Ie,{B:()=>ie});var h=M(8421),O=M(7579),N=M(930),Z=M(4482);function ie(J={}){const{connector:L=(()=>new O.x),resetOnError:H=!0,resetOnComplete:k=!0,resetOnRefCountZero:R=!0}=J;return P=>{let $,q,te,ge=0,Q=!1,j=!1;const z=()=>{q?.unsubscribe(),q=void 0},ue=()=>{z(),$=te=void 0,Q=j=!1},ne=()=>{const se=$;ue(),se?.unsubscribe()};return(0,Z.e)((se,oe)=>{ge++,!j&&!Q&&z();const be=te=te??L();oe.add(()=>{ge--,0===ge&&!j&&!Q&&(q=K(ne,R))}),be.subscribe(oe),!$&&ge>0&&($=new N.Hp({next:ve=>be.next(ve),error:ve=>{j=!0,z(),q=K(ue,H,ve),be.error(ve)},complete:()=>{Q=!0,z(),q=K(ue,k),be.complete()}}),(0,h.Xf)(se).subscribe($))})(P)}}function K(J,L,...H){if(!0===L)return void J();if(!1===L)return;const k=new N.Hp({next:()=>{k.unsubscribe(),J()}});return(0,h.Xf)(L(...H)).subscribe(k)}},9468:(Ue,Ie,M)=>{"use strict";M.d(Ie,{R:()=>O});var h=M(4482);function O(N,Z=0){return(0,h.e)((ie,K)=>{K.add(N.schedule(()=>ie.subscribe(K),Z))})}},8505:(Ue,Ie,M)=>{"use strict";M.d(Ie,{b:()=>ie});var h=M(576),O=M(4482),N=M(5403),Z=M(4671);function ie(K,J,L){const H=(0,h.m)(K)||J||L?{next:K,error:J,complete:L}:K;return H?(0,O.e)((k,R)=>{var P;null===(P=H.subscribe)||void 0===P||P.call(H);let $=!0;k.subscribe((0,N.x)(R,q=>{var te;null===(te=H.next)||void 0===te||te.call(H,q),R.next(q)},()=>{var q;$=!1,null===(q=H.complete)||void 0===q||q.call(H),R.complete()},q=>{var te;$=!1,null===(te=H.error)||void 0===te||te.call(H,q),R.error(q)},()=>{var q,te;$&&(null===(q=H.unsubscribe)||void 0===q||q.call(H)),null===(te=H.finalize)||void 0===te||te.call(H)}))}):Z.y}},4408:(Ue,Ie,M)=>{"use strict";M.d(Ie,{o:()=>ie});var h=M(727);class O extends h.w0{constructor(J,L){super()}schedule(J,L=0){return this}}const N={setInterval(K,J,...L){const{delegate:H}=N;return H?.setInterval?H.setInterval(K,J,...L):setInterval(K,J,...L)},clearInterval(K){const{delegate:J}=N;return(J?.clearInterval||clearInterval)(K)},delegate:void 0};var Z=M(8737);class ie extends O{constructor(J,L){super(J,L),this.scheduler=J,this.work=L,this.pending=!1}schedule(J,L=0){var H;if(this.closed)return this;this.state=J;const k=this.id,R=this.scheduler;return null!=k&&(this.id=this.recycleAsyncId(R,k,L)),this.pending=!0,this.delay=L,this.id=null!==(H=this.id)&&void 0!==H?H:this.requestAsyncId(R,this.id,L),this}requestAsyncId(J,L,H=0){return N.setInterval(J.flush.bind(J,this),H)}recycleAsyncId(J,L,H=0){if(null!=H&&this.delay===H&&!1===this.pending)return L;null!=L&&N.clearInterval(L)}execute(J,L){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const H=this._execute(J,L);if(H)return H;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(J,L){let k,H=!1;try{this.work(J)}catch(R){H=!0,k=R||new Error("Scheduled action threw falsy error")}if(H)return this.unsubscribe(),k}unsubscribe(){if(!this.closed){const{id:J,scheduler:L}=this,{actions:H}=L;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Z.P)(H,this),null!=J&&(this.id=this.recycleAsyncId(L,J,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ue,Ie,M)=>{"use strict";M.d(Ie,{v:()=>N});var h=M(6063);class O{constructor(ie,K=O.now){this.schedulerActionCtor=ie,this.now=K}schedule(ie,K=0,J){return new this.schedulerActionCtor(this,ie).schedule(J,K)}}O.now=h.l.now;class N extends O{constructor(ie,K=O.now){super(ie,K),this.actions=[],this._active=!1}flush(ie){const{actions:K}=this;if(this._active)return void K.push(ie);let J;this._active=!0;do{if(J=ie.execute(ie.state,ie.delay))break}while(ie=K.shift());if(this._active=!1,J){for(;ie=K.shift();)ie.unsubscribe();throw J}}}},4986:(Ue,Ie,M)=>{"use strict";M.d(Ie,{z:()=>N});var h=M(4408);const N=new(M(7565).v)(h.o)},6063:(Ue,Ie,M)=>{"use strict";M.d(Ie,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Ue,Ie,M)=>{"use strict";M.d(Ie,{z:()=>h});const h={setTimeout(O,N,...Z){const{delegate:ie}=h;return ie?.setTimeout?ie.setTimeout(O,N,...Z):setTimeout(O,N,...Z)},clearTimeout(O){const{delegate:N}=h;return(N?.clearTimeout||clearTimeout)(O)},delegate:void 0}},2202:(Ue,Ie,M)=>{"use strict";M.d(Ie,{h:()=>O});const O=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ue,Ie,M)=>{"use strict";M.d(Ie,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Ue,Ie,M)=>{"use strict";M.d(Ie,{_6:()=>K,jO:()=>Z,yG:()=>ie});var h=M(576);function N(J){return J[J.length-1]}function Z(J){return(0,h.m)(N(J))?J.pop():void 0}function ie(J){return function O(J){return J&&(0,h.m)(J.schedule)}(N(J))?J.pop():void 0}function K(J,L){return"number"==typeof N(J)?J.pop():L}},8737:(Ue,Ie,M)=>{"use strict";function h(O,N){if(O){const Z=O.indexOf(N);0<=Z&&O.splice(Z,1)}}M.d(Ie,{P:()=>h})},3888:(Ue,Ie,M)=>{"use strict";function h(O){const Z=O(ie=>{Error.call(ie),ie.stack=(new Error).stack});return Z.prototype=Object.create(Error.prototype),Z.prototype.constructor=Z,Z}M.d(Ie,{d:()=>h})},2806:(Ue,Ie,M)=>{"use strict";M.d(Ie,{O:()=>Z,x:()=>N});var h=M(2416);let O=null;function N(ie){if(h.v.useDeprecatedSynchronousErrorHandling){const K=!O;if(K&&(O={errorThrown:!1,error:null}),ie(),K){const{errorThrown:J,error:L}=O;if(O=null,J)throw L}}else ie()}function Z(ie){h.v.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=ie)}},9672:(Ue,Ie,M)=>{"use strict";function h(O,N,Z,ie=0,K=!1){const J=N.schedule(function(){Z(),K?O.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(O.add(J),!K)return J}M.d(Ie,{f:()=>h})},4671:(Ue,Ie,M)=>{"use strict";function h(O){return O}M.d(Ie,{y:()=>h})},1144:(Ue,Ie,M)=>{"use strict";M.d(Ie,{z:()=>h});const h=O=>O&&"number"==typeof O.length&&"function"!=typeof O},2206:(Ue,Ie,M)=>{"use strict";M.d(Ie,{D:()=>O});var h=M(576);function O(N){return Symbol.asyncIterator&&(0,h.m)(N?.[Symbol.asyncIterator])}},576:(Ue,Ie,M)=>{"use strict";function h(O){return"function"==typeof O}M.d(Ie,{m:()=>h})},3670:(Ue,Ie,M)=>{"use strict";M.d(Ie,{c:()=>N});var h=M(8822),O=M(576);function N(Z){return(0,O.m)(Z[h.L])}},6495:(Ue,Ie,M)=>{"use strict";M.d(Ie,{T:()=>N});var h=M(2202),O=M(576);function N(Z){return(0,O.m)(Z?.[h.h])}},8239:(Ue,Ie,M)=>{"use strict";M.d(Ie,{t:()=>O});var h=M(576);function O(N){return(0,h.m)(N?.then)}},3260:(Ue,Ie,M)=>{"use strict";M.d(Ie,{L:()=>Z,Q:()=>N});var h=M(655),O=M(576);function N(ie){return(0,h.FC)(this,arguments,function*(){const J=ie.getReader();try{for(;;){const{value:L,done:H}=yield(0,h.qq)(J.read());if(H)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(L)}}finally{J.releaseLock()}})}function Z(ie){return(0,O.m)(ie?.getReader)}},4482:(Ue,Ie,M)=>{"use strict";M.d(Ie,{A:()=>O,e:()=>N});var h=M(576);function O(Z){return(0,h.m)(Z?.lift)}function N(Z){return ie=>{if(O(ie))return ie.lift(function(K){try{return Z(K,this)}catch(J){this.error(J)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ue,Ie,M)=>{"use strict";function h(){}M.d(Ie,{Z:()=>h})},9635:(Ue,Ie,M)=>{"use strict";M.d(Ie,{U:()=>N,z:()=>O});var h=M(4671);function O(...Z){return N(Z)}function N(Z){return 0===Z.length?h.y:1===Z.length?Z[0]:function(K){return Z.reduce((J,L)=>L(J),K)}}},7849:(Ue,Ie,M)=>{"use strict";M.d(Ie,{h:()=>N});var h=M(2416),O=M(3410);function N(Z){O.z.setTimeout(()=>{const{onUnhandledError:ie}=h.v;if(!ie)throw Z;ie(Z)})}},4532:(Ue,Ie,M)=>{"use strict";function h(O){return new TypeError(`You provided ${null!==O&&"object"==typeof O?"an invalid object":`'${O}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(Ie,{z:()=>h})},655:(Ue,Ie,M)=>{"use strict";function Z(me,we){var Me={};for(var ke in me)Object.prototype.hasOwnProperty.call(me,ke)&&we.indexOf(ke)<0&&(Me[ke]=me[ke]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(ke=Object.getOwnPropertySymbols(me);de<ke.length;de++)we.indexOf(ke[de])<0&&Object.prototype.propertyIsEnumerable.call(me,ke[de])&&(Me[ke[de]]=me[ke[de]])}return Me}function P(me,we,Me,ke){return new(Me||(Me=Promise))(function(Ee,xe){function Ce(Pt){try{et(ke.next(Pt))}catch(We){xe(We)}}function bt(Pt){try{et(ke.throw(Pt))}catch(We){xe(We)}}function et(Pt){Pt.done?Ee(Pt.value):function de(Ee){return Ee instanceof Me?Ee:new Me(function(xe){xe(Ee)})}(Pt.value).then(Ce,bt)}et((ke=ke.apply(me,we||[])).next())})}function ne(me){return this instanceof ne?(this.v=me,this):new ne(me)}function se(me,we,Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ke=Me.apply(me,we||[]),Ee=[];return de={},xe("next"),xe("throw"),xe("return"),de[Symbol.asyncIterator]=function(){return this},de;function xe(St){ke[St]&&(de[St]=function(hn){return new Promise(function(Cn,pn){Ee.push([St,hn,Cn,pn])>1||Ce(St,hn)})})}function Ce(St,hn){try{!function bt(St){St.value instanceof ne?Promise.resolve(St.value.v).then(et,Pt):We(Ee[0][2],St)}(ke[St](hn))}catch(Cn){We(Ee[0][3],Cn)}}function et(St){Ce("next",St)}function Pt(St){Ce("throw",St)}function We(St,hn){St(hn),Ee.shift(),Ee.length&&Ce(Ee[0][0],Ee[0][1])}}function be(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,we=me[Symbol.asyncIterator];return we?we.call(me):(me=function ge(me){var we="function"==typeof Symbol&&Symbol.iterator,Me=we&&me[we],ke=0;if(Me)return Me.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&ke>=me.length&&(me=void 0),{value:me&&me[ke++],done:!me}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),Me={},ke("next"),ke("throw"),ke("return"),Me[Symbol.asyncIterator]=function(){return this},Me);function ke(Ee){Me[Ee]=me[Ee]&&function(xe){return new Promise(function(Ce,bt){!function de(Ee,xe,Ce,bt){Promise.resolve(bt).then(function(et){Ee({value:et,done:Ce})},xe)}(Ce,bt,(xe=me[Ee](xe)).done,xe.value)})}}}M.d(Ie,{FC:()=>se,KL:()=>be,_T:()=>Z,mG:()=>P,qq:()=>ne})},2480:()=>{},4650:(Ue,Ie,M)=>{"use strict";M.d(Ie,{$8M:()=>th,$WT:()=>tr,$Z:()=>bI,AFp:()=>kb,AaK:()=>L,CHM:()=>ic,CRH:()=>yb,CZH:()=>_r,CqO:()=>Jp,D6c:()=>YS,EJc:()=>Tl,EpF:()=>tC,F4k:()=>nC,FYo:()=>qm,FiY:()=>tl,GfV:()=>jc,Gpc:()=>R,JOm:()=>Ti,KtG:()=>Gd,LFG:()=>Qe,Lbi:()=>Pb,Lck:()=>eb,MAs:()=>fv,MMx:()=>nw,NdJ:()=>mv,O4$:()=>mo,OlP:()=>wn,P3R:()=>jD,PXZ:()=>BS,Q6J:()=>ml,QGY:()=>gv,Qsj:()=>Yt,R0b:()=>Rs,RDi:()=>Ks,Rgc:()=>ff,SBq:()=>Np,Sil:()=>bw,Suo:()=>i_,TTD:()=>Du,TgZ:()=>Xp,X6Q:()=>fu,XFs:()=>ot,Xpm:()=>Ta,Xts:()=>rI,Y36:()=>Ph,YKP:()=>au,YNc:()=>y0,Yjl:()=>Aa,Yz7:()=>We,Z0I:()=>pn,ZZ4:()=>Dd,_Bn:()=>JC,_UZ:()=>Wh,_Vd:()=>So,_c5:()=>bf,_uU:()=>$t,aQg:()=>kl,c2e:()=>vd,cJS:()=>hn,cg1:()=>kv,dDg:()=>Bb,dqk:()=>Tt,eFA:()=>Rw,ekj:()=>xv,eoX:()=>Dw,f3M:()=>st,g9A:()=>d_,h0i:()=>_a,hGG:()=>Uw,hij:()=>sd,iGM:()=>pd,ifc:()=>Qt,ip1:()=>Nb,jDz:()=>nb,kL8:()=>og,kcU:()=>Cr,lG2:()=>Sa,lqb:()=>cl,lri:()=>m_,n5z:()=>_c,oAB:()=>Fn,oxw:()=>uC,q4F:()=>uI,qLn:()=>Ah,qOj:()=>sv,qZA:()=>nd,rWj:()=>xw,s9C:()=>yv,sBO:()=>E_,s_b:()=>Cg,soG:()=>Dl,tb:()=>mf,tp0:()=>D,uIk:()=>lv,vHH:()=>Q,vpe:()=>to,wAp:()=>Mt,xp6:()=>yI,z2F:()=>Id,zSh:()=>$m,zs3:()=>Gc});var h=M(7579),O=M(727),N=M(9751),Z=M(6451),ie=M(3099);function K(s){for(let o in s)if(s[o]===K)return o;throw Error("Could not find renamed property on target object.")}function J(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function L(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(L).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function H(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const k=K({__forward_ref__:K});function R(s){return s.__forward_ref__=R,s.toString=function(){return L(this())},s}function P(s){return $(s)?s():s}function $(s){return"function"==typeof s&&s.hasOwnProperty(k)&&s.__forward_ref__===R}function q(s){return s&&!!s.\u0275providers}const ge="https://g.co/ng/security#xss";class Q extends Error{constructor(o,u){super(function j(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function z(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s,o){throw new Q(-201,!1)}function xe(s,o){null==s&&function Ce(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function We(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function hn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cn(s){return tn(s,Xn)||tn(s,gn)}function pn(s){return null!==Cn(s)}function tn(s,o){return s.hasOwnProperty(o)?s[o]:null}function ur(s){return s&&(s.hasOwnProperty(qr)||s.hasOwnProperty(Jn))?s[qr]:null}const Xn=K({\u0275prov:K}),qr=K({\u0275inj:K}),gn=K({ngInjectableDef:K}),Jn=K({ngInjectorDef:K});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let On;function In(s){const o=On;return On=s,o}function lr(s,o,u){const c=Cn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ot.Optional?null:void 0!==o?o:void be(L(s))}const Tt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),mn={},_n="__NG_DI_FLAG__",si="ngTempTokenPath",ms=/\n/gm,Ii="__source";let en;function wr(s){const o=en;return en=s,o}function oi(s,o=ot.Default){if(void 0===en)throw new Q(-203,!1);return null===en?lr(s,void 0,o):en.get(s,o&ot.Optional?null:void 0,o)}function Qe(s,o=ot.Default){return(function Gn(){return On}()||oi)(P(s),o)}function st(s,o=ot.Default){return Qe(s,At(o))}function At(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Nt(s){const o=[];for(let u=0;u<s.length;u++){const c=P(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Q(900,!1);let d,g=ot.Default;for(let v=0;v<c.length;v++){const I=c[v],b=ae(I);"number"==typeof b?-1===b?d=I.token:g|=b:d=I}o.push(Qe(d,g))}else o.push(Qe(c))}return o}function Vt(s,o){return s[_n]=o,s.prototype[_n]=o,s}function ae(s){return s[_n]}function Ve(s){return{toString:s}.toString()}var Se=(()=>((Se=Se||{})[Se.OnPush=0]="OnPush",Se[Se.Default=1]="Default",Se))(),Qt=(()=>{return(s=Qt||(Qt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Qt;var s})();const Sn={},Dt=[],Er=K({\u0275cmp:K}),Kt=K({\u0275dir:K}),cr=K({\u0275pipe:K}),Lo=K({\u0275mod:K}),Or=K({\u0275fac:K}),Da=K({__NG_ELEMENT_ID__:K});let Wf=0;function Ta(s){return Ve(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Se.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Qt.Emulated,id:"c"+Wf++,styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},g=s.dependencies,v=s.features;return d.inputs=zl(s.inputs,c),d.outputs=zl(s.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(Gl).filter(Ld):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(zn).filter(Ld):null,d})}function Gl(s){return nn(s)||dr(s)}function Ld(s){return null!==s}function Fn(s){return Ve(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function zl(s,o){if(null==s)return Sn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}const Sa=Ta;function Aa(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function nn(s){return s[Er]||null}function dr(s){return s[Kt]||null}function zn(s){return s[cr]||null}function tr(s){const o=nn(s)||dr(s)||zn(s);return null!==o&&o.standalone}function Fr(s,o){const u=s[Lo]||null;if(!u&&!0===o)throw new Error(`Type ${L(s)} does not have '\u0275mod' property.`);return u}function ai(s){return Array.isArray(s)&&"object"==typeof s[1]}function Vi(s){return Array.isArray(s)&&!0===s[1]}function Ra(s){return 0!=(4&s.flags)}function Bi(s){return s.componentOffset>-1}function Kl(s){return 1==(1&s.flags)}function ui(s){return null!==s.template}function Ma(s){return 0!=(256&s[2])}function lo(s,o){return s.hasOwnProperty(Or)?s[Or]:null}class co{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Du(){return $o}function $o(s){return s.type.prototype.ngOnChanges&&(s.setInput=Go),Tu}function Tu(){const s=ka(this),o=s?.current;if(o){const u=s.previous;if(u===Sn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Go(s,o,u,c){const d=this.declaredInputs[u],g=ka(s)||function jd(s,o){return s[ho]=o}(s,{previous:Sn,current:null}),v=g.current||(g.current={}),I=g.previous,b=I[d];v[d]=new co(b&&b.currentValue,o,I===Sn),s[c]=o}Du.ngInherit=!0;const ho="__ngSimpleChanges__";function ka(s){return s[ho]||null}function Wn(s){for(;Array.isArray(s);)s=s[0];return s}function fo(s,o){return Wn(o[s])}function rr(s,o){return Wn(o[s.index])}function qo(s,o){return s.data[o]}function Ir(s,o){const u=o[s];return ai(u)?u:u[0]}function Ko(s){return 64==(64&s[2])}function ws(s,o){return null==o?null:s[o]}function Fa(s){s[18]=0}function La(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Lt={lFrame:cy(null),bindingsEnabled:!0};function Nu(){return Lt.bindingsEnabled}function Be(){return Lt.lFrame.lView}function rn(){return Lt.lFrame.tView}function ic(s){return Lt.lFrame.contextLView=s,s[8]}function Gd(s){return Lt.lFrame.contextLView=null,s}function Nr(){let s=Ua();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ua(){return Lt.lFrame.currentTNode}function ci(s,o){const u=Lt.lFrame;u.currentTNode=s,u.isParent=o}function Pu(){return Lt.lFrame.isParent}function go(){return Lt.lFrame.bindingIndex++}function qd(s,o){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=s,ac(o)}function ac(s){Lt.lFrame.currentDirectiveIndex=s}function Kd(){return Lt.lFrame.currentQueryIndex}function uc(s){Lt.lFrame.currentQueryIndex=s}function Zd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Xf(s,o,u){if(u&ot.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&ot.Host||(d=Zd(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const c=Lt.lFrame=Jf();return c.currentTNode=o,c.lView=s,!0}function Lu(s){const o=Jf(),u=s[1];Lt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Jf(){const s=Lt.lFrame,o=null===s?null:s.child;return null===o?cy(s):o}function cy(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function am(){const s=Lt.lFrame;return Lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const lc=am;function um(){const s=am();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Qr(){return Lt.lFrame.selectedIndex}function Zo(s){Lt.lFrame.selectedIndex=s}function Rn(){const s=Lt.lFrame;return qo(s.tView,s.selectedIndex)}function mo(){Lt.lFrame.currentNamespace="svg"}function Cr(){!function ep(){Lt.lFrame.currentNamespace=null}()}function Ba(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:U}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),T&&((s.viewHooks||(s.viewHooks=[])).push(u,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,T)),null!=U&&(s.destroyHooks||(s.destroyHooks=[])).push(u,U)}}function _o(s,o,u){yo(s,o,3,u)}function Uu(s,o,u,c){(3&s[2])===u&&yo(s,o,u,c)}function es(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function yo(s,o,u,c){const g=c??-1,v=o.length-1;let I=0;for(let b=void 0!==c?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=c&&I>=c)break}else o[b]<0&&(s[18]+=65536),(I<g||-1==g)&&(tp(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function tp(s,o,u,c){const d=u[c]<0,g=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class Ha{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Un(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],v=u[c++],I=u[c++];s.setAttribute(o,v,I,g)}else{const g=d,v=u[++c];Yo(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function $s(s){return 3===s||4===s||6===s}function Yo(s){return 64===s.charCodeAt(0)}function Cs(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Qo(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Qo(s,o,u,c,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function fc(s){return-1!==s}function ja(s){return 32767&s}function Hu(s,o){let u=function Bu(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Gs=!0;function $a(s){const o=Gs;return Gs=s,o}let Ga=0;const fi={};function Eo(s,o){const u=$u(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Io(c.data,s),Io(o,null),Io(c.blueprint,null));const d=Gu(s,o),g=s.injectorIndex;if(fc(d)){const v=ja(d),I=Hu(d,o),b=I[1].data;for(let T=0;T<8;T++)o[g+T]=I[v+T]|b[v+T]}return o[g+8]=d,g}function Io(s,o){s.push(0,0,0,0,0,0,0,0,o)}function $u(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Gu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=eh(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function zu(s,o,u){!function ju(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Da)&&(c=u[Da]),null==c&&(c=u[Da]=Ga++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Co(s,o,u){if(u&ot.Optional||void 0!==s)return s;be()}function Wu(s,o,u,c){if(u&ot.Optional&&void 0===c&&(c=null),!(u&(ot.Self|ot.Host))){const d=s[9],g=In(void 0);try{return d?d.get(o,c,u&ot.Optional):lr(o,c,u&ot.Optional)}finally{In(g)}}return Co(c,0,u)}function qu(s,o,u,c=ot.Default,d){if(null!==s){if(1024&o[2]){const v=function yc(s,o,u,c,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=bs(g,v,u,c|ot.Self,fi);if(I!==fi)return I;let b=g.parent;if(!b){const T=v[21];if(T){const U=T.get(u,fi,c);if(U!==fi)return U}b=eh(v),v=v[15]}g=b}return d}(s,o,u,c,fi);if(v!==fi)return v}const g=bs(s,o,u,c,fi);if(g!==fi)return g}return Wu(o,u,c,d)}function bs(s,o,u,c,d){const g=function gc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Da)?s[Da]:void 0;return"number"==typeof o?o>=0?255&o:dm:o}(u);if("function"==typeof g){if(!Xf(o,s,c))return c&ot.Host?Co(d,0,c):Wu(o,u,c,d);try{const v=g(c);if(null!=v||c&ot.Optional)return v;be()}finally{lc()}}else if("number"==typeof g){let v=null,I=$u(s,o),b=-1,T=c&ot.Host?o[16][6]:null;for((-1===I||c&ot.SkipSelf)&&(b=-1===I?Gu(s,o):o[I+8],-1!==b&&ns(c,!1)?(v=o[1],I=ja(b),o=Hu(b,o)):I=-1);-1!==I;){const U=o[1];if(mc(g,I,U.data)){const Y=pc(I,o,u,v,c,T);if(Y!==fi)return Y}b=o[I+8],-1!==b&&ns(c,o[1].data[I+8]===T)&&mc(g,I,o)?(v=U,I=ja(b),o=Hu(b,o)):I=-1}}return d}function pc(s,o,u,c,d,g){const v=o[1],I=v.data[s+8],U=ea(I,v,u,null==c?Bi(I)&&Gs:c!=v&&0!=(3&I.type),d&ot.Host&&g===I);return null!==U?ts(o,v,U,I):fi}function ea(s,o,u,c,d){const g=s.providerIndexes,v=o.data,I=1048575&g,b=s.directiveStart,U=g>>20,he=d?I+U:s.directiveEnd;for(let De=c?I:I+U;De<he;De++){const $e=v[De];if(De<b&&u===$e||De>=b&&$e.type===u)return De}if(d){const De=v[b];if(De&&ui(De)&&De.type===u)return b}return null}function ts(s,o,u,c){let d=s[u];const g=o.data;if(function hi(s){return s instanceof Ha}(d)){const v=d;v.resolving&&function ne(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Q(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ue(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():z(s)}(g[u]));const I=$a(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?In(v.injectImpl):null;Xf(s,c,ot.Default);try{d=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function cm(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=$o(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==b&&In(b),$a(I),v.resolving=!1,lc()}}return d}function mc(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function ns(s,o){return!(s&ot.Self||s&ot.Host&&o)}class xi{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return qu(this._tNode,this._lView,o,At(c),u)}}function dm(){return new xi(Nr(),Be())}function _c(s){return Ve(()=>{const o=s.prototype.constructor,u=o[Or]||Ku(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Or]||Ku(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Ku(s){return $(s)?()=>{const o=Ku(P(s));return o&&o()}:lo(s)}function eh(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function th(s){return function Jd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if($s(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Nr(),s)}const Zu="__parameters__";function Wa(s,o,u){return Ve(()=>{const c=function nh(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(b,T,U){const Y=b.hasOwnProperty(Zu)?b[Zu]:Object.defineProperty(b,Zu,{value:[]})[Zu];for(;Y.length<=U;)Y.push(null);return(Y[U]=Y[U]||[]).push(v),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class wn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=We({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function is(s,o){s.forEach(u=>Array.isArray(u)?is(u,o):o(u))}function Xu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function qa(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Vr(s,o,u){let c=Zt(s,o);return c>=0?s[1|c]=u:(c=~c,function ip(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function el(s,o){const u=Zt(s,o);if(u>=0)return s[1|u]}function Zt(s,o){return function uh(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const tl=Vt(Wa("Optional"),8),D=Vt(Wa("SkipSelf"),4);var Ti=(()=>((Ti=Ti||{})[Ti.Important=1]="Important",Ti[Ti.DashCase=2]="DashCase",Ti))();const os=new Map;let vm=0;const pp="__ngContext__";function pi(s,o){ai(o)?(s[pp]=o[20],function YE(s){os.set(s[20],s)}(o)):s[pp]=o}function Za(s,o){return undefined(s,o)}function as(s){const o=s[3];return Vi(o)?o[3]:o}function Sc(s){return bm(s[13])}function Ac(s){return bm(s[4])}function bm(s){for(;null!==s&&!Vi(s);)s=s[4];return s}function xo(s,o,u,c,d){if(null!=c){let g,v=!1;Vi(c)?g=c:ai(c)&&(v=!0,c=c[0]);const I=Wn(c);0===s&&null!==u?null==d?Ja(o,u,I):Xa(o,u,I,d||null,!0):1===s&&null!==u?Xa(o,u,I,d||null,!0):2===s?function tu(s,o,u){const c=Ip(s,o);c&&function Ep(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function Mm(s,o,u,c,d){const g=u[7];g!==Wn(u)&&xo(o,s,c,g,d);for(let I=10;I<u.length;I++){const b=u[I];ua(b[1],b,s,o,c,g)}}(o,s,g,u,d)}}function Ya(s,o,u){return s.createElement(o,u)}function sa(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,La(d,-1)),u.splice(c,1)}function Qa(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&sa(d,c),o>0&&(s[u-1][4]=c[4]);const g=qa(s,10+o);!function QE(s,o){ua(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Rc(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&ua(s,o,u,3,null,null),function xm(s){let o=s[13];if(!o)return il(s[1],s);for(;o;){let u=null;if(ai(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)ai(o)&&il(o[1],o),o=o[3];null===o&&(o=s),ai(o)&&il(o[1],o),u=o&&o[4]}o=u}}(o)}}function il(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function wp(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Ha)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],b=g[v+1];try{b.call(I)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function Dm(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),g+=2}else{const v=c[d=u[g+1]];u[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&Vi(o[3])){u!==o[3]&&sa(u,o);const c=o[19];null!==c&&c.detachView(s)}!function Em(s){os.delete(s[20])}(o)}}function Mc(s,o,u){return function Tm(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===Qt.None||g===Qt.Emulated)return null}return rr(c,u)}}(s,o.parent,u)}function Xa(s,o,u,c,d){s.insertBefore(o,u,c,d)}function Ja(s,o,u){s.appendChild(o,u)}function Sm(s,o,u,c,d){null!==c?Xa(s,o,u,c,d):Ja(s,o,u)}function Ip(s,o){return s.parentNode(o)}let ol,ul,Cp=function Am(s,o,u){return 40&s.type?rr(s,u):null};function Nc(s,o,u,c){const d=Mc(s,c,o),g=o[11],I=function vh(s,o,u){return Cp(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)Sm(g,d,u[b],I,!1);else Sm(g,d,u,I,!1)}function oa(s,o){if(null!==o){const u=o.type;if(3&u)return rr(o,s);if(4&u)return Si(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return oa(s,c);{const d=s[o.index];return Vi(d)?Si(-1,d):Wn(d)}}if(32&u)return Za(o,s)()||Wn(s[o.index]);{const c=Rm(s,o);return null!==c?Array.isArray(c)?c[0]:oa(as(s[16]),c):oa(s,o.next)}}return null}function Rm(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Si(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return oa(c,d)}return o[7]}function aa(s,o,u,c,d,g,v){for(;null!=u;){const I=c[u.index],b=u.type;if(v&&0===o&&(I&&pi(Wn(I),c),u.flags|=2),32!=(32&u.flags))if(8&b)aa(s,o,u.child,c,d,g,!1),xo(o,s,d,I,g);else if(32&b){const T=Za(u,c);let U;for(;U=T();)xo(o,s,d,U,g);xo(o,s,d,I,g)}else 16&b?kc(s,o,c,u,d,g):xo(o,s,d,I,g);u=v?u.projectionNext:u.next}}function ua(s,o,u,c,d,g){aa(u,c,s.firstChild,o,d,g,!1)}function kc(s,o,u,c,d,g){const v=u[16],b=v[6].projection[c.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)xo(o,s,d,b[T],g);else aa(s,o,b,v[3],d,g,!0)}function qs(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function Nm(s,o,u){const{mergedAttrs:c,classes:d,styles:g}=u;null!==c&&Un(s,o,c),null!==d&&qs(s,o,d),null!==g&&function Dy(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function Ks(s){ol=s}function Fm(s){return function Ih(){if(void 0===ul&&(ul=null,Tt.trustedTypes))try{ul=Tt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ul}()?.createScriptURL(s)||s}class Dp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ge})`}}function E(s){return s instanceof Dp?s.changingThisBreaksApplicationSecurity:s}function A(s,o){const u=function V(s){return s instanceof Dp&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${ge})`)}return u===o}const bh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Dr=(()=>((Dr=Dr||{})[Dr.NONE=0]="NONE",Dr[Dr.HTML=1]="HTML",Dr[Dr.STYLE=2]="STYLE",Dr[Dr.SCRIPT=3]="SCRIPT",Dr[Dr.URL=4]="URL",Dr[Dr.RESOURCE_URL=5]="RESOURCE_URL",Dr))();function UD(s){const o=jm();return o?o.sanitize(Dr.URL,s)||"":A(s,"URL")?E(s):function Oc(s){return(s=String(s)).match(bh)?s:"unsafe:"+s}(z(s))}function VD(s){const o=jm();if(o)return Fm(o.sanitize(Dr.RESOURCE_URL,s)||"");if(A(s,"ResourceURL"))return Fm(E(s));throw new Q(904,!1)}function jD(s,o,u){return function XM(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?VD:UD}(o,u)(s)}function jm(){const s=Be();return s&&s[12]}const rI=new wn("ENVIRONMENT_INITIALIZER"),$D=new wn("INJECTOR",-1),iI=new wn("INJECTOR_DEF_TYPES");class GD{get(o,u=mn){if(u===mn){const c=new Error(`NullInjectorError: No provider for ${L(o)}!`);throw c.name="NullInjectorError",c}return u}}function ll(...s){return{\u0275providers:Ys(0,s),\u0275fromNgModule:!0}}function Ys(s,...o){const u=[],c=new Set;let d;return is(o,g=>{const v=g;Dh(v,u,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&sI(d,u),u}function sI(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];My(d,g=>{o.push(g)})}}function Dh(s,o,u,c){if(!(s=P(s)))return!1;let d=null,g=ur(s);const v=!g&&nn(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const b=s.ngModule;if(g=ur(b),!g)return!1;d=b}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of b)Dh(T,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let T;c.add(d);try{is(g.imports,U=>{Dh(U,o,u,c)&&(T||(T=[]),T.push(U))})}finally{}void 0!==T&&sI(T,o)}if(!I){const T=lo(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:Dt},{provide:iI,useValue:d,multi:!0},{provide:rI,useValue:()=>Qe(d),multi:!0})}const b=g.providers;null==b||I||My(b,U=>{o.push(U)})}}return d!==s&&void 0!==s.providers}function My(s,o){for(let u of s)q(u)&&(u=u.\u0275providers),Array.isArray(u)?My(u,o):o(u)}const oI=K({provide:String,useValue:K});function Ny(s){return null!==s&&"object"==typeof s&&oI in s}function Lc(s){return"function"==typeof s}const $m=new wn("Set Injector scope."),Gm={},Oy={};let Uc;function Do(){return void 0===Uc&&(Uc=new GD),Uc}class cl{}class jr extends cl{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wm(o,v=>this.processProvider(v)),this.records.set($D,ru(void 0,this)),d.has("environment")&&this.records.set(cl,ru(void 0,this));const g=this.records.get($m);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(iI.multi,Dt,ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=wr(this),c=In(void 0);try{return o()}finally{wr(u),In(c)}}get(o,u=mn,c=ot.Default){this.assertNotDestroyed(),c=At(c);const d=wr(this),g=In(void 0);try{if(!(c&ot.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function zm(s){return"function"==typeof s||"object"==typeof s&&s instanceof wn}(o)&&Cn(o);I=b&&this.injectableDefInScope(b)?ru(Mp(o),Gm):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&ot.Self?Do():this.parent).get(o,u=c&ot.Optional&&u===mn?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[si]=v[si]||[]).unshift(L(o)),d)throw v;return function re(s,o,u,c){const d=s[si];throw o[Ii]&&d.unshift(o[Ii]),s.message=function fe(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=L(o);if(Array.isArray(o))d=o.map(L).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):L(I)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(ms,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[si]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{In(g),wr(d)}}resolveInjectorInitializers(){const o=wr(this),u=In(void 0);try{const c=this.get(rI.multi,Dt,ot.Self);for(const d of c)d()}finally{wr(o),In(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(L(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(o){let u=Lc(o=P(o))?o:P(o&&o.provide);const c=function Tr(s){return Ny(s)?ru(void 0,s.useValue):ru(Sh(s),Gm)}(o);if(Lc(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=ru(void 0,Gm,!0),d.factory=()=>Nt(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Gm&&(u.value=Oy,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ji(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=P(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Mp(s){const o=Cn(s),u=null!==o?o.factory:lo(s);if(null!==u)return u;if(s instanceof wn)throw new Q(204,!1);if(s instanceof Function)return function aI(s){const o=s.length;if(o>0)throw function ta(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Q(204,!1);const u=function En(s){const o=s&&(s[Xn]||s[gn]);if(o){const u=function ii(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Q(204,!1)}function Sh(s,o,u){let c;if(Lc(s)){const d=P(s);return lo(d)||Mp(d)}if(Ny(s))c=()=>P(s.useValue);else if(function Th(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Nt(s.deps||[]));else if(function ky(s){return!(!s||!s.useExisting)}(s))c=()=>Qe(P(s.useExisting));else{const d=P(s&&(s.useClass||s.provide));if(!function To(s){return!!s.deps}(s))return lo(d)||Mp(d);c=()=>new d(...Nt(s.deps))}return c}function ru(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Wm(s,o){for(const u of s)Array.isArray(u)?Wm(u,o):u&&q(u)?Wm(u.\u0275providers,o):o(u)}class zD{}class la{}class WD{resolveComponentFactory(o){throw function Vc(s){const o=Error(`No component factory found for ${L(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let So=(()=>{class s{}return s.NULL=new WD,s})();function Fy(){return Hc(Nr(),Be())}function Hc(s,o){return new Np(rr(s,o))}let Np=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Fy,s})();function qD(s){return s instanceof Np?s.nativeElement:s}class qm{}let Yt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function kp(){const s=Be(),u=Ir(Nr().index,s);return(ai(u)?u:s)[11]}(),s})(),KD=(()=>{class s{}return s.\u0275prov=We({token:s,providedIn:"root",factory:()=>null}),s})();class jc{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const uI=new jc("15.1.5"),Ly={};function Km(s){return s.ngOriginalError}class Ah{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Km(o);for(;u&&Km(u);)u=Km(u);return u||null}}function ca(s){return s instanceof Function?s():s}function Mh(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const fI="ng-template";function $c(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==Mh(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function pI(s){return 4===s.type&&s.value!==fI}function Pp(s,o,u){return o===(4!==s.type||u?s.value:fI)}function Vy(s,o,u){let c=4;const d=s.attrs||[],g=function Qm(s){for(let o=0;o<s.length;o++)if($s(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!Pp(s,b,u)||""===b&&1===o.length){if(Ao(c))return!1;v=!0}}else{const T=8&c?b:o[++I];if(8&c&&null!==s.attrs){if(!$c(s.attrs,T,u)){if(Ao(c))return!1;v=!0}continue}const Y=Ym(8&c?"class":b,d,pI(s),u);if(-1===Y){if(Ao(c))return!1;v=!0;continue}if(""!==T){let he;he=Y>g?"":d[Y+1].toLowerCase();const De=8&c?he:null;if(De&&-1!==Mh(De,T,0)||2&c&&T!==he){if(Ao(c))return!1;v=!0}}}}else{if(!v&&!Ao(c)&&!Ao(b))return!1;if(v&&Ao(b))continue;v=!1,c=b|1&c}}return Ao(c)||v}function Ao(s){return 0==(1&s)}function Ym(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function XD(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Nh(s,o,u=!1){for(let c=0;c<o.length;c++)if(Vy(s,o[c],u))return!0;return!1}function Op(s,o){return s?":not("+o.trim()+")":o}function mI(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Ao(v)&&(o+=Op(g,d),d=""),c=v,g=g||!Ao(c);u++}return""!==d&&(o+=Op(g,d)),o}const qt={};function yI(s){Fp(rn(),Be(),Qr()+s,!1)}function Fp(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&_o(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Uu(o,g,0,u)}Zo(u)}function e0(s,o=null,u=null,c){const d=iT(s,o,u,c);return d.resolveInjectorInitializers(),d}function iT(s,o=null,u=null,c,d=new Set){const g=[u||Dt,ll(s)];return c=c||("object"==typeof s?void 0:L(s)),new jr(g,o||Do(),c||null,d)}let Gc=(()=>{class s{static create(u,c){if(Array.isArray(u))return e0({name:""},c,u,"");{const d=u.name??"";return e0({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=mn,s.NULL=new GD,s.\u0275prov=We({token:s,providedIn:"any",factory:()=>Qe($D)}),s.__NG_ELEMENT_ID__=-1,s})();function Ph(s,o=ot.Default){const u=Be();return null===u?Qe(s,o):qu(Nr(),u,P(s),o)}function bI(){throw new Error("invalid")}function xI(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const g=u[c+1];if(-1!==g){const v=s.data[g];uc(u[c]),v.contentQueries(2,o[g],g)}}}function o0(s,o,u,c,d,g,v,I,b,T,U){const Y=o.blueprint.slice();return Y[0]=d,Y[2]=76|c,(null!==U||s&&1024&s[2])&&(Y[2]|=1024),Fa(Y),Y[3]=Y[15]=s,Y[8]=u,Y[10]=v||s&&s[10],Y[11]=I||s&&s[11],Y[12]=b||s&&s[12]||null,Y[9]=T||s&&s[9]||null,Y[6]=g,Y[20]=function wm(){return vm++}(),Y[21]=U,Y[16]=2==o.type?s[16]:Y,Y}function Zc(s,o,u,c,d){let g=s.data[o];if(null===g)g=function Gy(s,o,u,c,d){const g=Ua(),v=Pu(),b=s.data[o]=function Oh(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(v?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(s,o,u,c,d),function Wd(){return Lt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const v=function ku(){const s=Lt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ci(g,!0),g}function a0(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function zy(s,o,u){Lu(o);try{const c=s.viewQuery;null!==c&&nv(1,c,u);const d=s.template;null!==d&&DI(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&xI(s,o),s.staticViewQueries&&nv(2,s.viewQuery,u);const g=s.components;null!==g&&function gT(s,o){for(let u=0;u<o.length;u++)ET(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,um()}}function Wy(s,o,u,c){const d=o[2];if(128!=(128&d)){Lu(o);try{Fa(o),function js(s){return Lt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&DI(s,o,u,2,c);const v=3==(3&d);if(v){const T=s.preOrderCheckHooks;null!==T&&_o(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Uu(o,T,0,null),es(o,0)}if(function sN(s){for(let o=Sc(s);null!==o;o=Ac(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c];512&d[2]||La(d[3],1),d[2]|=512}}}(o),function iN(s){for(let o=Sc(s);null!==o;o=Ac(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Ko(c)&&Wy(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&xI(s,o),v){const T=s.contentCheckHooks;null!==T&&_o(o,T)}else{const T=s.contentHooks;null!==T&&Uu(o,T,1),es(o,1)}!function fT(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Zo(~d);else{const g=d,v=u[++c],I=u[++c];qd(v,g),I(2,o[g])}}}finally{Zo(-1)}}(s,o);const I=s.components;null!==I&&function pT(s,o){for(let u=0;u<o.length;u++)ev(s,o[u])}(o,I);const b=s.viewQuery;if(null!==b&&nv(2,b,c),v){const T=s.viewCheckHooks;null!==T&&_o(o,T)}else{const T=s.viewHooks;null!==T&&Uu(o,T,2),es(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,La(o[3],-1))}finally{um()}}}function DI(s,o,u,c,d){const g=Qr(),v=2&c;try{Zo(-1),v&&o.length>22&&Fp(s,o,22,!1),u(c,d)}finally{Zo(g)}}function u0(s,o,u){if(Ra(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}function Hp(s,o,u){Nu()&&(function Qy(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;Bi(u)&&function vT(s,o,u){const c=rr(o,s),d=ha(u),g=s[10],v=Lh(s,o0(s,d,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=v}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||Eo(u,o),pi(c,o);const v=u.initialInputs;for(let I=d;I<g;I++){const b=s.data[I],T=ts(o,s,I,u);pi(T,o),null!==v&&OI(0,I-d,T,b,0,v),ui(b)&&(Ir(u.index,o)[8]=ts(o,s,I,u))}}(s,o,u,rr(u,o)),64==(64&u.flags)&&Xy(s,o,u))}function jp(s,o,u=rr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function ha(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=fl(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function fl(s,o,u,c,d,g,v,I,b,T){const U=22+c,Y=U+d,he=function TI(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:qt);return u}(U,Y),De="function"==typeof T?T():T;return he[1]={type:s,blueprint:he,template:u,queries:null,viewQuery:I,declTNode:o,data:he.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:De,incompleteFirstPass:!1}}function AI(s,o,u,c){const d=rv(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Wp(s).push(c,d.length-1))}function qy(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===c?RI(u,o,d,g):c.hasOwnProperty(d)&&RI(u,o,c[d],g)}return u}function RI(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function $i(s,o,u,c,d,g,v,I){const b=rr(o,u);let U,T=o.inputs;!I&&null!=T&&(U=T[c])?(pl(s,u,U,c,d),Bi(o)&&Ky(u,o.index)):3&o.type&&(c=function MI(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(b,c,d))}function Ky(s,o){const u=Ir(o,s);16&u[2]||(u[2]|=32)}function Yy(s,o,u,c){let d=!1;if(Nu()){const g=null===c?null:{"":-1},v=function PI(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];if(Nh(o,v.selectors,!1))if(c||(c=[]),ui(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),c0(s,o,I.length)}else c.unshift(v),c0(s,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(s,u);let I,b;null===v?I=b=null:[I,b]=v,null!==I&&(d=!0,Fh(s,o,u,I,g,b)),g&&function yT(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new Q(-301,!1);c.push(o[d],g)}}}(u,c,g)}return u.mergedAttrs=Cs(u.mergedAttrs,u.attrs),d}function Fh(s,o,u,c,d,g){for(let T=0;T<c.length;T++)zu(Eo(u,o),s,c[T].type);!function d0(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let T=0;T<c.length;T++){const U=c[T];U.providersResolver&&U.providersResolver(U)}let v=!1,I=!1,b=a0(s,o,c.length,null);for(let T=0;T<c.length;T++){const U=c[T];u.mergedAttrs=Cs(u.mergedAttrs,U.hostAttrs),Jy(s,u,o,b,U),$p(b,U,d),null!==U.contentQueries&&(u.flags|=4),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=64);const Y=U.type.prototype;!v&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!I&&(Y.ngOnChanges||Y.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),b++}!function l0(s,o,u){const d=o.directiveEnd,g=s.data,v=o.attrs,I=[];let b=null,T=null;for(let U=o.directiveStart;U<d;U++){const Y=g[U],he=u?u.get(Y):null,$e=he?he.outputs:null;b=qy(Y.inputs,U,b,he?he.inputs:null),T=qy(Y.outputs,U,T,$e);const Ye=null===b||null===v||pI(o)?null:rN(b,U,v);I.push(Ye)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=b,o.outputs=T}(s,u,g)}function Xy(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,v=function oc(){return Lt.lFrame.currentDirectiveIndex}();try{Zo(g);for(let I=c;I<d;I++){const b=s.data[I],T=o[I];ac(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&kI(b,T)}}finally{Zo(-1),ac(v)}}function kI(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function c0(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function $p(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ui(o)&&(u[""]=s)}}function Jy(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=lo(d.type)),v=new Ha(g,ui(d),Ph);s.blueprint[c]=v,u[c]=v,function mT(s,o,u,c,d){const g=d.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function _T(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(u,c,g)}}(s,o,c,a0(s,u,d.hostVars,qt),d)}function fa(s,o,u,c,d,g){const v=rr(s,o);!function Gp(s,o,u,c,d,g,v){if(null==g)s.removeAttribute(o,d,u);else{const I=null==v?z(g):v(g,c||"",d);s.setAttribute(o,d,I,u)}}(o[11],v,g,s.value,u,c,d)}function OI(s,o,u,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let b=0;b<v.length;){const T=v[b++],U=v[b++],Y=v[b++];null!==I?c.setInput(u,Y,T,U):u[U]=Y}}}function rN(s,o,u){let c=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const v=s[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){c.push(g,v[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function wT(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function ev(s,o){const u=Ir(o,s);if(Ko(u)){const c=u[1];48&u[2]?Wy(c,u,c.template,u[8]):u[5]>0&&tv(u)}}function tv(s){for(let c=Sc(s);null!==c;c=Ac(c))for(let d=10;d<c.length;d++){const g=c[d];if(Ko(g))if(512&g[2]){const v=g[1];Wy(v,g,v.template,g[8])}else g[5]>0&&tv(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Ir(u[c],s);Ko(d)&&d[5]>0&&tv(d)}}function ET(s,o){const u=Ir(o,s),c=u[1];(function IT(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),zy(c,u,u[8])}function Lh(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function ls(s){for(;s;){s[2]|=32;const o=as(s);if(Ma(s)&&!o)return s;s=o}return null}function zp(s,o,u,c=!0){const d=o[10];d.begin&&d.begin();try{Wy(s,o,s.template,u)}catch(v){throw c&&LI(o,v),v}finally{d.end&&d.end()}}function nv(s,o,u){uc(0),o(s,u)}function rv(s){return s[7]||(s[7]=[])}function Wp(s){return s.cleanup||(s.cleanup=[])}function LI(s,o){const u=s[9],c=u?u.get(Ah,null):null;c&&c.handleError(o)}function pl(s,o,u,c,d){for(let g=0;g<u.length;){const v=u[g++],I=u[g++],b=o[v],T=s.data[v];null!==T.setInput?T.setInput(b,d,c,I):b[I]=d}}function f0(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=H(d,I):2==g&&(c=H(c,I+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function p0(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(Wn(g)),Vi(g))for(let I=10;I<g.length;I++){const b=g[I],T=b[1].firstChild;null!==T&&p0(b[1],b,T,c)}const v=u.type;if(8&v)p0(s,o,u.child,c);else if(32&v){const I=Za(u,o);let b;for(;b=I();)c.push(b)}else if(16&v){const I=Rm(o,u);if(Array.isArray(I))c.push(...I);else{const b=as(o[16]);p0(b[1],b,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class su{get rootNodes(){const o=this._lView,u=o[1];return p0(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Vi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Qa(o,c),qa(u,c))}this._attachedToViewContainer=!1}Rc(this._lView[1],this._lView)}onDestroy(o){AI(this._lView[1],this._lView,null,o)}markForCheck(){ls(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){zp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vp(s,o){ua(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=o}}class qp extends su{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;zp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class UI extends So{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=nn(o);return new Kp(u,this.ngModule)}}function VI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class bT{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=At(c);const d=this.injector.get(o,Ly,c);return d!==Ly||u===Ly?d:this.parentInjector.get(o,u,c)}}class Kp extends la{get inputs(){return VI(this.componentDef.inputs)}get outputs(){return VI(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function _I(s){return s.map(mI).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof cl?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new bT(o,g):o,I=v.get(qm,null);if(null===I)throw new Q(407,!1);const b=v.get(KD,null),T=I.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",Y=c?function SI(s,o,u){return s.selectRootElement(o,u===Qt.ShadowDom)}(T,c,this.componentDef.encapsulation):Ya(T,U,function CT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(U)),he=this.componentDef.onPush?288:272,De=fl(0,null,null,1,0,null,null,null,null,null),$e=o0(null,De,null,he,null,null,I,T,b,v,null);let Ye,rt;Lu($e);try{const dt=this.componentDef;let Ot,qe=null;dt.findHostDirectiveDefs?(Ot=[],qe=new Map,dt.findHostDirectiveDefs(dt,Ot,qe),Ot.push(dt)):Ot=[dt];const Gt=function DT(s,o){const u=s[1];return s[22]=o,Zc(u,22,2,"#host",null)}($e,Y),Kn=function iv(s,o,u,c,d,g,v,I){const b=d[1];!function g0(s,o,u,c){for(const d of s)o.mergedAttrs=Cs(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(f0(o,o.mergedAttrs,!0),null!==u&&Nm(c,u,o))}(c,s,o,v);const T=g.createRenderer(o,u),U=o0(d,ha(u),null,u.onPush?32:16,d[s.index],s,g,T,I||null,null,null);return b.firstCreatePass&&c0(b,s,c.length-1),Lh(d,U),d[s.index]=U}(Gt,Y,dt,Ot,$e,I,T);rt=qo(De,22),Y&&function TT(s,o,u,c){if(c)Un(s,u,["ng-version",uI.full]);else{const{attrs:d,classes:g}=function JD(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!Ao(d))break;d=g}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&Un(s,u,d),g&&g.length>0&&qs(s,u,g.join(" "))}}(T,dt,Y,c),void 0!==u&&function ST(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];c.push(null!=g?Array.from(g):null)}}(rt,this.ngContentSelectors,u),Ye=function Uh(s,o,u,c,d,g){const v=Nr(),I=d[1],b=rr(v,d);Fh(I,d,v,u,null,c);for(let U=0;U<u.length;U++)pi(ts(d,I,v.directiveStart+U,v),d);Xy(I,d,v),b&&pi(b,d);const T=ts(d,I,v.directiveStart+v.componentOffset,v);if(s[8]=d[8]=T,null!==g)for(const U of g)U(T,o);return u0(I,v,s),T}(Kn,dt,Ot,qe,$e,[AT]),zy(De,$e,null)}finally{um()}return new xT(this.componentType,Ye,Hc(rt,$e),$e,rt)}}class xT extends zD{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new qp(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;pl(g[1],g,d,o,u),Ky(g,this._tNode.index)}}get injector(){return new xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function AT(){const s=Nr();Ba(Be()[1],s)}function sv(s){let o=function BI(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(ui(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Q(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=ov(s.inputs),v.declaredInputs=ov(s.declaredInputs),v.outputs=ov(s.outputs);const I=d.hostBindings;I&&HI(s,I);const b=d.viewQuery,T=d.contentQueries;if(b&&MT(s,b),T&&NT(s,T),J(s.inputs,d.inputs),J(s.declaredInputs,d.declaredInputs),J(s.outputs,d.outputs),ui(d)&&d.data.animation){const U=s.data;U.animation=(U.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(s),I===sv&&(u=!1)}}o=Object.getPrototypeOf(o)}!function RT(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Cs(d.hostAttrs,u=Cs(u,d.hostAttrs))}}(c)}function ov(s){return s===Sn?{}:s===Dt?[]:s}function MT(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function NT(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function HI(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let Yc=null;function gl(){if(!Yc){const s=Tt.Symbol;if(s&&s.iterator)Yc=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Yc=c)}}}return Yc}function Qc(s){return!!Xc(s)&&(Array.isArray(s)||!(s instanceof Map)&&gl()in s)}function Xc(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ai(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function lv(s,o,u,c){const d=Be();return Ai(d,go(),o)&&(rn(),fa(Rn(),d,s,o,u,c)),lv}function Bh(s,o,u,c){return Ai(s,go(),u)?o+z(u)+c:qt}function y0(s,o,u,c,d,g,v,I){const b=Be(),T=rn(),U=s+22,Y=T.firstCreatePass?function XI(s,o,u,c,d,g,v,I,b){const T=o.consts,U=Zc(o,s,4,v||null,ws(T,I));Yy(o,u,U,ws(T,b)),Ba(o,U);const Y=U.tViews=fl(2,U,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,U),Y.queries=o.queries.embeddedTView(U)),U}(U,T,b,o,u,c,d,g,v):T.data[U];ci(Y,!1);const he=b[11].createComment("");Nc(T,b,he,Y),pi(he,b),Lh(b,b[U]=wT(he,b,he,Y)),Kl(Y)&&Hp(T,b,Y),null!=v&&jp(b,Y,I)}function fv(s){return function po(s,o){return s[o]}(function zd(){return Lt.lFrame.contextLView}(),22+s)}function ml(s,o,u){const c=Be();return Ai(c,go(),o)&&$i(rn(),Rn(),c,s,o,c[11],u,!1),ml}function Qp(s,o,u,c,d){const v=d?"class":"style";pl(s,u,o.inputs[v],v,c)}function Xp(s,o,u,c){const d=Be(),g=rn(),v=22+s,I=d[11],b=d[v]=Ya(I,o,function lm(){return Lt.lFrame.currentNamespace}()),T=g.firstCreatePass?function VT(s,o,u,c,d,g,v){const I=o.consts,T=Zc(o,s,2,d,ws(I,g));return Yy(o,u,T,ws(I,v)),null!==T.attrs&&f0(T,T.attrs,!1),null!==T.mergedAttrs&&f0(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(v,g,d,0,o,u,c):g.data[v];return ci(T,!0),Nm(I,b,T),32!=(32&T.flags)&&Nc(g,d,b,T),0===function Mu(){return Lt.lFrame.elementDepthCount}()&&pi(b,d),function tc(){Lt.lFrame.elementDepthCount++}(),Kl(T)&&(Hp(g,d,T),u0(g,T,d)),null!==c&&jp(d,T),Xp}function nd(){let s=Nr();Pu()?function Ou(){Lt.lFrame.isParent=!1}():(s=s.parent,ci(s,!1));const o=s;!function nc(){Lt.lFrame.elementDepthCount--}();const u=rn();return u.firstCreatePass&&(Ba(u,s),Ra(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Xd(s){return 0!=(8&s.flags)}(o)&&Qp(u,o,Be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Vu(s){return 0!=(16&s.flags)}(o)&&Qp(u,o,Be(),o.stylesWithoutHost,!1),nd}function Wh(s,o,u,c){return Xp(s,o,u,c),nd(),Wh}function tC(){return Be()}function gv(s){return!!s&&"function"==typeof s.then}function nC(s){return!!s&&"function"==typeof s.subscribe}const Jp=nC;function mv(s,o,u,c){const d=Be(),g=rn(),v=Nr();return function sC(s,o,u,c,d,g,v){const I=Kl(c),T=s.firstCreatePass&&Wp(s),U=o[8],Y=rv(o);let he=!0;if(3&c.type||v){const Ye=rr(c,o),rt=v?v(Ye):Ye,dt=Y.length,Ot=v?Gt=>v(Wn(Gt[c.index])):c.index;let qe=null;if(!v&&I&&(qe=function iC(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===c){const I=o[7],b=d[g+2];return I.length>b?I[b]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,c.index)),null!==qe)(qe.__ngLastListenerFn__||qe).__ngNextListenerFn__=g,qe.__ngLastListenerFn__=g,he=!1;else{g=aC(c,o,U,g,!1);const Gt=u.listen(rt,d,g);Y.push(g,Gt),T&&T.push(d,Ot,dt,dt+1)}}else g=aC(c,o,U,g,!1);const De=c.outputs;let $e;if(he&&null!==De&&($e=De[d])){const Ye=$e.length;if(Ye)for(let rt=0;rt<Ye;rt+=2){const Kn=o[$e[rt]][$e[rt+1]].subscribe(g),Xt=Y.length;Y.push(g,Kn),T&&T.push(d,c.index,Xt,-(Xt+1))}}}(g,d,d[11],v,s,o,c),mv}function oC(s,o,u,c){try{return!1!==u(c)}catch(d){return LI(s,d),!1}}function aC(s,o,u,c,d){return function g(v){if(v===Function)return c;ls(s.componentOffset>-1?Ir(s.index,o):o);let b=oC(o,0,c,v),T=g.__ngNextListenerFn__;for(;T;)b=oC(o,0,T,v)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function uC(s=1){return function dy(s){return(Lt.lFrame.contextLView=function Yd(s,o){for(;s>0;)o=o[15],s--;return o}(s,Lt.lFrame.contextLView))[8]}(s)}function yv(s,o,u){return vv(s,"",o,"",u),yv}function vv(s,o,u,c,d){const g=Be(),v=Bh(g,o,u,c);return v!==qt&&$i(rn(),Rn(),g,s,v,g[11],d,!1),vv}function eg(s,o){return s<<17|o<<2}function cs(s){return s>>17&32767}function cC(s){return 2|s}function qh(s){return(131068&s)>>2}function E0(s,o){return-131069&s|o<<2}function tg(s){return 1|s}function fC(s,o,u,c,d){const g=s[u+1],v=null===o;let I=c?cs(g):qh(g),b=!1;for(;0!==I&&(!1===b||v);){const U=s[I+1];cN(s[I],o)&&(b=!0,s[I+1]=c?tg(U):cC(U)),I=c?cs(U):qh(U)}b&&(s[u+1]=c?cC(g):tg(g))}function cN(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Zt(s,o)>=0}function xv(s,o){return function Xs(s,o,u,c){const d=Be(),g=rn(),v=function Ji(s){const o=Lt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function yn(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[Qr()],v=function I0(s,o){return o>=s.expandoStartIndex}(s,u);(function C0(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!v&&(o=!1),o=function Tv(s,o,u,c){const d=function Es(s){const o=Lt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=id(u=IC(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=IC(d,s,o,u,c),null===g){let b=function EC(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==qh(c))return s[cs(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=IC(null,s,o,b[1],c),b=id(b,o.attrs,c),function ZT(s,o,u,c){s[cs(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else g=function Gr(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=id(c,s[g].hostAttrs,u);return id(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function zT(s,o,u,c,d,g){let v=g?o.classBindings:o.styleBindings,I=cs(v),b=qh(v);s[c]=u;let U,T=!1;if(Array.isArray(u)?(U=u[1],(null===U||Zt(u,U)>0)&&(T=!0)):U=u,d)if(0!==b){const he=cs(s[I+1]);s[c+1]=eg(he,I),0!==he&&(s[he+1]=E0(s[he+1],c)),s[I+1]=function GT(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=eg(I,0),0!==I&&(s[I+1]=E0(s[I+1],c)),I=c;else s[c+1]=eg(b,0),0===I?I=c:s[b+1]=E0(s[b+1],c),b=c;T&&(s[c+1]=cC(s[c+1])),fC(s,U,c,!0),fC(s,U,c,!1),function hC(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Zt(g,o)>=0&&(u[c+1]=tg(u[c+1]))}(o,U,s,c,g),v=eg(I,b),g?o.classBindings=v:o.styleBindings=v}(d,g,o,u,v,c)}}(g,s,v,c),o!==qt&&Ai(d,v,o)&&function G(s,o,u,c,d,g,v,I){if(!(3&o.type))return;const b=s.data,T=b[I+1],U=function dC(s){return 1==(1&s)}(T)?CC(b,o,u,d,qh(T),v):void 0;eo(U)||(eo(g)||function Iv(s){return 2==(2&s)}(T)&&(g=CC(b,null,u,d,I,v)),function xy(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:Ti.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Ti.Important),s.setStyle(u,c,d,g))}}(c,v,fo(Qr(),u),d,g))}(g,g.data[Qr()],d,d[11],s,d[v+1]=function yt(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=L(E(s)))),s}(o,u),c,v)}(s,o,null,!0),xv}function IC(s,o,u,c,d){let g=null;const v=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<v&&(g=o[I],c=id(c,g.hostAttrs,d),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function id(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Vr(s,v,!!u||o[++g]))}return void 0===s?null:s}function CC(s,o,u,c,d,g){const v=null===o;let I;for(;d>0;){const b=s[d],T=Array.isArray(b),U=T?b[1]:b,Y=null===U;let he=u[d+1];he===qt&&(he=Y?Dt:void 0);let De=Y?el(he,c):U===c?he:void 0;if(T&&!eo(De)&&(De=el(b,c)),eo(De)&&(I=De,v))return I;const $e=s[d+1];d=v?cs($e):qh($e)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(I=el(b,c))}return I}function eo(s){return void 0!==s}function $t(s,o=""){const u=Be(),c=rn(),d=s+22,g=c.firstCreatePass?Zc(c,d,1,o,null):c.data[d],v=u[d]=function _h(s,o){return s.createText(o)}(u[11],o);Nc(c,u,v,g),ci(g,!1)}function sd(s,o,u){const c=Be(),d=Bh(c,s,o,u);return d!==qt&&function Ss(s,o,u){const c=fo(o,s);!function _p(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,Qr(),d),sd}const yl=void 0;var sg=["en",[["a","p"],["AM","PM"],yl],[["AM","PM"],yl,yl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yl,"{1} 'at' {0}",yl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eS(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Xh={};function kv(s){const o=function OC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=k0(o);if(u)return u;const c=o.split("-")[0];if(u=k0(c),u)return u;if("en"===c)return sg;throw new Q(701,!1)}function og(s){return kv(s)[Mt.PluralCase]}function k0(s){return s in Xh||(Xh[s]=Tt.ng&&Tt.ng.common&&Tt.ng.common.locales&&Tt.ng.common.locales[s]),Xh[s]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const vl="en-US";let Fv=vl;function sf(s,o,u,c,d){if(s=P(s),Array.isArray(s))for(let g=0;g<s.length;g++)sf(s[g],o,u,c,d);else{const g=rn(),v=Be();let I=Lc(s)?s:P(s.provide),b=Sh(s);const T=Nr(),U=1048575&T.providerIndexes,Y=T.directiveStart,he=T.providerIndexes>>20;if(Lc(s)||!s.multi){const De=new Ha(b,d,Ph),$e=Jv(I,o,d?U:U+he,Y);-1===$e?(zu(Eo(T,v),g,I),dd(g,s,o.length),o.push(I),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),u.push(De),v.push(De)):(u[$e]=De,v[$e]=De)}else{const De=Jv(I,o,U+he,Y),$e=Jv(I,o,U,U+he),rt=$e>=0&&u[$e];if(d&&!rt||!d&&!(De>=0&&u[De])){zu(Eo(T,v),g,I);const dt=function pS(s,o,u,c,d){const g=new Ha(s,u,Ph);return g.multi=[],g.index=o,g.componentProviders=0,af(g,d,c&&!u),g}(d?fS:XC,u.length,d,c,b);!d&&rt&&(u[$e].providerFactory=dt),dd(g,s,o.length,0),o.push(I),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),u.push(dt),v.push(dt)}else dd(g,s,De>-1?De:$e,af(u[d?$e:De],b,!d&&c));!d&&c&&rt&&u[$e].componentProviders++}}}function dd(s,o,u,c){const d=Lc(o),g=function Py(s){return!!s.useClass}(o);if(d||g){const b=(g?P(o.useClass):o).prototype.ngOnDestroy;if(b){const T=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const U=T.indexOf(u);-1===U?T.push(u,[c,b]):T[U+1].push(c,b)}else T.push(u,b)}}}function af(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Jv(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function XC(s,o,u,c){return ew(this.multi,[])}function fS(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=ts(u,u[1],this.providerFactory.index,c);g=I.slice(0,v),ew(d,g);for(let b=v;b<I.length;b++)g.push(I[b])}else g=[],ew(d,g);return g}function ew(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function JC(s,o=[]){return u=>{u.providersResolver=(c,d)=>function qn(s,o,u){const c=rn();if(c.firstCreatePass){const d=ui(s);sf(u,c.data,c.blueprint,d,!0),sf(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class _a{}class au{}function eb(s,o){return new tw(s,o??null)}class tw extends _a{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UI(this);const c=Fr(o);this._bootstrapComponents=ca(c.bootstrap),this._r3Injector=iT(o,u,[{provide:_a,useValue:this},{provide:So,useValue:this.componentFactoryResolver}],L(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Il extends au{constructor(o){super(),this.moduleType=o}create(o){return new tw(this.moduleType,o)}}class mS extends _a{constructor(o,u,c){super(),this.componentFactoryResolver=new UI(this),this.instance=null;const d=new jr([...o,{provide:_a,useValue:this},{provide:So,useValue:this.componentFactoryResolver}],u||Do(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function nw(s,o,u=null){return new mS(s,o,u).injector}let tb=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Ys(0,u.type),d=c.length>0?nw([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=We({token:s,providedIn:"environment",factory:()=>new s(Qe(cl))}),s})();function nb(s){s.getStandaloneInjector=o=>o.get(tb).getOrCreateStandaloneInjector(s)}function Eg(s){return o=>{setTimeout(s,void 0,o)}}const to=class hb extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),v=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),g=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(g=Eg(g),d&&(d=Eg(d)),v&&(v=Eg(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof O.w0&&o.add(I),I}};function fb(){return this._results[gl()]()}class hf{get changes(){return this._changes||(this._changes=new to)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=gl(),c=hf.prototype;c[u]||(c[u]=fb)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function Xr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function ah(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ff=(()=>{class s{}return s.__NG_ELEMENT_ID__=gb,s})();const pb=ff,hd=class extends pb{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=o0(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),zy(c,d,o),new su(d)}};function gb(){return Ig(Nr(),Be())}function Ig(s,o){return 4&s.type?new hd(o,s,Hc(s,o)):null}let Cg=(()=>{class s{}return s.__NG_ELEMENT_ID__=mb,s})();function mb(){return fd(Nr(),Be())}const e_=Cg,ds=class extends e_{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Hc(this._hostTNode,this._hostLView)}get injector(){return new xi(this._hostTNode,this._hostLView)}get parentInjector(){const o=Gu(this._hostTNode,this._hostLView);if(fc(o)){const u=Hu(o,this._hostLView),c=ja(o);return new xi(u[1].data[c+8],u)}return new xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=hw(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(u||{},g);return this.insert(v,d),v}createComponent(o,u,c,d,g){const v=o&&!function Qu(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const Y=u||{};I=Y.index,c=Y.injector,d=Y.projectableNodes,g=Y.environmentInjector||Y.ngModuleRef}const b=v?o:new Kp(nn(o)),T=c||this.parentInjector;if(!g&&null==b.ngModule){const he=(v?T:this.parentInjector).get(cl,null);he&&(g=he)}const U=b.create(T,d,void 0,g);return this.insert(U.hostView,I),U}insert(o,u){const c=o._lView,d=c[1];if(function Au(s){return Vi(s[3])}(c)){const U=this.indexOf(o);if(-1!==U)this.detach(U);else{const Y=c[3],he=new ds(Y,Y[6],Y[3]);he.detach(he.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function rl(s,o,u,c){const d=10+c,g=u.length;c>0&&(u[d-1][4]=o),c<g-10?(o[4]=u[d],Xu(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function yh(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,c,v,g);const I=Si(g,v),b=c[11],T=Ip(b,v[7]);return null!==T&&function XE(s,o,u,c,d,g){c[0]=d,c[6]=o,ua(s,c,u,1,d,g)}(d,v[6],b,c,T,I),o.attachToViewContainerRef(),Xu(t_(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=hw(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Qa(this._lContainer,u);c&&(qa(t_(this._lContainer),u),Rc(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Qa(this._lContainer,u);return c&&null!=qa(t_(this._lContainer),u)?new su(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function hw(s){return s[8]}function t_(s){return s[8]||(s[8]=[])}function fd(s,o){let u;const c=o[s.index];if(Vi(c))u=c;else{let d;if(8&s.type)d=Wn(c);else{const g=o[11];d=g.createComment("");const v=rr(s,o);Xa(g,Ip(g,v),d,function by(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=u=wT(c,o,d,s),Lh(o,u)}return new ds(u,s,o)}class fw{constructor(o){this.queryList=o,this.matches=null}clone(){return new fw(this.queryList)}setDirty(){this.queryList.setDirty()}}class pw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new pw(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==ut(o,u).matches&&this.queries[u].setDirty()}}class n_{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class gw{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new gw(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class mw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new mw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,_b(u,g)),this.matchTNodeWithReadOption(o,u,ea(u,o,g,!1,!1))}else c===ff?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,ea(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Np||d===Cg||d===ff&&4&u.type)this.addMatch(u.index,-2);else{const g=ea(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function _b(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function r_(s,o,u,c){return-1===u?function xS(s,o){return 11&s.type?Hc(s,o):4&s.type?Ig(s,o):null}(o,s):-2===u?function DS(s,o,u){return u===Np?Hc(o,s):u===ff?Ig(o,s):u===Cg?fd(o,s):void 0}(s,o,c):ts(s,s[1],u,o)}function _w(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const g=s.data,v=u.matches,I=[];for(let b=0;b<v.length;b+=2){const T=v[b];I.push(T<0?null:r_(o,g[T],v[b+1],u.metadata.read))}d.matches=I}return d.matches}function kr(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=_w(s,o,d,u);for(let I=0;I<g.length;I+=2){const b=g[I];if(b>0)c.push(v[I/2]);else{const T=g[I+1],U=o[-b];for(let Y=10;Y<U.length;Y++){const he=U[Y];he[17]===he[3]&&kr(he[1],he,T,c)}if(null!==U[9]){const Y=U[9];for(let he=0;he<Y.length;he++){const De=Y[he];kr(De[1],De,T,c)}}}}}return c}function pd(s){const o=Be(),u=rn(),c=Kd();uc(c+1);const d=ut(u,c);if(s.dirty&&function Oa(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?kr(u,o,c,[]):_w(u,o,d,c);s.reset(g,qD),s.notifyOnChanges()}return!0}return!1}function i_(s,o,u,c){const d=rn();if(d.firstCreatePass){const g=Nr();(function bl(s,o,u){null===s.queries&&(s.queries=new gw),s.queries.track(new mw(o,u))})(d,new n_(o,u,c),g.index),function yw(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function mr(s,o,u){const c=new hf(4==(4&u));AI(s,o,c,c.destroy),null===o[19]&&(o[19]=new pw),o[19].queries.push(new fw(c))}(d,Be(),u)}function yb(){return function Ze(s,o){return s[19].queries[o].queryList}(Be(),Kd())}function ut(s,o){return s.queries.getByIndex(o)}function xl(...s){}const Nb=new wn("Application Initializer");let _r=(()=>{class s{constructor(u){this.appInits=u,this.resolve=xl,this.reject=xl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(gv(g))u.push(g);else if(Jp(g)){const v=new Promise((I,b)=>{g.subscribe({complete:I,error:b})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Qe(Nb,8))},s.\u0275prov=We({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const kb=new wn("AppId",{providedIn:"root",factory:function du(){return`${hu()}${hu()}${hu()}`}});function hu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const d_=new wn("Platform Initializer"),Pb=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mf=new wn("appBootstrapListener");let vd=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=We({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Dl=new wn("LocaleId",{providedIn:"root",factory:()=>st(Dl,ot.Optional|ot.SkipSelf)||function va(){return typeof $localize<"u"&&$localize.locale||vl}()}),Tl=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wd{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let bw=(()=>{class s{compileModuleSync(u){return new Il(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=ca(Fr(u).declarations).reduce((v,I)=>{const b=nn(I);return b&&v.push(new Kp(b)),v},[]);return new wd(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=We({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const LS=(()=>Promise.resolve(0))();function h_(s){typeof Zone>"u"?LS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Rs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new to(!1),this.onMicrotaskEmpty=new to(!1),this.onStable=new to(!1),this.onError=new to(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Lb(){let s=Tt.requestAnimationFrame,o=Tt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Tn(s){const o=()=>{!function un(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Tt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Sl(s),s.isCheckStableRunning=!0,f_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Sl(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,v,I)=>{try{return p_(s),u.invokeTask(d,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),g_(s)}},onInvoke:(u,c,d,g,v,I,b)=>{try{return p_(s),u.invoke(d,g,v,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),g_(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Sl(s),f_(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rs.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(Rs.isInAngularZone())throw new Q(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,Ub,xl,xl);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Ub={};function f_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Sl(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function p_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function g_(s){s._nesting--,f_(s)}class Vb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new to,this.onMicrotaskEmpty=new to,this.onStable=new to,this.onError=new to}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const m_=new wn(""),xw=new wn("");let Tw,Bb=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Tw||(function US(s){Tw=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rs.assertNotInAngularZone(),h_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())h_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Qe(Rs),Qe(Dw),Qe(xw))},s.\u0275prov=We({token:s,factory:s.\u0275fac}),s})(),Dw=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Tw?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=We({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Al=null;const Sw=new wn("AllowMultipleToken"),Aw=new wn("PlatformDestroyListeners");class BS{constructor(o,u){this.name=o,this.token=u}}function Rw(s,o,u=[]){const c=`Platform: ${o}`,d=new wn(c);return(g=[])=>{let v=y_();if(!v||v.injector.get(Sw,!1)){const I=[...u,...g,{provide:d,useValue:!0}];s?s(I):function yr(s){if(Al&&!Al.get(Sw,!1))throw new Q(400,!1);Al=s;const o=s.get(Vn);(function ri(s){const o=s.get(d_,null);o&&o.forEach(u=>u())})(s)}(function qi(s=[],o){return Gc.create({name:o,providers:[{provide:$m,useValue:"platform"},{provide:Aw,useValue:new Set([()=>Al=null])},...s]})}(I,c))}return function vf(s){const o=y_();if(!o)throw new Q(401,!1);return o}()}}function y_(){return Al?.get(Vn)??null}let Vn=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function v_(s,o){let u;return u="noop"===s?new Vb:("zone.js"===s?void 0:s)||new Rs(o),u}(c?.ngZone,function Hb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Rs,useValue:d}];return d.run(()=>{const v=Gc.create({providers:g,parent:this.injector,name:u.moduleType.name}),I=u.create(v),b=I.injector.get(Ah,null);if(!b)throw new Q(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:U=>{b.handleError(U)}});I.onDestroy(()=>{Cd(this._modules,I),T.unsubscribe()})}),function Rl(s,o,u){try{const c=u();return gv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,d,()=>{const T=I.injector.get(_r);return T.runInitializers(),T.donePromise.then(()=>(function Lv(s){xe(s,"Expected localeId to be defined"),"string"==typeof s&&(Fv=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Dl,vl)||vl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const d=wf({},c);return function VS(s,o,u){const c=new Il(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(Id);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Q(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Aw,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Qe(Gc))},s.\u0275prov=We({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function wf(s,o){return Array.isArray(o)?o.reduce(wf,s):{...s,...o}}let Id=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new N.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Rs.assertNotInAngularZone(),h_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});this.isStable=(0,Z.T)(g,v.pipe((0,ie.B)()))}bootstrap(u,c){const d=u instanceof la;if(!this._injector.get(_r).done)throw!d&&tr(u),new Q(405,false);let v;v=d?u:this._injector.get(So).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function yf(s){return s.isBoundToModule}(v)?void 0:this._injector.get(_a),T=v.create(Gc.NULL,[],c||v.selector,I),U=T.location.nativeElement,Y=T.injector.get(m_,null);return Y?.registerApplication(U),T.onDestroy(()=>{this.detachView(T.hostView),Cd(this.components,T),Y?.unregisterApplication(U)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Q(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Cd(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(mf,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Cd(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Q(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Qe(Rs),Qe(cl),Qe(Ah))},s.\u0275prov=We({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Cd(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function fu(){return!1}let E_=(()=>{class s{}return s.__NG_ELEMENT_ID__=Nw,s})();function Nw(s){return function bd(s,o,u){if(Bi(s)&&!u){const c=Ir(s.index,o);return new su(c,c)}return 47&s.type?new su(o[16],o):null}(Nr(),Be(),16==(16&s))}class xd{constructor(){}supports(o){return Qc(o)}create(o){return new Kb(o)}}const qb=(s,o)=>o;class Kb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||qb}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<jn(c,d,g)?u:c,I=jn(v,d,g),b=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const T=I-d,U=b-d;if(T!=U){for(let he=0;he<T;he++){const De=he<g.length?g[he]:g[he]=0,$e=De+he;U<=$e&&$e<T&&(g[he]=De+1)}g[v.previousIndex]=U-T}}I!==b&&o(v,I,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Qc(o))throw new Q(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,I),c=!0),u=u._next}else d=0,function zI(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[gl()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new Mg(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Zb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Mg{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Zb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new qS,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jn(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Ng{constructor(){}supports(o){return o instanceof Map||Xc(o)}create(){return new x_}}class x_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Xc(o)))throw new Q(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new Yb(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Yb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qb(){return new Dd([new xd])}let Dd=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Qb()),deps:[[s,new D,new tl]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Q(901,!1)}}return s.\u0275prov=We({token:s,providedIn:"root",factory:Qb}),s})();function Lw(){return new kl([new Ng])}let kl=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Lw()),deps:[[s,new D,new tl]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Q(901,!1)}}return s.\u0275prov=We({token:s,providedIn:"root",factory:Lw}),s})();const bf=Rw(null,"core",[]);let Uw=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Qe(Id))},s.\u0275mod=Fn({type:s}),s.\u0275inj=hn({}),s})();function YS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Z:()=>te});var h=M(2090),O=M(4859),N=M(9681),Z=M(1877);class ie{constructor(Q,j){this._delegate=Q,this.firebase=j,(0,N._addComponent)(Q,new O.wA("app-compat",()=>this,"PUBLIC")),this.container=Q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this._delegate.automaticDataCollectionEnabled=Q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Q=>{this._delegate.checkDestroyed(),Q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Q,j=N._DEFAULT_ENTRY_NAME){var z;this._delegate.checkDestroyed();const ue=this._delegate.container.getProvider(Q);return!ue.isInitialized()&&"EXPLICIT"===(null===(z=ue.getComponent())||void 0===z?void 0:z.instantiationMode)&&ue.initialize(),ue.getImmediate({identifier:j})}_removeServiceInstance(Q,j=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Q).clearInstance(j)}_addComponent(Q){(0,N._addComponent)(this._delegate,Q)}_addOrOverwriteComponent(Q){(0,N._addOrOverwriteComponent)(this._delegate,Q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const J=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),k=function H(){const ge=function L(ge){const Q={},j={__esModule:!0,initializeApp:function ne(ve,W={}){const _e=N.initializeApp(ve,W);if((0,h.r3)(Q,_e.name))return Q[_e.name];const ce=new ge(_e,j);return Q[_e.name]=ce,ce},app:ue,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function oe(ve){const W=ve.name,_e=W.replace("-compat","");if(N._registerComponent(ve)&&"PUBLIC"===ve.type){const ce=(Te=ue())=>{if("function"!=typeof Te[_e])throw J.create("invalid-app-argument",{appName:W});return Te[_e]()};void 0!==ve.serviceProps&&(0,h.ZB)(ce,ve.serviceProps),j[_e]=ce,ge.prototype[_e]=function(...Te){return this._getService.bind(this,W).apply(this,ve.multipleInstances?Te:[])}}return"PUBLIC"===ve.type?j[_e]:null},removeApp:function z(ve){delete Q[ve]},useAsService:function be(ve,W){return"serverAuth"===W?null:W},modularAPIs:N}};function ue(ve){if(!(0,h.r3)(Q,ve=ve||N._DEFAULT_ENTRY_NAME))throw J.create("no-app",{appName:ve});return Q[ve]}return j.default=j,Object.defineProperty(j,"apps",{get:function se(){return Object.keys(Q).map(ve=>Q[ve])}}),ue.App=ge,j}(ie);return ge.INTERNAL=Object.assign(Object.assign({},ge.INTERNAL),{createFirebaseNamespace:H,extendNamespace:function Q(j){(0,h.ZB)(ge,j)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ge}(),R=new Z.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){R.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ge=self.firebase.SDK_VERSION;ge&&ge.indexOf("LITE")>=0&&R.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const te=k;!function q(ge){(0,N.registerVersion)("@firebase/app-compat","0.2.3",ge)}()},9681:(Ue,Ie,M)=>{"use strict";M.r(Ie),M.d(Ie,{FirebaseError:()=>Z.ZR,SDK_VERSION:()=>En,_DEFAULT_ENTRY_NAME:()=>de,_addComponent:()=>bt,_addOrOverwriteComponent:()=>et,_apps:()=>xe,_clearComponents:()=>hn,_components:()=>Ce,_getProvider:()=>We,_registerComponent:()=>Pt,_removeServiceInstance:()=>St,deleteApp:()=>qr,getApp:()=>ur,getApps:()=>Xn,initializeApp:()=>ii,onLog:()=>ot,registerVersion:()=>Jn,setLogLevel:()=>On});var h=M(5861),O=M(4859),N=M(1877),Z=M(2090),ie=M(8766);class K{constructor(Ge){this.container=Ge}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function J(Qe){return"VERSION"===Qe.getComponent()?.type}(st)){const At=st.getImmediate();return`${At.library}/${At.version}`}return null}).filter(st=>st).join(" ")}}const L="@firebase/app",H="0.9.3",k=new N.Yd("@firebase/app"),de="[DEFAULT]",Ee={[L]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xe=new Map,Ce=new Map;function bt(Qe,Ge){try{Qe.container.addComponent(Ge)}catch(st){k.debug(`Component ${Ge.name} failed to register with FirebaseApp ${Qe.name}`,st)}}function et(Qe,Ge){Qe.container.addOrOverwriteComponent(Ge)}function Pt(Qe){const Ge=Qe.name;if(Ce.has(Ge))return k.debug(`There were multiple attempts to register component ${Ge}.`),!1;Ce.set(Ge,Qe);for(const st of xe.values())bt(st,Qe);return!0}function We(Qe,Ge){const st=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),Qe.container.getProvider(Ge)}function St(Qe,Ge,st=de){We(Qe,Ge).clearInstance(st)}function hn(){Ce.clear()}const pn=new Z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tn{constructor(Ge,st,At){this._isDeleted=!1,this._options=Object.assign({},Ge),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new O.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ge){this._isDeleted=Ge}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}const En="9.17.1";function ii(Qe,Ge={}){let st=Qe;"object"!=typeof Ge&&(Ge={name:Ge});const At=Object.assign({name:de,automaticDataCollectionEnabled:!1},Ge),Nt=At.name;if("string"!=typeof Nt||!Nt)throw pn.create("bad-app-name",{appName:String(Nt)});if(st||(st=(0,Z.aH)()),!st)throw pn.create("no-options");const Vt=xe.get(Nt);if(Vt){if((0,Z.vZ)(st,Vt.options)&&(0,Z.vZ)(At,Vt.config))return Vt;throw pn.create("duplicate-app",{appName:Nt})}const ae=new O.H0(Nt);for(const fe of Ce.values())ae.addComponent(fe);const re=new tn(st,At,ae);return xe.set(Nt,re),re}function ur(Qe=de){const Ge=xe.get(Qe);if(!Ge&&Qe===de)return ii();if(!Ge)throw pn.create("no-app",{appName:Qe});return Ge}function Xn(){return Array.from(xe.values())}function qr(Qe){return gn.apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(Qe){const Ge=Qe.name;xe.has(Ge)&&(xe.delete(Ge),yield Promise.all(Qe.container.getProviders().map(st=>st.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function Jn(Qe,Ge,st){var At;let Nt=null!==(At=Ee[Qe])&&void 0!==At?At:Qe;st&&(Nt+=`-${st}`);const Vt=Nt.match(/\s|\//),ae=Ge.match(/\s|\//);if(Vt||ae){const re=[`Unable to register library "${Nt}" with version "${Ge}":`];return Vt&&re.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),Vt&&ae&&re.push("and"),ae&&re.push(`version name "${Ge}" contains illegal characters (whitespace or "/")`),void k.warn(re.join(" "))}Pt(new O.wA(`${Nt}-version`,()=>({library:Nt,version:Ge}),"VERSION"))}function ot(Qe,Ge){if(null!==Qe&&"function"!=typeof Qe)throw pn.create("invalid-log-argument");(0,N.Am)(Qe,Ge)}function On(Qe){(0,N.Ub)(Qe)}const lr="firebase-heartbeat-store";let Pr=null;function Tt(){return Pr||(Pr=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(Qe,Ge)=>{0===Ge&&Qe.createObjectStore(lr)}}).catch(Qe=>{throw pn.create("idb-open",{originalErrorMessage:Qe.message})})),Pr}function xt(){return(xt=(0,h.Z)(function*(Qe){try{return(yield Tt()).transaction(lr).objectStore(lr).get(_n(Qe))}catch(Ge){if(Ge instanceof Z.ZR)k.warn(Ge.message);else{const st=pn.create("idb-get",{originalErrorMessage:Ge?.message});k.warn(st.message)}}})).apply(this,arguments)}function Ei(Qe,Ge){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(Qe,Ge){try{const At=(yield Tt()).transaction(lr,"readwrite");return yield At.objectStore(lr).put(Ge,_n(Qe)),At.done}catch(st){if(st instanceof Z.ZR)k.warn(st.message);else{const At=pn.create("idb-set",{originalErrorMessage:st?.message});k.warn(At.message)}}})).apply(this,arguments)}function _n(Qe){return`${Qe.name}!${Qe.options.appId}`}class ms{constructor(Ge){this.container=Ge,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new en(st),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var Ge=this;return(0,h.Z)(function*(){const At=Ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=cn();if(null===Ge._heartbeatsCache&&(Ge._heartbeatsCache=yield Ge._heartbeatsCachePromise),Ge._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!Ge._heartbeatsCache.heartbeats.some(Vt=>Vt.date===Nt))return Ge._heartbeatsCache.heartbeats.push({date:Nt,agent:At}),Ge._heartbeatsCache.heartbeats=Ge._heartbeatsCache.heartbeats.filter(Vt=>{const ae=new Date(Vt.date).valueOf();return Date.now()-ae<=2592e6}),Ge._storage.overwrite(Ge._heartbeatsCache)})()}getHeartbeatsHeader(){var Ge=this;return(0,h.Z)(function*(){if(null===Ge._heartbeatsCache&&(yield Ge._heartbeatsCachePromise),null===Ge._heartbeatsCache||0===Ge._heartbeatsCache.heartbeats.length)return"";const st=cn(),{heartbeatsToSend:At,unsentEntries:Nt}=function Ii(Qe,Ge=1024){const st=[];let At=Qe.slice();for(const Nt of Qe){const Vt=st.find(ae=>ae.agent===Nt.agent);if(Vt){if(Vt.dates.push(Nt.date),wr(st)>Ge){Vt.dates.pop();break}}else if(st.push({agent:Nt.agent,dates:[Nt.date]}),wr(st)>Ge){st.pop();break}At=At.slice(1)}return{heartbeatsToSend:st,unsentEntries:At}}(Ge._heartbeatsCache.heartbeats),Vt=(0,Z.L)(JSON.stringify({version:2,heartbeats:At}));return Ge._heartbeatsCache.lastSentHeartbeatDate=st,Nt.length>0?(Ge._heartbeatsCache.heartbeats=Nt,yield Ge._storage.overwrite(Ge._heartbeatsCache)):(Ge._heartbeatsCache.heartbeats=[],Ge._storage.overwrite(Ge._heartbeatsCache)),Vt})()}}function cn(){return(new Date).toISOString().substring(0,10)}class en{constructor(Ge){this.app=Ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,Z.hl)()&&(0,Z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ge=this;return(0,h.Z)(function*(){return(yield Ge._canUseIndexedDBPromise)&&(yield function vt(Qe){return xt.apply(this,arguments)}(Ge.app))||{heartbeats:[]}})()}overwrite(Ge){var st=this;return(0,h.Z)(function*(){var At;if(yield st._canUseIndexedDBPromise){const Vt=yield st.read();return Ei(st.app,{lastSentHeartbeatDate:null!==(At=Ge.lastSentHeartbeatDate)&&void 0!==At?At:Vt.lastSentHeartbeatDate,heartbeats:Ge.heartbeats})}})()}add(Ge){var st=this;return(0,h.Z)(function*(){var At;if(yield st._canUseIndexedDBPromise){const Vt=yield st.read();return Ei(st.app,{lastSentHeartbeatDate:null!==(At=Ge.lastSentHeartbeatDate)&&void 0!==At?At:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...Ge.heartbeats]})}})()}}function wr(Qe){return(0,Z.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function oi(Qe){Pt(new O.wA("platform-logger",Ge=>new K(Ge),"PRIVATE")),Pt(new O.wA("heartbeat",Ge=>new ms(Ge),"PRIVATE")),Jn(L,H,Qe),Jn(L,H,"esm2017"),Jn("fire-js","")}("")},4859:(Ue,Ie,M)=>{"use strict";M.d(Ie,{H0:()=>L,wA:()=>N,zt:()=>ie});var h=M(5861),O=M(2090);class N{constructor(k,R,P){this.name=k,this.instanceFactory=R,this.type=P,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(k){return this.instantiationMode=k,this}setMultipleInstances(k){return this.multipleInstances=k,this}setServiceProps(k){return this.serviceProps=k,this}setInstanceCreatedCallback(k){return this.onInstanceCreated=k,this}}const Z="[DEFAULT]";class ie{constructor(k,R){this.name=k,this.container=R,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(k){const R=this.normalizeInstanceIdentifier(k);if(!this.instancesDeferred.has(R)){const P=new O.BH;if(this.instancesDeferred.set(R,P),this.isInitialized(R)||this.shouldAutoInitialize())try{const $=this.getOrInitializeService({instanceIdentifier:R});$&&P.resolve($)}catch{}}return this.instancesDeferred.get(R).promise}getImmediate(k){var R;const P=this.normalizeInstanceIdentifier(k?.identifier),$=null!==(R=k?.optional)&&void 0!==R&&R;if(!this.isInitialized(P)&&!this.shouldAutoInitialize()){if($)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:P})}catch(q){if($)return null;throw q}}getComponent(){return this.component}setComponent(k){if(k.name!==this.name)throw Error(`Mismatching Component ${k.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=k,this.shouldAutoInitialize()){if(function J(H){return"EAGER"===H.instantiationMode}(k))try{this.getOrInitializeService({instanceIdentifier:Z})}catch{}for(const[R,P]of this.instancesDeferred.entries()){const $=this.normalizeInstanceIdentifier(R);try{const q=this.getOrInitializeService({instanceIdentifier:$});P.resolve(q)}catch{}}}}clearInstance(k=Z){this.instancesDeferred.delete(k),this.instancesOptions.delete(k),this.instances.delete(k)}delete(){var k=this;return(0,h.Z)(function*(){const R=Array.from(k.instances.values());yield Promise.all([...R.filter(P=>"INTERNAL"in P).map(P=>P.INTERNAL.delete()),...R.filter(P=>"_delete"in P).map(P=>P._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(k=Z){return this.instances.has(k)}getOptions(k=Z){return this.instancesOptions.get(k)||{}}initialize(k={}){const{options:R={}}=k,P=this.normalizeInstanceIdentifier(k.instanceIdentifier);if(this.isInitialized(P))throw Error(`${this.name}(${P}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $=this.getOrInitializeService({instanceIdentifier:P,options:R});for(const[q,te]of this.instancesDeferred.entries())P===this.normalizeInstanceIdentifier(q)&&te.resolve($);return $}onInit(k,R){var P;const $=this.normalizeInstanceIdentifier(R),q=null!==(P=this.onInitCallbacks.get($))&&void 0!==P?P:new Set;q.add(k),this.onInitCallbacks.set($,q);const te=this.instances.get($);return te&&k(te,$),()=>{q.delete(k)}}invokeOnInitCallbacks(k,R){const P=this.onInitCallbacks.get(R);if(P)for(const $ of P)try{$(k,R)}catch{}}getOrInitializeService({instanceIdentifier:k,options:R={}}){let P=this.instances.get(k);if(!P&&this.component&&(P=this.component.instanceFactory(this.container,{instanceIdentifier:(H=k,H===Z?void 0:H),options:R}),this.instances.set(k,P),this.instancesOptions.set(k,R),this.invokeOnInitCallbacks(P,k),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,k,P)}catch{}var H;return P||null}normalizeInstanceIdentifier(k=Z){return this.component?this.component.multipleInstances?k:Z:k}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(k){this.name=k,this.providers=new Map}addComponent(k){const R=this.getProvider(k.name);if(R.isComponentSet())throw new Error(`Component ${k.name} has already been registered with ${this.name}`);R.setComponent(k)}addOrOverwriteComponent(k){this.getProvider(k.name).isComponentSet()&&this.providers.delete(k.name),this.addComponent(k)}getProvider(k){if(this.providers.has(k))return this.providers.get(k);const R=new ie(k,this);return this.providers.set(k,R),R}getProviders(){return Array.from(this.providers.values())}}},1877:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Am:()=>H,Ub:()=>L,Yd:()=>J,in:()=>O});const h=[];var O=(()=>{return(k=O||(O={}))[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT",O;var k})();const N={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},Z=O.INFO,ie={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},K=(k,R,...P)=>{if(R<k.logLevel)return;const $=(new Date).toISOString(),q=ie[R];if(!q)throw new Error(`Attempted to log a message with an invalid logType (value: ${R})`);console[q](`[${$}]  ${k.name}:`,...P)};class J{constructor(R){this.name=R,this._logLevel=Z,this._logHandler=K,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(R){if(!(R in O))throw new TypeError(`Invalid value "${R}" assigned to \`logLevel\``);this._logLevel=R}setLogLevel(R){this._logLevel="string"==typeof R?N[R]:R}get logHandler(){return this._logHandler}set logHandler(R){if("function"!=typeof R)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=R}get userLogHandler(){return this._userLogHandler}set userLogHandler(R){this._userLogHandler=R}debug(...R){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...R),this._logHandler(this,O.DEBUG,...R)}log(...R){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...R),this._logHandler(this,O.VERBOSE,...R)}info(...R){this._userLogHandler&&this._userLogHandler(this,O.INFO,...R),this._logHandler(this,O.INFO,...R)}warn(...R){this._userLogHandler&&this._userLogHandler(this,O.WARN,...R),this._logHandler(this,O.WARN,...R)}error(...R){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...R),this._logHandler(this,O.ERROR,...R)}}function L(k){h.forEach(R=>{R.setLogLevel(k)})}function H(k,R){for(const P of h){let $=null;R&&R.level&&($=N[R.level]),P.userLogHandler=null===k?null:(q,te,...ge)=>{const Q=ge.map(j=>{if(null==j)return null;if("string"==typeof j)return j;if("number"==typeof j||"boolean"==typeof j)return j.toString();if(j instanceof Error)return j.message;try{return JSON.stringify(j)}catch{return null}}).filter(j=>j).join(" ");te>=($??q.logLevel)&&k({level:O[te].toLowerCase(),message:Q,args:ge,type:q.name})}}}},259:(Ue,Ie,M)=>{"use strict";M.d(Ie,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=M(9681);(0,h.registerVersion)("firebase","9.17.1","app")},9260:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Z:()=>h.Z});var h=M(3942);h.Z.registerVersion("firebase","9.17.1","app-compat")},407:(Ue,Ie,M)=>{"use strict";M.r(Ie);var h=M(5861),O=M(3942),N=M(2090),Z=M(9681),ie=M(1877),K=M(655),J=M(4859);const te=function $(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ge=function q(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Q=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),z=new ie.Yd("@firebase/auth");function ue(y,...p){z.logLevel<=ie.in.ERROR&&z.error(`Auth (${Z.SDK_VERSION}): ${y}`,...p)}function ne(y,...p){throw ve(y,...p)}function se(y,...p){return ve(y,...p)}function oe(y,p,m){const E=Object.assign(Object.assign({},ge()),{[p]:m});return new N.LL("auth","Firebase",E).create(p,{appName:y.name})}function be(y,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&ne(y,"argument-error"),oe(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ve(y,...p){if("string"!=typeof y){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return Q.create(y,...p)}function W(y,p,...m){if(!y)throw ve(p,...m)}function _e(y){const p="INTERNAL ASSERTION FAILED: "+y;throw ue(p),new Error(p)}function ce(y,p){y||_e(p)}const Te=new Map;function He(y){ce(y instanceof Function,"Expected a class definition");let p=Te.get(y);return p?(ce(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,Te.set(y,p),p)}function we(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Me(){return"http:"===ke()||"https:"===ke()}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class xe{constructor(p,m){this.shortDelay=p,this.longDelay=m,ce(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function de(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Me()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ce(y,p){ce(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class bt{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pt=new xe(3e4,6e4);function We(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function St(y,p,m,E){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(y,p,m,E,A={}){return Cn(y,A,(0,h.Z)(function*(){let V={},pe={};E&&("GET"===p?pe=E:V={body:JSON.stringify(E)});const Le=(0,N.xO)(Object.assign({key:y.config.apiKey},pe)).slice(1),Xe=yield y._getAdditionalHeaders();return Xe["Content-Type"]="application/json",y.languageCode&&(Xe["X-Firebase-Locale"]=y.languageCode),bt.fetch()(ii(y,y.config.apiHost,m,Le),Object.assign({method:p,headers:Xe,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function Cn(y,p,m){return pn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(y,p,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},et),p);try{const A=new ur(y),V=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const pe=yield V.json();if("needConfirmation"in pe)throw Xn(y,"account-exists-with-different-credential",pe);if(V.ok&&!("errorMessage"in pe))return pe;{const Le=V.ok?pe.errorMessage:pe.error.message,[Xe,at]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xe)throw Xn(y,"credential-already-in-use",pe);if("EMAIL_EXISTS"===Xe)throw Xn(y,"email-already-in-use",pe);if("USER_DISABLED"===Xe)throw Xn(y,"user-disabled",pe);const kt=E[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw oe(y,kt,at);ne(y,kt)}}catch(A){if(A instanceof N.ZR)throw A;ne(y,"network-request-failed")}})).apply(this,arguments)}function tn(y,p,m,E){return En.apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(y,p,m,E,A={}){const V=yield St(y,p,m,E,A);return"mfaPendingCredential"in V&&ne(y,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function ii(y,p,m,E){const A=`${p}${m}?${E}`;return y.config.emulator?Ce(y.config,A):`${y.config.apiScheme}://${A}`}class ur{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(se(this.auth,"network-request-failed")),Pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(y,p,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=se(y,p,E);return A.customData._tokenResponse=m,A}function gn(){return(gn=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Jn(y,p){return ot.apply(this,arguments)}function ot(){return(ot=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function On(y,p){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function In(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Tt(){return(Tt=(0,h.Z)(function*(y,p=!1){const m=(0,N.m9)(y),E=yield m.getIdToken(p),A=xt(E);W(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const V="object"==typeof A.firebase?A.firebase:void 0,pe=V?.sign_in_provider;return{claims:A,token:E,authTime:In(vt(A.auth_time)),issuedAtTime:In(vt(A.iat)),expirationTime:In(vt(A.exp)),signInProvider:pe||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function vt(y){return 1e3*Number(y)}function xt(y){const[p,m,E]=y.split(".");if(void 0===p||void 0===m||void 0===E)return ue("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,N.tV)(m);return A?JSON.parse(A):(ue("Failed to decode base64 JWT payload"),null)}catch(A){return ue("Caught error parsing JWT payload as JSON",A?.toString()),null}}function mn(y,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(y,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof N.ZR&&si(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function si({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class er{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class ms{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=In(this.lastLoginAt),this.creationTime=In(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cn(y){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,h.Z)(function*(y){var p;const m=y.auth,E=yield y.getIdToken(),A=yield mn(y,On(m,{idToken:E}));W(A?.users.length,m,"internal-error");const V=A.users[0];y._notifyReloadListener(V);const pe=null!==(p=V.providerUserInfo)&&void 0!==p&&p.length?Qe(V.providerUserInfo):[],Le=oi(y.providerData,pe),kt=!!y.isAnonymous&&!(y.email&&V.passwordHash||Le?.length),wt={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:Le,metadata:new ms(V.createdAt,V.lastLoginAt),isAnonymous:kt};Object.assign(y,wt)})).apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(y){const p=(0,N.m9)(y);yield cn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function oi(y,p){return[...y.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}function Qe(y){return y.map(p=>{var{providerId:m}=p,E=(0,K._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function st(){return(st=(0,h.Z)(function*(y,p){const m=yield Cn(y,{},(0,h.Z)(function*(){const E=(0,N.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:V}=y.config,pe=ii(y,A,"/v1/token",`key=${V}`),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",bt.fetch()(pe,{method:"POST",headers:Le,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class At{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){W(p.idToken,"internal-error"),W(typeof p.idToken<"u","internal-error"),W(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Ei(y){const p=xt(y);return W(p,"internal-error"),W(typeof p.exp<"u","internal-error"),W(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return W(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:V,expiresIn:pe}=yield function Ge(y,p){return st.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(A,V,Number(pe))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:A,expirationTime:V}=m,pe=new At;return E&&(W("string"==typeof E,"internal-error",{appName:p}),pe.refreshToken=E),A&&(W("string"==typeof A,"internal-error",{appName:p}),pe.accessToken=A),V&&(W("number"==typeof V,"internal-error",{appName:p}),pe.expirationTime=V),pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new At,this.toJSON())}_performRefresh(){return _e("not implemented")}}function Nt(y,p){W("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class Vt{constructor(p){var{uid:m,auth:E,stsTokenManager:A}=p,V=(0,K._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new ms(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield mn(m,m.stsTokenManager.getToken(m.auth,p));return W(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Pr(y){return Tt.apply(this,arguments)}(this,p)}reload(){return function en(y){return wr.apply(this,arguments)}(this)}_assign(p){this!==p&&(W(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Vt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield cn(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield mn(p,function qr(y,p){return gn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,A,V,pe,Le,Xe,at,kt;const wt=null!==(E=m.displayName)&&void 0!==E?E:void 0,xr=null!==(A=m.email)&&void 0!==A?A:void 0,us=null!==(V=m.phoneNumber)&&void 0!==V?V:void 0,Ch=null!==(pe=m.photoURL)&&void 0!==pe?pe:void 0,bh=null!==(Le=m.tenantId)&&void 0!==Le?Le:void 0,Oc=null!==(Xe=m._redirectEventId)&&void 0!==Xe?Xe:void 0,Zs=null!==(at=m.createdAt)&&void 0!==at?at:void 0,nu=null!==(kt=m.lastLoginAt)&&void 0!==kt?kt:void 0,{uid:xh,emailVerified:Um,isAnonymous:Fc,providerData:Vm,stsTokenManager:Bm}=m;W(xh&&Bm,p,"internal-error");const Ay=At.fromJSON(this.name,Bm);W("string"==typeof xh,p,"internal-error"),Nt(wt,p.name),Nt(xr,p.name),W("boolean"==typeof Um,p,"internal-error"),W("boolean"==typeof Fc,p,"internal-error"),Nt(us,p.name),Nt(Ch,p.name),Nt(bh,p.name),Nt(Oc,p.name),Nt(Zs,p.name),Nt(nu,p.name);const Ts=new Vt({uid:xh,auth:p,email:xr,emailVerified:Um,displayName:wt,isAnonymous:Fc,photoURL:Ch,phoneNumber:us,tenantId:bh,stsTokenManager:Ay,createdAt:Zs,lastLoginAt:nu});return Vm&&Array.isArray(Vm)&&(Ts.providerData=Vm.map(Tp=>Object.assign({},Tp))),Oc&&(Ts._redirectEventId=Oc),Ts}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const A=new At;A.updateFromServerResponse(m);const V=new Vt({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield cn(V),V})()}}const re=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,h.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function fe(y,p,m){return`firebase:${y}:${p}:${m}`}class Ve{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:A,name:V}=this.auth;this.fullUserKey=fe(this.userKey,A.apiKey,V),this.fullPersistenceKey=fe("persistence",A.apiKey,V),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Vt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Ve(He(re),p,E);const A=(yield Promise.all(m.map(function(){var at=(0,h.Z)(function*(kt){if(yield kt._isAvailable())return kt});return function(kt){return at.apply(this,arguments)}}()))).filter(at=>at);let V=A[0]||He(re);const pe=fe(E,p.config.apiKey,p.name);let Le=null;for(const at of m)try{const kt=yield at._get(pe);if(kt){const wt=Vt._fromJSON(p,kt);at!==V&&(Le=wt),V=at;break}}catch{}const Xe=A.filter(at=>at._shouldAllowMigration);return V._shouldAllowMigration&&Xe.length?(V=Xe[0],Le&&(yield V._set(pe,Le.toJSON())),yield Promise.all(m.map(function(){var at=(0,h.Z)(function*(kt){if(kt!==V)try{yield kt._remove(pe)}catch{}});return function(kt){return at.apply(this,arguments)}}())),new Ve(V,p,E)):new Ve(V,p,E)})()}}function Se(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Sn(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(nt(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Er(p))return"Blackberry";if(Kt(p))return"Webos";if(Rt(p))return"Safari";if((p.includes("chrome/")||Qt(p))&&!p.includes("edge/"))return"Chrome";if(Dt(p))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function nt(y=(0,N.z$)()){return/firefox\//i.test(y)}function Rt(y=(0,N.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Qt(y=(0,N.z$)()){return/crios\//i.test(y)}function Sn(y=(0,N.z$)()){return/iemobile/i.test(y)}function Dt(y=(0,N.z$)()){return/android/i.test(y)}function Er(y=(0,N.z$)()){return/blackberry/i.test(y)}function Kt(y=(0,N.z$)()){return/webos/i.test(y)}function cr(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Wf(y=(0,N.z$)()){return cr(y)||Dt(y)||Kt(y)||Er(y)||/windows phone/i.test(y)||Sn(y)}function bu(y,p=[]){let m;switch(y){case"Browser":m=Se((0,N.z$)());break;case"Worker":m=`${Se((0,N.z$)())}-${y}`;break;default:m=y}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${Z.SDK_VERSION}/${E}`}class Gl{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=V=>new Promise((pe,Le)=>{try{pe(p(V))}catch(Xe){Le(Xe)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const A of m.queue)yield A(p),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const V of E)try{V()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Ld{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ud(this),this.idTokenSubscription=new Ud(this),this.beforeStateQueue=new Gl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=He(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,V;if(!E._deleted&&(E.persistenceManager=yield Ve.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(V=E.currentUser)||void 0===V?void 0:V.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let V=A,pe=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Le=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Xe=V?._redirectEventId,at=yield m.tryRedirectSignIn(p);(!Le||Le===Xe)&&at?.user&&(V=at.user,pe=!0)}if(!V)return m.directlySetCurrentUser(null);if(!V._redirectEventId){if(pe)try{yield m.beforeStateQueue.runMiddleware(V)}catch(Le){V=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Le))}return V?m.reloadAndSetCurrentUserOrClear(V):m.directlySetCurrentUser(null)}return W(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===V._redirectEventId?m.directlySetCurrentUser(V):m.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield cn(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ee(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,N.m9)(p):null;return E&&W(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&W(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(He(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new N.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&He(p)||m._popupRedirectResolver;W(E,m,"argument-error"),m.redirectPersistenceManager=yield Ve.create(m,[He(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,A){if(this._deleted)return()=>{};const V="function"==typeof m?m:m.next.bind(m),pe=this._isInitialized?Promise.resolve():this._initializationPromise;return W(pe,this,"internal-error"),pe.then(()=>V(this.currentUser)),"function"==typeof m?p.addObserver(m,E,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=bu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function Fn(y){return(0,N.m9)(y)}class Ud{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,N.ne)(m=>this.observer=m)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Sa(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function nn(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class zn{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return _e("not implemented")}_getIdTokenResponse(p){return _e("not implemented")}_linkToIdToken(p,m){return _e("not implemented")}_getReauthenticationResolver(p){return _e("not implemented")}}function tr(y,p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:resetPassword",We(y,p))})).apply(this,arguments)}function Ci(y,p){return it.apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bt(y,p){return An.apply(this,arguments)}function An(){return(An=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:update",We(y,p))})).apply(this,arguments)}function _s(){return(_s=(0,h.Z)(function*(y,p){return tn(y,"POST","/v1/accounts:signInWithPassword",We(y,p))})).apply(this,arguments)}function nr(y,p){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:sendOobCode",We(y,p))})).apply(this,arguments)}function Ln(y,p){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(y,p){return nr(y,p)})).apply(this,arguments)}function Vs(y,p){return zt.apply(this,arguments)}function zt(){return(zt=(0,h.Z)(function*(y,p){return nr(y,p)})).apply(this,arguments)}function Wl(y,p){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(y,p){return nr(y,p)})).apply(this,arguments)}function ql(y,p){return Li.apply(this,arguments)}function Li(){return(Li=(0,h.Z)(function*(y,p){return nr(y,p)})).apply(this,arguments)}function Vo(){return(Vo=(0,h.Z)(function*(y,p){return tn(y,"POST","/v1/accounts:signInWithEmailLink",We(y,p))})).apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(y,p){return tn(y,"POST","/v1/accounts:signInWithEmailLink",We(y,p))})).apply(this,arguments)}class Hs extends zn{constructor(p,m,E,A=null){super("password",E),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new Hs(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Hs(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Kr(y,p){return _s.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Lr(y,p){return Vo.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:ne(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Ci(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function oo(y,p){return Ui.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:ne(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ys(y,p){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(y,p){return tn(y,"POST","/v1/accounts:signInWithIdp",We(y,p))})).apply(this,arguments)}class bi extends zn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new bi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):ne("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=m,V=(0,K._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const pe=new bi(E,A);return pe.idToken=V.idToken||void 0,pe.accessToken=V.accessToken||void 0,pe.secret=V.secret,pe.nonce=V.nonce,pe.pendingToken=V.pendingToken||null,pe}_getIdTokenResponse(p){return ys(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,ys(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ys(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,N.xO)(m)}return p}}function Vd(y,p){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:sendVerificationCode",We(y,p))})).apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(y,p){return tn(y,"POST","/v1/accounts:signInWithPhoneNumber",We(y,p))})).apply(this,arguments)}function Bd(){return(Bd=(0,h.Z)(function*(y,p){const m=yield tn(y,"POST","/v1/accounts:signInWithPhoneNumber",We(y,p));if(m.temporaryProof)throw Xn(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ai={USER_NOT_FOUND:"user-not-found"};function Ra(){return(Ra=(0,h.Z)(function*(y,p){return tn(y,"POST","/v1/accounts:signInWithPhoneNumber",We(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ai)})).apply(this,arguments)}class Bi extends zn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Bi({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Bi({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function ao(y,p){return Zr.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Ur(y,p){return Bd.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Vi(y,p){return Ra.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:V}=p;return E||m||A||V?new Bi({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:V}):null}}class Ma{constructor(p){var m,E,A,V,pe,Le;const Xe=(0,N.zd)((0,N.pd)(p)),at=null!==(m=Xe.apiKey)&&void 0!==m?m:null,kt=null!==(E=Xe.oobCode)&&void 0!==E?E:null,wt=function Kl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Xe.mode)&&void 0!==A?A:null);W(at&&kt&&wt,"argument-error"),this.apiKey=at,this.operation=wt,this.code=kt,this.continueUrl=null!==(V=Xe.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(pe=Xe.languageCode)&&void 0!==pe?pe:null,this.tenantId=null!==(Le=Xe.tenantId)&&void 0!==Le?Le:null}static parseLink(p){const m=function ui(y){const p=(0,N.zd)((0,N.pd)(y)).link,m=p?(0,N.zd)((0,N.pd)(p)).deep_link_id:null,E=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(E?(0,N.zd)((0,N.pd)(E)).link:null)||E||m||p||y}(p);try{return new Ma(m)}catch{return null}}}let Zl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return Hs._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=Ma.parseLink(E);return W(A,"argument-error"),Hs._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class vs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ho extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Na extends Ho{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return W("providerId"in m&&"signInMethod"in m,"argument-error"),bi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return W(p.idToken||p.accessToken,"argument-error"),bi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Na.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Na.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:V,nonce:pe,providerId:Le}=p;if(!E&&!A&&!m&&!V||!Le)return null;try{return new Na(Le)._credential({idToken:m,accessToken:E,nonce:pe,pendingToken:V})}catch{return null}}}let Yl=(()=>{class y extends Ho{constructor(){super("facebook.com")}static credential(m){return bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Kf=(()=>{class y extends Ho{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return y.credential(E,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Zf=(()=>{class y extends Ho{constructor(){super("github.com")}static credential(m){return bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class jo extends zn{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return ys(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,ys(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ys(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:V}=m;return E&&A&&V&&E===A?new jo(E,V):null}static _create(p,m){return new jo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xi extends vs{constructor(p){W(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Xi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Xi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=jo.fromJSON(p);return W(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return jo._create(E,m)}catch{return null}}}let om=(()=>{class y extends Ho{constructor(){super("twitter.com")}static credential(m,E){return bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return y.credential(E,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ql(y,p){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(y,p){return tn(y,"POST","/v1/accounts:signUp",We(y,p))})).apply(this,arguments)}class Yr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,A=!1){return(0,h.Z)(function*(){const V=yield Vt._fromIdTokenResponse(p,E,A),pe=Jl(E);return new Yr({user:V,providerId:pe,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=Jl(E);return new Yr({user:p,providerId:A,_tokenResponse:E,operationType:m})})()}}function Jl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Yf(){return(Yf=(0,h.Z)(function*(y){var p;const m=Fn(y);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Yr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Ql(m,{returnSecureToken:!0}),A=yield Yr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class xu extends N.ZR{constructor(p,m,E,A){var V;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,xu.prototype),this.customData={appName:p.name,tenantId:null!==(V=p.tenantId)&&void 0!==V?V:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,A){return new xu(p,m,E,A)}}function lo(y,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?xu._fromErrorAndOperation(y,V,p,E):V})}function co(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function $o(){return($o=(0,h.Z)(function*(y,p){const m=(0,N.m9)(y);yield ho(!0,m,p);const{providerUserInfo:E}=yield Jn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=co(E||[]);return m.providerData=m.providerData.filter(V=>A.has(V.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Tu(y,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,h.Z)(function*(y,p,m=!1){const E=yield mn(y,p._linkToIdToken(y.auth,yield y.getIdToken()),m);return Yr._forOperation(y,"link",E)})).apply(this,arguments)}function ho(y,p,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(y,p,m){yield cn(p);const A=!1===y?"provider-already-linked":"no-such-provider";W(co(p.providerData).has(m)===y,p.auth,A)})).apply(this,arguments)}function jd(y,p){return zo.apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(y,p,m=!1){const{auth:E}=y,A="reauthenticate";try{const V=yield mn(y,lo(E,A,p,y),m);W(V.idToken,E,"internal-error");const pe=xt(V.idToken);W(pe,E,"internal-error");const{sub:Le}=pe;return W(y.uid===Le,E,"user-mismatch"),Yr._forOperation(y,A,V)}catch(V){throw"auth/user-not-found"===V?.code&&ne(E,"user-mismatch"),V}})).apply(this,arguments)}function Wo(y,p){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(y,p,m=!1){const E="signIn",A=yield lo(y,E,p),V=yield Yr._fromIdTokenResponse(y,E,A);return m||(yield y._updateCurrentUser(V.user)),V})).apply(this,arguments)}function Bn(y,p){return Su.apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(y,p){return Wo(Fn(y),p)})).apply(this,arguments)}function Wn(y,p){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(y,p){const m=(0,N.m9)(y);return yield ho(!1,m,p.providerId),Tu(m,p)})).apply(this,arguments)}function fo(y,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,h.Z)(function*(y,p){return jd((0,N.m9)(y),p)})).apply(this,arguments)}function ec(y,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(y,p){return tn(y,"POST","/v1/accounts:signInWithCustomToken",We(y,p))})).apply(this,arguments)}function Ir(){return(Ir=(0,h.Z)(function*(y,p){const m=Fn(y),E=yield ec(m,{token:p,returnSecureToken:!0}),A=yield Yr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Oa{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Ko._fromServerResponse(p,m):ne(p,"internal-error")}}class Ko extends Oa{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Ko(m)}}function Au(y,p,m){var E;W((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),W(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(W(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(W(m.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Fa(){return(Fa=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y),A={requestType:"PASSWORD_RESET",email:p};m&&Au(E,A,m),yield Vs(E,A)})).apply(this,arguments)}function Lt(){return(Lt=(0,h.Z)(function*(y,p,m){yield tr((0,N.m9)(y),{oobCode:p,newPassword:m})})).apply(this,arguments)}function $d(){return($d=(0,h.Z)(function*(y,p){yield Bt((0,N.m9)(y),{oobCode:p})})).apply(this,arguments)}function Mu(y,p){return tc.apply(this,arguments)}function tc(){return(tc=(0,h.Z)(function*(y,p){const m=(0,N.m9)(y),E=yield tr(m,{oobCode:p}),A=E.requestType;switch(W(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":W(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":W(E.mfaInfo,m,"internal-error");default:W(E.email,m,"internal-error")}let V=null;return E.mfaInfo&&(V=Oa._fromServerResponse(Fn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:V},operation:A}})).apply(this,arguments)}function Nu(){return(Nu=(0,h.Z)(function*(y,p){const{data:m}=yield Mu((0,N.m9)(y),p);return m.email})).apply(this,arguments)}function rc(){return(rc=(0,h.Z)(function*(y,p,m){const E=Fn(y),A=yield Ql(E,{returnSecureToken:!0,email:p,password:m}),V=yield Yr._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(V.user),V})).apply(this,arguments)}function ic(){return(ic=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y),A={requestType:"EMAIL_SIGNIN",email:p};W(m.handleCodeInApp,E,"argument-error"),m&&Au(E,A,m),yield Wl(E,A)})).apply(this,arguments)}function Ua(){return(Ua=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y),A=Zl.credentialWithLink(p,m||we());return W(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Bn(E,A)})).apply(this,arguments)}function ku(y,p){return ci.apply(this,arguments)}function ci(){return(ci=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:createAuthUri",We(y,p))})).apply(this,arguments)}function Ou(){return(Ou=(0,h.Z)(function*(y,p){const E={identifier:p,continueUri:Me()?we():"http://localhost"},{signinMethods:A}=yield ku((0,N.m9)(y),E);return A||[]})).apply(this,arguments)}function sc(){return(sc=(0,h.Z)(function*(y,p){const m=(0,N.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Au(m.auth,A,p);const{email:V}=yield Ln(m.auth,A);V!==y.email&&(yield y.reload())})).apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};m&&Au(E.auth,V,m);const{email:pe}=yield ql(E.auth,V);pe!==y.email&&(yield y.reload())})).apply(this,arguments)}function di(y,p){return js.apply(this,arguments)}function js(){return(js=(0,h.Z)(function*(y,p){return St(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ji(){return(Ji=(0,h.Z)(function*(y,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,N.m9)(y),V={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},pe=yield mn(E,di(E.auth,V));E.displayName=pe.displayName||null,E.photoURL=pe.photoUrl||null;const Le=E.providerData.find(({providerId:Xe})=>"password"===Xe);Le&&(Le.displayName=E.displayName,Le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(pe)})).apply(this,arguments)}function qd(y,p,m){return oc.apply(this,arguments)}function oc(){return(oc=(0,h.Z)(function*(y,p,m){const{auth:E}=y,V={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(V.email=p),m&&(V.password=m);const pe=yield mn(y,Ci(E,V));yield y._updateTokensIfNecessary(pe,!0)})).apply(this,arguments)}class Es{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Kd extends Es{constructor(p,m,E,A){super(p,m,E),this.username=A}}class uc extends Es{constructor(p,m){super(p,"facebook.com",m)}}class Zd extends Kd{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Xf extends Es{constructor(p,m){super(p,"google.com",m)}}class Lu extends Kd{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Jf(y){const{user:p,_tokenResponse:m}=y;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ac(y){var p,m;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},V=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const pe=null===(m=null===(p=xt(y.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(pe)return new Es(V,"anonymous"!==pe&&"custom"!==pe?pe:null)}if(!E)return null;switch(E){case"facebook.com":return new uc(V,A);case"github.com":return new Zd(V,A);case"google.com":return new Xf(V,A);case"twitter.com":return new Lu(V,A,y.screenName||null);case"custom":case"anonymous":return new Es(V,null);default:return new Es(V,E,A)}}(m)}class mo{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new mo("enroll",p,m)}static _fromMfaPendingCredential(p){return new mo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return mo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return mo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class cc{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=Fn(p),A=m.customData._serverResponse,V=(A.mfaInfo||[]).map(Le=>Oa._fromServerResponse(E,Le));W(A.mfaPendingCredential,E,"internal-error");const pe=mo._fromMfaPendingCredential(A.mfaPendingCredential);return new cc(pe,V,function(){var Le=(0,h.Z)(function*(Xe){const at=yield Xe._process(E,pe);delete A.mfaInfo,delete A.mfaPendingCredential;const kt=Object.assign(Object.assign({},A),{idToken:at.idToken,refreshToken:at.refreshToken});switch(m.operationType){case"signIn":const wt=yield Yr._fromIdTokenResponse(E,m.operationType,kt);return yield E._updateCurrentUser(wt.user),wt;case"reauthenticate":return W(m.user,E,"internal-error"),Yr._forOperation(m.user,m.operationType,kt);default:ne(E,"internal-error")}});return function(Xe){return Le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function ep(y,p){return St(y,"POST","/v2/accounts/mfaEnrollment:start",We(y,p))}class Ba{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Oa._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Ba(p)}getSession(){var p=this;return(0,h.Z)(function*(){return mo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const A=p,V=yield E.getSession(),pe=yield mn(E.user,A._process(E.user.auth,V,m));return yield E.user._updateTokensIfNecessary(pe),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,A=yield m.user.getIdToken();try{const V=yield mn(m.user,function cm(y,p){return St(y,"POST","/v2/accounts/mfaEnrollment:withdraw",We(y,p))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:pe})=>pe!==E),yield m.user._updateTokensIfNecessary(V),yield m.user.reload()}catch(V){throw V}})()}}const _o=new WeakMap,es="__sak";class yo{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(es,"1"),this.storage.removeItem(es),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const dc=(()=>{class y extends yo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function tp(){const y=(0,N.z$)();return Rt(y)||cr(y)}()&&function Ta(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Wf(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),V=this.localCache[E];A!==V&&m(E,V,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((Le,Xe,at)=>{this.notifyListeners(Le,at)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(A);if(m.newValue!==Le)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const V=()=>{const Le=this.storage.getItem(A);!E&&this.localCache[A]===Le||this.notifyListeners(A,Le)},pe=this.storage.getItem(A);!function Da(){return(0,N.w1)()&&10===document.documentMode}()||pe===m.newValue||m.newValue===m.oldValue?V():setTimeout(V,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const V of Array.from(A))V(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,V=this;return(0,h.Z)(function*(){yield A().call(V,m,E),V.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,h.Z)(function*(){const V=yield E().call(A,m);return A.localCache[m]=JSON.stringify(V),V})()}_remove(m){var E=()=>super._remove,A=this;return(0,h.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),vo=(()=>{class y extends yo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let Vu=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(V=>V.isListeningto(m));if(E)return E;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const A=m,{eventId:V,eventType:pe,data:Le}=A.data,Xe=E.handlersMap[pe];if(!Xe?.size)return;A.ports[0].postMessage({status:"ack",eventId:V,eventType:pe});const at=Array.from(Xe).map(function(){var wt=(0,h.Z)(function*(xr){return xr(A.origin,Le)});return function(xr){return wt.apply(this,arguments)}}()),kt=yield function Xd(y){return Promise.all(y.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(at);A.ports[0].postMessage({status:"done",eventId:V,eventType:pe,response:kt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function wo(y="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return y+m}class hc{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var A=this;return(0,h.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let pe,Le;return new Promise((Xe,at)=>{const kt=wo("",20);V.port1.start();const wt=setTimeout(()=>{at(new Error("unsupported_event"))},E);Le={messageChannel:V,onMessage(xr){const us=xr;if(us.data.eventId===kt)switch(us.data.status){case"ack":clearTimeout(wt),pe=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(pe),Xe(us.data.response);break;default:clearTimeout(wt),clearTimeout(pe),at(new Error("invalid_response"))}}},A.handlers.add(Le),V.port1.addEventListener("message",Le.onMessage),A.target.postMessage({eventType:p,eventId:kt,data:m},[V.port2])}).finally(()=>{Le&&A.removeMessageHandler(Le)})})()}}function Un(){return window}function Yo(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function Qo(){return(Qo=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Bu="firebaseLocalStorageDb",Gs="firebaseLocalStorage",$a="fbase_key";class zs{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Xo(y,p){return y.transaction([Gs],p?"readwrite":"readonly").objectStore(Gs)}function Ga(){const y=indexedDB.open(Bu,1);return new Promise((p,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Gs,{keyPath:$a})}catch(A){m(A)}}),y.addEventListener("success",(0,h.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Gs)?p(E):(E.close(),yield function Jo(){const y=indexedDB.deleteDatabase(Bu);return new zs(y).toPromise()}(),p(yield Ga()))}))})}function fi(y,p,m){return ju.apply(this,arguments)}function ju(){return(ju=(0,h.Z)(function*(y,p,m){const E=Xo(y,!0).put({[$a]:p,value:m});return new zs(E).toPromise()})).apply(this,arguments)}function Io(){return(Io=(0,h.Z)(function*(y,p){const m=Xo(y,!1).get(p),E=yield new zs(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function $u(y,p){const m=Xo(y,!0).delete(p);return new zs(m).toPromise()}const Co=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Ga()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const V=yield E._openDb();return yield m(V)}catch(V){if(A++>3)throw V;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Yo()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Vu._getInstance(function ja(){return Yo()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(A,V){return{keyProcessed:(yield m._poll()).includes(V.key)}});return function(A,V){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(A,V){return["keyChanged"]});return function(A,V){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function Cs(){return Qo.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new hc(m.activeServiceWorker);const V=yield m.sender._send("ping",{},800);V&&null!==(E=V[0])&&void 0!==E&&E.fulfilled&&null!==(A=V[0])&&void 0!==A&&A.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function fc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ga();return yield fi(m,es,"1"),yield $u(m,es),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(V=>fi(V,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=yield E._withRetries(V=>function Eo(y,p){return Io.apply(this,arguments)}(V,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(A=>$u(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(pe=>{const Le=Xo(pe,!1).getAll();return new zs(Le).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],V=new Set;for(const{fbase_key:pe,value:Le}of E)V.add(pe),JSON.stringify(m.localCache[pe])!==JSON.stringify(Le)&&(m.notifyListeners(pe,Le),A.push(pe));for(const pe of Object.keys(m.localCache))m.localCache[pe]&&!V.has(pe)&&(m.notifyListeners(pe,null),A.push(pe));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const V of Array.from(A))V(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Wu(y,p){return St(y,"POST","/v2/accounts/mfaSignIn:start",We(y,p))}function pc(){return(pc=(0,h.Z)(function*(y){return(yield St(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ts(y){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=p,E.onerror=A=>{const V=se("internal-error");V.customData=A,m(V)},E.type="text/javascript",E.charset="UTF-8",function ea(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(E)})}function gc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const xi=1e12;class dm{constructor(p){this.auth=p,this.counter=xi,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new _c(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||xi;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||xi))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||xi))||void 0===E||E.execute(),""})()}}class _c{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;W(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ku(y){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yc=gc("rcb"),eh=new xe(3e4,6e4);class Ws{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Un().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return W(function Zu(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Un().grecaptcha):new Promise((E,A)=>{const V=Un().setTimeout(()=>{A(se(p,"network-request-failed"))},eh.get());Un()[yc]=()=>{Un().clearTimeout(V),delete Un()[yc];const Le=Un().grecaptcha;if(!Le)return void A(se(p,"internal-error"));const Xe=Le.render;Le.render=(at,kt)=>{const wt=Xe(at,kt);return this.counter++,wt},this.hostLanguage=m,E(Le)},ts(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:yc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(V),A(se(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Un().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class za{load(p){return(0,h.Z)(function*(){return new dm(p)})()}clearedOneInstance(){}}const vc="recaptcha",nh={theme:"light",type:"image"};class Wa{constructor(p,m=Object.assign({},nh),E){this.parameters=m,this.type=vc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(E),this.isInvisible="invisible"===this.parameters.size,W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;W(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new za:new Ws,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(V=>{const pe=Le=>{Le&&(p.tokenChangeListeners.delete(pe),V(Le))};p.tokenChangeListeners.add(pe),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Un()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){W(Me()&&!Yo(),p.auth,"internal-error"),yield function hy(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function bs(y){return pc.apply(this,arguments)}(p.auth);W(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class np{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Bi._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function rs(){return(rs=(0,h.Z)(function*(y,p,m){const E=Fn(y),A=yield sh(E,p,(0,N.m9)(m));return new np(A,V=>Bn(E,V))})).apply(this,arguments)}function rh(){return(rh=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y);yield ho(!1,E,"phone");const A=yield sh(E.auth,p,(0,N.m9)(m));return new np(A,V=>Wn(E,V))})).apply(this,arguments)}function wc(){return(wc=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y),A=yield sh(E.auth,p,(0,N.m9)(m));return new np(A,V=>fo(E,V))})).apply(this,arguments)}function sh(y,p,m){return rp.apply(this,arguments)}function rp(){return(rp=(0,h.Z)(function*(y,p,m){var E;const A=yield m.verify();try{let V;if(W("string"==typeof A,y,"argument-error"),W(m.type===vc,y,"argument-error"),V="string"==typeof p?{phoneNumber:p}:p,"session"in V){const pe=V.session;if("phoneNumber"in V)return W("enroll"===pe.type,y,"internal-error"),(yield ep(y,{idToken:pe.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{W("signin"===pe.type,y,"internal-error");const Le=(null===(E=V.multiFactorHint)||void 0===E?void 0:E.uid)||V.multiFactorUid;return W(Le,y,"missing-multi-factor-info"),(yield Wu(y,{mfaPendingCredential:pe.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:pe}=yield Vd(y,{phoneNumber:V.phoneNumber,recaptchaToken:A});return pe}}finally{m._reset()}})).apply(this,arguments)}function oh(){return(oh=(0,h.Z)(function*(y,p){yield Tu((0,N.m9)(y),p)})).apply(this,arguments)}let Ic=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Fn(m)}verifyPhoneNumber(m,E){return sh(this.auth,m,(0,N.m9)(E))}static credential(m,E){return Bi._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?Bi._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Dn(y,p){return p?He(p):(W(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Yu extends zn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ys(p,this._buildIdpRequest())}_linkToIdToken(p,m){return ys(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return ys(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Qu(y){return Wo(y.auth,new Yu(y),y.bypassAuthState)}function ah(y){const{auth:p,user:m}=y;return W(m,p,"internal-error"),jd(m,new Yu(y),y.bypassAuthState)}function Xr(y){return is.apply(this,arguments)}function is(){return(is=(0,h.Z)(function*(y){const{auth:p,user:m}=y;return W(m,p,"internal-error"),Tu(m,new Yu(y),y.bypassAuthState)})).apply(this,arguments)}class Xu{constructor(p,m,E,A,V=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(V){p.reject(V)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:V,tenantId:pe,error:Le,type:Xe}=p;if(Le)return void m.reject(Le);const at={auth:m.auth,requestUri:E,sessionId:A,tenantId:pe||void 0,postBody:V||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Xe)(at))}catch(kt){m.reject(kt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Qu;case"linkViaPopup":case"linkViaRedirect":return Xr;case"reauthViaPopup":case"reauthViaRedirect":return ah;default:ne(this.auth,"internal-error")}}resolve(p){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qa=new xe(2e3,1e4);function Ju(){return(Ju=(0,h.Z)(function*(y,p,m){const E=Fn(y);be(y,p,vs);const A=Dn(E,m);return new el(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function ip(){return(ip=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y);be(E.auth,p,vs);const A=Dn(E.auth,m);return new el(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y);be(E.auth,p,vs);const A=Dn(E.auth,m);return new el(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let el=(()=>{class y extends Xu{constructor(m,E,A,V,pe){super(m,E,V,pe),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return W(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){ce(1===m.filter.length,"Popup operations only handle one event");const E=wo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(se(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,qa.get())};m()}}return y.currentPopupAction=null,y})();const Br=new Map;class uh extends Xu{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=Br.get(m.auth._key());if(!E){try{const V=(yield function sp(y,p){return xs.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(V)}catch(A){E=()=>Promise.reject(A)}Br.set(m.auth._key(),E)}return m.bypassAuthState||Br.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function xs(){return(xs=(0,h.Z)(function*(y,p){const m=Mn(p),E=Hi(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function Cc(y,p){return ss.apply(this,arguments)}function ss(){return(ss=(0,h.Z)(function*(y,p){return Hi(y)._set(Mn(p),"true")})).apply(this,arguments)}function na(y,p){Br.set(y._key(),p)}function Hi(y){return He(y._redirectPersistence)}function Mn(y){return fe("pendingRedirect",y.config.apiKey,y.name)}function x(){return(x=(0,h.Z)(function*(y,p,m){const E=Fn(y);be(y,p,vs),yield E._initializationPromise;const A=Dn(E,m);return yield Cc(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function X(){return(X=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y);be(E.auth,p,vs),yield E.auth._initializationPromise;const A=Dn(E.auth,m);yield Cc(A,E.auth);const V=yield Ut(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",V)})).apply(this,arguments)}function ze(){return(ze=(0,h.Z)(function*(y,p,m){const E=(0,N.m9)(y);be(E.auth,p,vs),yield E.auth._initializationPromise;const A=Dn(E.auth,m);yield ho(!1,E,p.providerId),yield Cc(A,E.auth);const V=yield Ut(E);return A._openRedirect(E.auth,p,"linkViaRedirect",V)})).apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(y,p){return yield Fn(y)._initializationPromise,ht(y,p,!1)})).apply(this,arguments)}function ht(y,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,h.Z)(function*(y,p,m=!1){const E=Fn(y),A=Dn(E,p),pe=yield new uh(E,A,m).execute();return pe&&!m&&(delete pe.user._redirectEventId,yield E._persistUserIfCurrent(pe.user),yield E._setRedirectUser(null,p)),pe})).apply(this,arguments)}function Ut(y){return br.apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(y){const p=wo(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Di{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function pr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hn(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Hn(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(se(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nl(p))}saveEventToCache(p){this.cachedEventUids.add(nl(p)),this.lastProcessedEventTime=Date.now()}}function nl(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Hn({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function Ds(y){return ra.apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(y,p={}){return St(y,"GET","/v1/projects",p)})).apply(this,arguments)}const ap=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fm=/^https?/;function lp(){return(lp=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Ds(y);for(const m of p)try{if(cp(m))return}catch{}ne(y,"unauthorized-domain")})).apply(this,arguments)}function cp(y){const p=we(),{protocol:m,hostname:E}=new URL(p);if(y.startsWith("chrome-extension://")){const pe=new URL(y);return""===pe.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&pe.hostname===E}if(!fm.test(m))return!1;if(ap.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const fy=new xe(3e4,6e4);function dp(){const y=Un().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let bo=null;function py(y){return bo=bo||function pm(y){return new Promise((p,m)=>{var E,A,V;function pe(){dp(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{dp(),m(se(y,"network-request-failed"))},timeout:fy.get()})}if(null!==(A=null===(E=Un().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(V=Un().gapi)||void 0===V||!V.load){const Le=gc("iframefcb");return Un()[Le]=()=>{gapi.load?pe():m(se(y,"network-request-failed"))},ts(`https://apis.google.com/js/api.js?onload=${Le}`).catch(Xe=>m(Xe))}pe()}}).catch(p=>{throw bo=null,p})}(y),bo}const gy=new xe(5e3,15e3),ZE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_y=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yy(y){const p=y.config;W(p.authDomain,y,"auth-domain-config-required");const m=p.emulator?Ce(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:y.name,v:Z.SDK_VERSION},A=_y.get(y.config.apiHost);A&&(E.eid=A);const V=y._getFrameworks();return V.length&&(E.fw=V.join(",")),`${m}?${(0,N.xO)(E).slice(1)}`}function ch(){return ch=(0,h.Z)(function*(y){const p=yield py(y),m=Un().gapi;return W(m,y,"internal-error"),p.open({where:document.body,url:yy(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZE,dontclear:!0},E=>new Promise(function(){var A=(0,h.Z)(function*(V,pe){yield E.restyle({setHideOnLeave:!1});const Le=se(y,"network-request-failed"),Xe=Un().setTimeout(()=>{pe(Le)},gy.get());function at(){Un().clearTimeout(Xe),V(E)}E.ping(at).then(at,()=>{pe(Le)})});return function(V,pe){return A.apply(this,arguments)}}()))}),ch.apply(this,arguments)}const dh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ti{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function os(y,p,m,E,A,V){W(y.config.authDomain,y,"auth-domain-config-required"),W(y.config.apiKey,y,"invalid-api-key");const pe={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:Z.SDK_VERSION,eventId:A};if(p instanceof vs){p.setDefaultLanguage(y.languageCode),pe.providerId=p.providerId||"",(0,N.xb)(p.getCustomParameters())||(pe.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Xe,at]of Object.entries(V||{}))pe[Xe]=at}if(p instanceof Ho){const Xe=p.getScopes().filter(at=>""!==at);Xe.length>0&&(pe.scopes=Xe.join(","))}y.tenantId&&(pe.tid=y.tenantId);const Le=pe;for(const Xe of Object.keys(Le))void 0===Le[Xe]&&delete Le[Xe];return`${function vm({config:y}){return y.emulator?Ce(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(Le).slice(1)}`}const wm="webStorageSupport",bc=class YE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vo,this._completeRedirectFn=ht,this._overrideRedirectResult=na}_openPopup(p,m,E,A){var V=this;return(0,h.Z)(function*(){var pe;ce(null===(pe=V.eventManagers[p._key()])||void 0===pe?void 0:pe.manager,"_initialize() not called before _openPopup()");const Le=os(p,m,E,we(),A);return function mm(y,p,m,E=500,A=600){const V=Math.max((window.screen.availHeight-A)/2,0).toString(),pe=Math.max((window.screen.availWidth-E)/2,0).toString();let Le="";const Xe=Object.assign(Object.assign({},dh),{width:E.toString(),height:A.toString(),top:V,left:pe}),at=(0,N.z$)().toLowerCase();m&&(Le=Qt(at)?"_blank":m),nt(at)&&(p=p||"http://localhost",Xe.scrollbars="yes");const kt=Object.entries(Xe).reduce((xr,[us,Ch])=>`${xr}${us}=${Ch},`,"");if(function Or(y=(0,N.z$)()){var p;return cr(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(at)&&"_self"!==Le)return function _m(y,p){const m=document.createElement("a");m.href=y,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",Le),new Ti(null);const wt=window.open(p||"",Le,kt);W(wt,y,"popup-blocked");try{wt.focus()}catch{}return new Ti(wt)}(p,Le,wo())})()}_openRedirect(p,m,E,A){var V=this;return(0,h.Z)(function*(){return yield V._originValidation(p),function $s(y){Un().location.href=y}(os(p,m,E,we(),A)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:V}=this.eventManagers[m];return A?Promise.resolve(A):(ce(V,"If manager is not set, promise should be"),V)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function gm(y){return ch.apply(this,arguments)}(p),A=new Di(p);return E.register("authEvent",V=>(W(V?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(wm,{type:wm},A=>{var V;const pe=null===(V=A?.[0])||void 0===V?void 0:V[wm];void 0!==pe&&m(!!pe),ne(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function up(y){return lp.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Wf()||Rt()||cr()}};class Em{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return _e("unexpected MultiFactorSessionType")}}}class xc extends Em{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new xc(p)}_finalizeEnroll(p,m,E){return function lm(y,p){return St(y,"POST","/v2/accounts/mfaEnrollment:finalize",We(y,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function qu(y,p){return St(y,"POST","/v2/accounts/mfaSignIn:finalize",We(y,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hr=(()=>{class y{constructor(){}static assertion(m){return xc._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var ph="@firebase/auth";class pp{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ia(){return window}function gp(){return(gp=(0,h.Z)(function*(y,p,m){var E;const{BuildInfo:A}=ia();ce(p.sessionId,"AuthEvent did not contain a session ID");const V=yield mp(p.sessionId),pe={};return cr()?pe.ibi=A.packageName:Dt()?pe.apn=A.packageName:ne(y,"operation-not-supported-in-this-environment"),A.displayName&&(pe.appDisplayName=A.displayName),pe.sessionId=V,os(y,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,pe)})).apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(y){const{BuildInfo:p}=ia(),m={};cr()?m.iosBundleId=p.packageName:Dt()?m.androidPackageName=p.packageName:ne(y,"operation-not-supported-in-this-environment"),yield Ds(y,m)})).apply(this,arguments)}function as(){return(as=(0,h.Z)(function*(y,p,m){const{cordova:E}=ia();let A=()=>{};try{yield new Promise((V,pe)=>{let Le=null;function Xe(){var wt;V();const xr=null===(wt=E.plugins.browsertab)||void 0===wt?void 0:wt.close;"function"==typeof xr&&xr(),"function"==typeof m?.close&&m.close()}function at(){Le||(Le=window.setTimeout(()=>{pe(se(y,"redirect-cancelled-by-user"))},2e3))}function kt(){"visible"===document?.visibilityState&&at()}p.addPassiveListener(Xe),document.addEventListener("resume",at,!1),Dt()&&document.addEventListener("visibilitychange",kt,!1),A=()=>{p.removePassiveListener(Xe),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",kt,!1),Le&&window.clearTimeout(Le)}})}finally{A()}})).apply(this,arguments)}function mp(y){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,h.Z)(function*(y){const p=Ac(y),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ac(y){if(ce(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),m=new Uint8Array(p);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}(0,N.Pz)("authIdTokenMaxAge"),function gh(y){(0,Z._registerComponent)(new J.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:V,authDomain:pe}=E.options;return((Le,Xe)=>{W(V&&!V.includes(":"),"invalid-api-key",{appName:Le.name}),W(!pe?.includes(":"),"argument-error",{appName:Le.name});const at={apiKey:V,authDomain:pe,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bu(y)},kt=new Ld(Le,Xe,at);return function me(y,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(He);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(E,p?.popupRedirectResolver)}(kt,m),kt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new J.wA("auth-internal",p=>{const m=Fn(p.getProvider("auth").getImmediate());return new pp(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(ph,"0.21.3",function pi(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,Z.registerVersion)(ph,"0.21.3","esm2017")}("Browser");class xo extends Di{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.Z)(function*(){yield p.initPromise})()}}function yp(y){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(y){const p=yield vp()._get(xm(y));return p&&(yield vp()._remove(xm(y))),p})).apply(this,arguments)}function XE(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*p.length);y.push(p.charAt(E))}return y.join("")}function vp(){return He(dc)}function xm(y){return fe("authEvent",y.config.apiKey,y.name)}function sa(y){if(!y?.includes("?"))return{};const[p,...m]=y.split("?");return(0,N.zd)(m.join("?"))}const il=class Rc{constructor(){this._redirectPersistence=vo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ht,this._overrideRedirectResult=na}_initialize(p){var m=this;return(0,h.Z)(function*(){const E=p._key();let A=m.eventManagers.get(E);return A||(A=new xo(p),m.eventManagers.set(E,A),m.attachCallbackListeners(p,A)),A})()}_openPopup(p){ne(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,A){var V=this;return(0,h.Z)(function*(){!function Tc(y){var p,m,E,A,V,pe,Le,Xe,at,kt;const wt=ia();W("function"==typeof(null===(p=wt?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),W(typeof(null===(m=wt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),W("function"==typeof(null===(V=null===(A=null===(E=wt?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===V?void 0:V.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(Xe=null===(Le=null===(pe=wt?.cordova)||void 0===pe?void 0:pe.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===Xe?void 0:Xe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(kt=null===(at=wt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===kt?void 0:kt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const pe=yield V._initialize(p);yield pe.initialized(),pe.resetRedirect(),function op(){Br.clear()}(),yield V._originValidation(p);const Le=function _h(y,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:XE(),postBody:null,tenantId:y.tenantId,error:se(y,"no-auth-event")}}(p,E,A);yield function _p(y,p){return vp()._set(xm(y),p)}(p,Le);const Xe=yield function Cm(y,p,m){return gp.apply(this,arguments)}(p,Le,m),at=yield function Za(y){const{cordova:p}=ia();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let A=null;E?p.plugins.browsertab.openUrl(y):A=p.InAppBrowser.open(y,function Lo(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}(Xe);return function mh(y,p,m){return as.apply(this,arguments)}(p,pe,at)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Cy(y){return Ka.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:V}=ia(),pe=setTimeout((0,h.Z)(function*(){yield yp(p),m.onEvent(Dm())}),500),Le=function(){var kt=(0,h.Z)(function*(wt){clearTimeout(pe);const xr=yield yp(p);let us=null;xr&&wt?.url&&(us=function QE(y,p){var m,E;const A=function yh(y){const p=sa(y),m=p.link?decodeURIComponent(p.link):void 0,E=sa(m).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return sa(A).link||A||E||m||y}(p);if(A.includes("/__/auth/callback")){const V=sa(A),pe=V.firebaseError?function rl(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(V.firebaseError)):null,Le=null===(E=null===(m=pe?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Xe=Le?se(Le):null;return Xe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Xe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(xr,wt.url)),m.onEvent(us||Dm())});return function(xr){return kt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Le);const Xe=A,at=`${V.packageName.toLowerCase()}://`;ia().handleOpenURL=function(){var kt=(0,h.Z)(function*(wt){if(wt.toLowerCase().startsWith(at)&&Le({url:wt}),"function"==typeof Xe)try{Xe(wt)}catch(xr){console.error(xr)}});return function(wt){return kt.apply(this,arguments)}}()}};function Dm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:se("no-auth-event")}}function Ja(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ep(y=(0,N.z$)()){return!("file:"!==Ja()&&"ionic:"!==Ja()&&"capacitor:"!==Ja()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Am(){try{const y=self.localStorage,p=wo();if(y)return y.setItem(p,"1"),y.removeItem(p),!function vh(y=(0,N.z$)()){return function Ip(){return(0,N.w1)()&&11===document?.documentMode}()||function by(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch{return Cp()&&(0,N.hl)()}return!1}function Cp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function eu(){return(function Sm(){return"http:"===Ja()||"https:"===Ja()}()||(0,N.ru)()||Ep())&&!function JE(){return(0,N.b$)()||(0,N.UG)()}()&&Am()&&!Cp()}function bp(){return Ep()&&typeof document<"u"}function oa(){return(oa=(0,h.Z)(function*(){return!!bp()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const Si={LOCAL:"local",NONE:"none",SESSION:"session"},tu=W,aa="persistence";function wh(y){return kc.apply(this,arguments)}function kc(){return(kc=(0,h.Z)(function*(y){yield y._initializationPromise;const p=xy(),m=fe(aa,y.config.apiKey,y.name);p&&p.setItem(m,y._getPersistence())})).apply(this,arguments)}function xy(){var y;try{return(null===(y=function Rm(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Dy=W;class qs{constructor(){this.browserResolver=He(bc),this.cordovaResolver=He(il),this.underlyingResolver=null,this._redirectPersistence=vo,this._completeRedirectFn=ht,this._overrideRedirectResult=na}_initialize(p){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,A){var V=this;return(0,h.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._openPopup(p,m,E,A)})()}_openRedirect(p,m,E,A){var V=this;return(0,h.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._openRedirect(p,m,E,A)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return bp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Nc(){return oa.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function Nm(y){return y.unwrap()}function km(y){return Pm(y)}function Pm(y){const{_tokenResponse:p}=y instanceof N.ZR?y.customData:y;if(!p)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Ic.credentialFromResult(y);const m=p.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Kf;break;case"facebook.com":E=Yl;break;case"github.com":E=Zf;break;case"twitter.com":E=om;break;default:const{oauthIdToken:A,oauthAccessToken:V,oauthTokenSecret:pe,pendingToken:Le,nonce:Xe}=p;return V||pe||A||Le?Le?m.startsWith("saml.")?jo._create(m,Le):bi._fromParams({providerId:m,signInMethod:m,pendingToken:Le,idToken:A,accessToken:V}):new Na(m).credential({idToken:A,accessToken:V,rawNonce:Xe}):null}return y instanceof N.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function gi(y,p){return p.catch(m=>{throw m instanceof N.ZR&&function sl(y,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new ol(y,function Cr(y,p){var m;const E=(0,N.m9)(y),A=p;return W(p.customData.operationType,E,"argument-error"),W(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),cc._fromError(E,A)}(y,p));else if(E){const A=Pm(p),V=p;A&&(V.credential=A,V.tenantId=E.tenantId||void 0,V.email=E.email||void 0,V.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:km(m),additionalUserInfo:Jf(m),user:Ks.getOrCreate(A)}})}function Om(y,p){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,h.Z)(function*(y,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>gi(y,m.confirm(E))}})).apply(this,arguments)}class ol{constructor(p,m){this.resolver=m,this.auth=function xp(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return gi(Nm(this.auth),this.resolver.resolveSignIn(p))}}class Ks{constructor(p){this._delegate=p,this.multiFactor=function Uu(y){const p=(0,N.m9)(y);return _o.has(p)||_o.set(p,Ba._fromUser(p)),_o.get(p)}(p)}static getOrCreate(p){return Ks.USER_MAP.has(p)||Ks.USER_MAP.set(p,new Ks(p)),Ks.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,h.Z)(function*(){return gi(m.auth,Wn(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,h.Z)(function*(){return Om(E.auth,function hm(y,p,m){return rh.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,h.Z)(function*(){return gi(m.auth,function KE(y,p,m){return Vr.apply(this,arguments)}(m._delegate,p,qs))})()}linkWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield wh(Fn(m.auth)),function ye(y,p,m){return function Re(y,p,m){return ze.apply(this,arguments)}(y,p,m)}(m._delegate,p,qs)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,h.Z)(function*(){return gi(m.auth,fo(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Om(this.auth,function ih(y,p,m){return wc.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return gi(this.auth,function qE(y,p,m){return ip.apply(this,arguments)}(this._delegate,p,qs))}reauthenticateWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield wh(Fn(m.auth)),function D(y,p,m){return function F(y,p,m){return X.apply(this,arguments)}(y,p,m)}(m._delegate,p,qs)})()}sendEmailVerification(p){return function zd(y,p){return sc.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,h.Z)(function*(){return yield function Du(y,p){return $o.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Wd(y,p){return qd((0,N.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function Va(y,p){return qd((0,N.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Ec(y,p){return oh.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function go(y,p){return Ji.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Fu(y,p,m){return hr.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ks.USER_MAP=new WeakMap;const al=W;let ul=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;al(A,"invalid-api-key",{appName:m.name}),al(A,"invalid-api-key",{appName:m.name});const V=typeof window<"u"?qs:void 0;this._delegate=E.initialize({options:{persistence:Ty(A,m.name),popupRedirectResolver:V}}),this._delegate._updateErrorMap(te),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ks.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function zl(y,p,m){const E=Fn(y);W(E._canInitEmulator,E,"emulator-config-failed"),W(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!!m?.disableWarnings,V=Sa(p),{host:pe,port:Le}=function Aa(y){const p=Sa(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const V=A[1];return{host:V,port:nn(E.substr(V.length+1))}}{const[V,pe]=E.split(":");return{host:V,port:nn(pe)}}}(p);E.config.emulator={url:`${V}//${pe}${null===Le?"":`:${Le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:pe,port:Le,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function dr(){function y(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Ru(y,p){return $d.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Mu(this._delegate,m)}confirmPasswordReset(m,E){return function La(y,p,m){return Lt.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,h.Z)(function*(){return gi(A._delegate,function Qf(y,p,m){return rc.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Pu(y,p){return Ou.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Gd(y,p){return"EMAIL_SIGNIN"===Ma.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){al(eu(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function lt(y,p){return ft.apply(this,arguments)}(m._delegate,qs);return E?gi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function wp(y,p){Fn(y)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:V,error:pe,complete:Le}=Ih(m,E,A);return this._delegate.onAuthStateChanged(V,pe,Le)}onIdTokenChanged(m,E,A){const{next:V,error:pe,complete:Le}=Ih(m,E,A);return this._delegate.onIdTokenChanged(V,pe,Le)}sendSignInLinkToEmail(m,E){return function rn(y,p,m){return ic.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function ws(y,p,m){return Fa.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let A;switch(function ua(y,p){tu(Object.values(Si).includes(p),y,"invalid-persistence-type"),(0,N.b$)()?tu(p!==Si.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?tu(p===Si.NONE,y,"unsupported-persistence-type"):Cp()?tu(p===Si.NONE||p===Si.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):tu(p===Si.NONE||Am(),y,"unsupported-persistence-type")}(E._delegate,m),m){case Si.SESSION:A=vo;break;case Si.LOCAL:A=(yield He(Co)._isAvailable())?Co:dc;break;case Si.NONE:A=re;break;default:return ne("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return gi(this._delegate,function Hd(y){return Yf.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return gi(this._delegate,Bn(this._delegate,m))}signInWithCustomToken(m){return gi(this._delegate,function po(y,p){return Ir.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return gi(this._delegate,function Be(y,p,m){return Bn((0,N.m9)(y),Zl.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return gi(this._delegate,function Nr(y,p,m){return Ua.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Om(this._delegate,function wn(y,p,m){return rs.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return al(eu(),E._delegate,"operation-not-supported-in-this-environment"),gi(E._delegate,function ta(y,p,m){return Ju.apply(this,arguments)}(E._delegate,m,qs))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return al(eu(),E._delegate,"operation-not-supported-in-this-environment"),yield wh(E._delegate),function gt(y,p,m){return function tl(y,p,m){return x.apply(this,arguments)}(y,p,m)}(E._delegate,m,qs)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function nc(y,p){return Nu.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Si,y})();function Ih(y,p,m){let E=y;"function"!=typeof y&&({next:E,error:p,complete:m}=y);const A=E;return{next:pe=>A(pe&&Ks.getOrCreate(pe)),error:p,complete:m}}function Ty(y,p){const m=function Mm(y,p){const m=xy();if(!m)return[];const E=fe(aa,y,p);switch(m.getItem(E)){case Si.NONE:return[re];case Si.LOCAL:return[Co,vo];case Si.SESSION:return[vo];default:return[]}}(y,p);if(typeof self<"u"&&!m.includes(Co)&&m.push(Co),typeof window<"u")for(const E of[dc,vo])m.includes(E)||m.push(E);return m.includes(re)||m.push(re),m}class Pc{constructor(){this.providerId="phone",this._delegate=new Ic(Nm(O.Z.auth()))}static credential(p,m){return Ic.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Pc.PHONE_SIGN_IN_METHOD=Ic.PHONE_SIGN_IN_METHOD,Pc.PROVIDER_ID=Ic.PROVIDER_ID;const Fm=W;class Dp{constructor(p,m,E=O.Z.app()){var A;Fm(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Wa(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lm(y){y.INTERNAL.registerComponent(new J.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new ul(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zl,FacebookAuthProvider:Yl,GithubAuthProvider:Zf,GoogleAuthProvider:Kf,OAuthProvider:Na,SAMLAuthProvider:Xi,PhoneAuthProvider:Pc,PhoneMultiFactorGenerator:Hr,RecaptchaVerifier:Dp,TwitterAuthProvider:om,Auth:ul,AuthCredential:zn,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.3")}(O.Z)},8766:(Ue,Ie,M)=>{"use strict";M.d(Ie,{Lj:()=>ne,X3:()=>ue});var h=M(5861);let N,Z;const J=new WeakMap,L=new WeakMap,H=new WeakMap,k=new WeakMap,R=new WeakMap;let q={get(W,_e,ce){if(W instanceof IDBTransaction){if("done"===_e)return L.get(W);if("objectStoreNames"===_e)return W.objectStoreNames||H.get(W);if("store"===_e)return ce.objectStoreNames[1]?void 0:ce.objectStore(ce.objectStoreNames[0])}return j(W[_e])},set:(W,_e,ce)=>(W[_e]=ce,!0),has:(W,_e)=>W instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in W};function Q(W){return"function"==typeof W?function ge(W){return W!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K(){return Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(W)?function(..._e){return W.apply(z(this),_e),j(J.get(this))}:function(..._e){return j(W.apply(z(this),_e))}:function(_e,...ce){const Te=W.call(z(this),_e,...ce);return H.set(Te,_e.sort?_e.sort():[_e]),j(Te)}}(W):(W instanceof IDBTransaction&&function $(W){if(L.has(W))return;const _e=new Promise((ce,Te)=>{const He=()=>{W.removeEventListener("complete",Ae),W.removeEventListener("error",me),W.removeEventListener("abort",me)},Ae=()=>{ce(),He()},me=()=>{Te(W.error||new DOMException("AbortError","AbortError")),He()};W.addEventListener("complete",Ae),W.addEventListener("error",me),W.addEventListener("abort",me)});L.set(W,_e)}(W),((W,_e)=>_e.some(ce=>W instanceof ce))(W,function ie(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(W,q):W)}function j(W){if(W instanceof IDBRequest)return function P(W){const _e=new Promise((ce,Te)=>{const He=()=>{W.removeEventListener("success",Ae),W.removeEventListener("error",me)},Ae=()=>{ce(j(W.result)),He()},me=()=>{Te(W.error),He()};W.addEventListener("success",Ae),W.addEventListener("error",me)});return _e.then(ce=>{ce instanceof IDBCursor&&J.set(ce,W)}).catch(()=>{}),R.set(_e,W),_e}(W);if(k.has(W))return k.get(W);const _e=Q(W);return _e!==W&&(k.set(W,_e),R.set(_e,W)),_e}const z=W=>R.get(W);function ue(W,_e,{blocked:ce,upgrade:Te,blocking:He,terminated:Ae}={}){const me=indexedDB.open(W,_e),we=j(me);return Te&&me.addEventListener("upgradeneeded",Me=>{Te(j(me.result),Me.oldVersion,Me.newVersion,j(me.transaction))}),ce&&me.addEventListener("blocked",()=>ce()),we.then(Me=>{Ae&&Me.addEventListener("close",()=>Ae()),He&&Me.addEventListener("versionchange",()=>He())}).catch(()=>{}),we}function ne(W,{blocked:_e}={}){const ce=indexedDB.deleteDatabase(W);return _e&&ce.addEventListener("blocked",()=>_e()),j(ce).then(()=>{})}const se=["get","getKey","getAll","getAllKeys","count"],oe=["put","add","delete","clear"],be=new Map;function ve(W,_e){if(!(W instanceof IDBDatabase)||_e in W||"string"!=typeof _e)return;if(be.get(_e))return be.get(_e);const ce=_e.replace(/FromIndex$/,""),Te=_e!==ce,He=oe.includes(ce);if(!(ce in(Te?IDBIndex:IDBObjectStore).prototype)||!He&&!se.includes(ce))return;const Ae=function(){var me=(0,h.Z)(function*(we,...Me){const ke=this.transaction(we,He?"readwrite":"readonly");let de=ke.store;return Te&&(de=de.index(Me.shift())),(yield Promise.all([de[ce](...Me),He&&ke.done]))[0]});return function(Me){return me.apply(this,arguments)}}();return be.set(_e,Ae),Ae}!function te(W){q=W(q)}(W=>({...W,get:(_e,ce,Te)=>ve(_e,ce)||W.get(_e,ce,Te),has:(_e,ce)=>!!ve(_e,ce)||W.has(_e,ce)}))},5861:(Ue,Ie,M)=>{"use strict";function h(N,Z,ie,K,J,L,H){try{var k=N[L](H),R=k.value}catch(P){return void ie(P)}k.done?Z(R):Promise.resolve(R).then(K,J)}function O(N){return function(){var Z=this,ie=arguments;return new Promise(function(K,J){var L=N.apply(Z,ie);function H(R){h(L,K,J,H,k,"next",R)}function k(R){h(L,K,J,H,k,"throw",R)}H(void 0)})}}M.d(Ie,{Z:()=>O})}},Ue=>{Ue(Ue.s=5327)}]);